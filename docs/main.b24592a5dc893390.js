"use strict";(self.webpackChunkspy=self.webpackChunkspy||[]).push([[179],{2011:(bt,Ne,U)=>{U.d(Ne,{Dh:()=>Ce,GT:()=>ce,cc:()=>Me,hO:()=>We,on:()=>G,pX:()=>ue,xv:()=>ye});var y=U(4650),te=U(1274),F=U(710);bt=U.hmd(bt);const le=["ngOnDestroy"],ue=(Oe,Ue,qe,Ve={})=>new Proxy(Oe,{get:(Te,Se)=>qe.runOutsideAngular(()=>{var Ke;if(Oe[Se])return!(null===(Ke=Ve?.spy)||void 0===Ke)&&Ke.get&&Ve.spy.get(Se,Oe[Se]),Oe[Se];if(le.indexOf(Se)>-1)return()=>{};const Le=Ue.toPromise().then(ct=>{const oe=ct&&ct[Se];return"function"==typeof oe?oe.bind(ct):oe&&oe.then?oe.then(Pt=>qe.run(()=>Pt)):qe.run(()=>oe)});return new Proxy(()=>{},{get:(ct,oe)=>Le[oe],apply:(ct,oe,Pt)=>Le.then(it=>{var Xt;const ft=it&&it(...Pt);return!(null===(Xt=Ve?.spy)||void 0===Xt)&&Xt.apply&&Ve.spy.apply(Se,Pt,ft),ft})})})}),ce=(Oe,Ue)=>{Ue.forEach(qe=>{Object.getOwnPropertyNames(qe.prototype||qe).forEach(Ve=>{Object.defineProperty(Oe.prototype,Ve,Object.getOwnPropertyDescriptor(qe.prototype||qe,Ve))})})};class Ee{constructor(Ue){return Ue}}const Ce=new y.OlP("angularfire2.app.options"),ye=new y.OlP("angularfire2.app.name");function G(Oe,Ue,qe){const Te="object"==typeof qe&&qe||{};Te.name=Te.name||"string"==typeof qe&&qe||"[DEFAULT]";const Ke=te.Z.apps.filter(Le=>Le&&Le.name===Te.name)[0]||Ue.runOutsideAngular(()=>te.Z.initializeApp(Oe,Te));try{JSON.stringify(Oe)!==JSON.stringify(Ke.options)&&W("error",`${Ke.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(Ke)}const W=(Oe,...Ue)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Oe](...Ue)},Q={provide:Ee,useFactory:G,deps:[Ce,y.R0b,[new y.FiY,ye]]};let We=(()=>{class Oe{constructor(qe){te.Z.registerVersion("angularfire",F.q4.full,"core"),te.Z.registerVersion("angularfire",F.q4.full,"app-compat"),te.Z.registerVersion("angular",y.q4F.full,qe.toString())}static initializeApp(qe,Ve){return{ngModule:Oe,providers:[{provide:Ce,useValue:qe},{provide:ye,useValue:Ve}]}}}return Oe.\u0275fac=function(qe){return new(qe||Oe)(y.LFG(y.Lbi))},Oe.\u0275mod=y.oAB({type:Oe}),Oe.\u0275inj=y.cJS({providers:[Q]}),Oe})();function Me(Oe,Ue,qe,Ve,Te){const[,Se,Ke]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===Oe)||[];if(Se)return function Je(Oe,Ue){try{return Oe.toString()===Ue.toString()}catch{return Oe===Ue}}(Te,Ke)||(_e("error",`${Ue} was already initialized on the ${qe} Firebase App with different settings.${ht?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:Te,was:Ke})),Se;{const Le=Ve();return globalThis.\u0275AngularfireInstanceCache.push([Oe,Le,Te]),Le}}const ht=!!bt.hot,_e=(Oe,...Ue)=>{(0,y.X6Q)()&&typeof console<"u"&&console[Oe](...Ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},710:(bt,Ne,U)=>{U.d(Ne,{q4:()=>gi,iC:()=>fs,HU:()=>Mt,vb:()=>Ic,JM:()=>Ec});var y=U(4650),te=U(8140),F=U(5861),le=U(1186),ue=U(2090),ce=U(4859),Ee=U(1877);const Ce=(E,D)=>D.some(A=>E instanceof A);let ye,G;const We=new WeakMap,Me=new WeakMap,Je=new WeakMap,ht=new WeakMap,_e=new WeakMap;let qe={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Me.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Je.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return Ke(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function Se(E){return"function"==typeof E?function Te(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Q(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(Le(this),D),Ke(We.get(this))}:function(...D){return Ke(E.apply(Le(this),D))}:function(D,...A){const L=E.call(Le(this),D,...A);return Je.set(L,D.sort?D.sort():[D]),Ke(L)}}(E):(E instanceof IDBTransaction&&function Ue(E){if(Me.has(E))return;const D=new Promise((A,L)=>{const q=()=>{E.removeEventListener("complete",X),E.removeEventListener("error",ae),E.removeEventListener("abort",ae)},X=()=>{A(),q()},ae=()=>{L(E.error||new DOMException("AbortError","AbortError")),q()};E.addEventListener("complete",X),E.addEventListener("error",ae),E.addEventListener("abort",ae)});Me.set(E,D)}(E),Ce(E,function W(){return ye||(ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,qe):E)}function Ke(E){if(E instanceof IDBRequest)return function Oe(E){const D=new Promise((A,L)=>{const q=()=>{E.removeEventListener("success",X),E.removeEventListener("error",ae)},X=()=>{A(Ke(E.result)),q()},ae=()=>{L(E.error),q()};E.addEventListener("success",X),E.addEventListener("error",ae)});return D.then(A=>{A instanceof IDBCursor&&We.set(A,E)}).catch(()=>{}),_e.set(D,E),D}(E);if(ht.has(E))return ht.get(E);const D=Se(E);return D!==E&&(ht.set(E,D),_e.set(D,E)),D}const Le=E=>_e.get(E),Pt=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],Xt=new Map;function ft(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(Xt.get(D))return Xt.get(D);const A=D.replace(/FromIndex$/,""),L=D!==A,q=it.includes(A);if(!(A in(L?IDBIndex:IDBObjectStore).prototype)||!q&&!Pt.includes(A))return;const X=function(){var ae=(0,F.Z)(function*(Qe,...Ze){const vt=this.transaction(Qe,q?"readwrite":"readonly");let Ft=vt.store;return L&&(Ft=Ft.index(Ze.shift())),(yield Promise.all([Ft[A](...Ze),q&&vt.done]))[0]});return function(Ze){return ae.apply(this,arguments)}}();return Xt.set(D,X),X}!function Ve(E){qe=E(qe)}(E=>({...E,get:(D,A,L)=>ft(D,A)||E.get(D,A,L),has:(D,A)=>!!ft(D,A)||E.has(D,A)}));const Os="@firebase/installations",ai="0.6.4",ao=1e4,Ji=`w:${ai}`,he="FIS_v2",me="https://firebaseinstallations.googleapis.com/v1",we=36e5,pt=new ue.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function gt(E){return E instanceof ue.ZR&&E.code.includes("request-failed")}function bn({projectId:E}){return`${me}/projects/${E}/installations`}function It(E){return{token:E.token,requestStatus:2,expiresIn:Hr(E.expiresIn),creationTime:Date.now()}}function Yt(E,D){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,F.Z)(function*(E,D){const L=(yield D.json()).error;return pt.create("request-failed",{requestName:E,serverCode:L.code,serverMessage:L.message,serverStatus:L.status})})).apply(this,arguments)}function Cn({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function pr(E){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,F.Z)(function*(E){const D=yield E();return D.status>=500&&D.status<600?E():D})).apply(this,arguments)}function Hr(E){return Number(E.replace("s","000"))}function wt(){return(wt=(0,F.Z)(function*({appConfig:E,heartbeatServiceProvider:D},{fid:A}){const L=bn(E),q=Cn(E),X=D.getImmediate({optional:!0});if(X){const vt=yield X.getHeartbeatsHeader();vt&&q.append("x-firebase-client",vt)}const Qe={method:"POST",headers:q,body:JSON.stringify({fid:A,authVersion:he,appId:E.appId,sdkVersion:Ji})},Ze=yield pr(()=>fetch(L,Qe));if(Ze.ok){const vt=yield Ze.json();return{fid:vt.fid||A,registrationStatus:2,refreshToken:vt.refreshToken,authToken:It(vt.authToken)}}throw yield Yt("Create Installation",Ze)})).apply(this,arguments)}function Lr(E){return new Promise(D=>{setTimeout(D,E)})}const Ar=/^[cdef][\w-]{21}$/,zr="";function Xi(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function ln(E){return function ju(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return Ar.test(A)?A:zr}catch{return zr}}function hn(E){return`${E.appName}!${E.appId}`}const at=new Map;function Lt(E,D){const A=hn(E);gr(A,D),function mr(E,D){const A=function li(){return!Nn&&"BroadcastChannel"in self&&(Nn=new BroadcastChannel("[Firebase] FID Change"),Nn.onmessage=E=>{gr(E.data.key,E.data.fid)}),Nn}();A&&A.postMessage({key:E,fid:D}),function wn(){0===at.size&&Nn&&(Nn.close(),Nn=null)}()}(A,D)}function gr(E,D){const A=at.get(E);if(A)for(const L of A)L(D)}let Nn=null;const ks="firebase-installations-database",sn=1,es="firebase-installations-store";let dn=null;function di(){return dn||(dn=function ct(E,D,{blocked:A,upgrade:L,blocking:q,terminated:X}={}){const ae=indexedDB.open(E,D),Qe=Ke(ae);return L&&ae.addEventListener("upgradeneeded",Ze=>{L(Ke(ae.result),Ze.oldVersion,Ze.newVersion,Ke(ae.transaction))}),A&&ae.addEventListener("blocked",()=>A()),Qe.then(Ze=>{X&&Ze.addEventListener("close",()=>X()),q&&Ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),Qe}(ks,sn,{upgrade:(E,D)=>{0===D&&E.createObjectStore(es)}})),dn}function On(E,D){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,F.Z)(function*(E,D){const A=hn(E),q=(yield di()).transaction(es,"readwrite"),X=q.objectStore(es),ae=yield X.get(A);return yield X.put(D,A),yield q.done,(!ae||ae.fid!==D.fid)&&Lt(E,D.fid),D})).apply(this,arguments)}function Ni(E){return xn.apply(this,arguments)}function xn(){return(xn=(0,F.Z)(function*(E){const D=hn(E),L=(yield di()).transaction(es,"readwrite");yield L.objectStore(es).delete(D),yield L.done})).apply(this,arguments)}function Ii(E,D){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,F.Z)(function*(E,D){const A=hn(E),q=(yield di()).transaction(es,"readwrite"),X=q.objectStore(es),ae=yield X.get(A),Qe=D(ae);return void 0===Qe?yield X.delete(A):yield X.put(Qe,A),yield q.done,Qe&&(!ae||ae.fid!==Qe.fid)&&Lt(E,Qe.fid),Qe})).apply(this,arguments)}function j(E){return V.apply(this,arguments)}function V(){return V=(0,F.Z)(function*(E){let D;const A=yield Ii(E.appConfig,L=>{const q=function Y(E){return An(E||{fid:Xi(),registrationStatus:0})}(L),X=function Ie(E,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(pt.create("app-offline"))};const A={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},L=function ne(E,D){return He.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:L}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:Nt(E)}:{installationEntry:D}}(E,q);return D=X.registrationPromise,X.installationEntry});return A.fid===zr?{installationEntry:yield D}:{installationEntry:A,registrationPromise:D}}),V.apply(this,arguments)}function He(){return He=(0,F.Z)(function*(E,D){try{const A=yield function kr(E,D){return wt.apply(this,arguments)}(E,D);return On(E.appConfig,A)}catch(A){throw gt(A)&&409===A.customData.serverCode?yield Ni(E.appConfig):yield On(E.appConfig,{fid:D.fid,registrationStatus:0}),A}}),He.apply(this,arguments)}function Nt(E){return on.apply(this,arguments)}function on(){return(on=(0,F.Z)(function*(E){let D=yield kn(E.appConfig);for(;1===D.registrationStatus;)yield Lr(100),D=yield kn(E.appConfig);if(0===D.registrationStatus){const{installationEntry:A,registrationPromise:L}=yield j(E);return L||A}return D})).apply(this,arguments)}function kn(E){return Ii(E,D=>{if(!D)throw pt.create("installation-not-found");return An(D)})}function An(E){return function pn(E){return 1===E.registrationStatus&&E.registrationTime+ao<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function yr(){return(yr=(0,F.Z)(function*({appConfig:E,heartbeatServiceProvider:D},A){const L=function Wr(E,{fid:D}){return`${bn(E)}/${D}/authTokens:generate`}(E,A),q=function qn(E,{refreshToken:D}){const A=Cn(E);return A.append("Authorization",function ui(E){return`${he} ${E}`}(D)),A}(E,A),X=D.getImmediate({optional:!0});if(X){const vt=yield X.getHeartbeatsHeader();vt&&q.append("x-firebase-client",vt)}const Qe={method:"POST",headers:q,body:JSON.stringify({installation:{sdkVersion:Ji,appId:E.appId}})},Ze=yield pr(()=>fetch(L,Qe));if(Ze.ok)return It(yield Ze.json());throw yield Yt("Generate Auth Token",Ze)})).apply(this,arguments)}function Di(E){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,F.Z)(function*(E,D=!1){let A;const L=yield Ii(E.appConfig,X=>{if(!qt(X))throw pt.create("not-registered");const ae=X.authToken;if(!D&&function Et(E){return 2===E.requestStatus&&!function Qt(E){const D=Date.now();return D<E.creationTime||E.creationTime+E.expiresIn<D+we}(E)}(ae))return X;if(1===ae.requestStatus)return A=function ge(E,D){return ie.apply(this,arguments)}(E,D),X;{if(!navigator.onLine)throw pt.create("app-offline");const Qe=function nn(E){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:D})}(X);return A=function mt(E,D){return xt.apply(this,arguments)}(E,Qe),Qe}});return A?yield A:L.authToken}),Ls.apply(this,arguments)}function ie(){return(ie=(0,F.Z)(function*(E,D){let A=yield Be(E.appConfig);for(;1===A.authToken.requestStatus;)yield Lr(100),A=yield Be(E.appConfig);const L=A.authToken;return 0===L.requestStatus?Di(E,D):L})).apply(this,arguments)}function Be(E){return Ii(E,D=>{if(!qt(D))throw pt.create("not-registered");return function ir(E){return 1===E.requestStatus&&E.requestTime+ao<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function xt(){return xt=(0,F.Z)(function*(E,D){try{const A=yield function tn(E,D){return yr.apply(this,arguments)}(E,D),L=Object.assign(Object.assign({},D),{authToken:A});return yield On(E.appConfig,L),A}catch(A){if(!gt(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const L=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield On(E.appConfig,L)}else yield Ni(E.appConfig);throw A}}),xt.apply(this,arguments)}function qt(E){return void 0!==E&&2===E.registrationStatus}function pa(){return(pa=(0,F.Z)(function*(E){const D=E,{installationEntry:A,registrationPromise:L}=yield j(D);return L?L.catch(console.error):Di(D).catch(console.error),A.fid})).apply(this,arguments)}function ts(){return ts=(0,F.Z)(function*(E,D=!1){const A=E;return yield function qr(E){return Xe.apply(this,arguments)}(A),(yield Di(A,D)).token}),ts.apply(this,arguments)}function Xe(){return(Xe=(0,F.Z)(function*(E){const{registrationPromise:D}=yield j(E);D&&(yield D)})).apply(this,arguments)}function ws(E){return pt.create("missing-app-config-values",{valueName:E})}const Ht="installations",Fs=E=>{const D=E.getProvider("app").getImmediate(),A=function So(E){if(!E||!E.options)throw ws("App Configuration");if(!E.name)throw ws("App Name");const D=["projectId","apiKey","appId"];for(const A of D)if(!E.options[A])throw ws(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(D);return{app:D,appConfig:A,heartbeatServiceProvider:(0,le.qX)(D,"heartbeat"),_delete:()=>Promise.resolve()}},ns=E=>{const D=E.getProvider("app").getImmediate(),A=(0,le.qX)(D,Ht).getImmediate();return{getId:()=>function er(E){return pa.apply(this,arguments)}(A),getToken:q=>function al(E){return ts.apply(this,arguments)}(A,q)}};(function Us(){(0,le.Xd)(new ce.wA(Ht,Fs,"PUBLIC")),(0,le.Xd)(new ce.wA("installations-internal",ns,"PRIVATE"))})(),(0,le.KN)(Os,ai),(0,le.KN)(Os,ai,"esm2017");const jn="@firebase/remote-config",vr=new ue.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ss{constructor(D,A,L,q){this.client=D,this.storage=A,this.storageCache=L,this.logger=q}isCachedDataFresh(D,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const L=Date.now()-A,q=L<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${L}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${q}.`),q}fetch(D){var A=this;return(0,F.Z)(function*(){const[L,q]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(q&&A.isCachedDataFresh(D.cacheMaxAgeMillis,L))return q;D.eTag=q&&q.eTag;const X=yield A.client.fetch(D),ae=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===X.status&&ae.push(A.storage.setLastSuccessfulFetchResponse(X)),yield Promise.all(ae),X})()}}function Ds(E=navigator){return E.languages&&E.languages[0]||E.language}class Ka{constructor(D,A,L,q,X,ae){this.firebaseInstallations=D,this.sdkVersion=A,this.namespace=L,this.projectId=q,this.apiKey=X,this.appId=ae}fetch(D){var A=this;return(0,F.Z)(function*(){const[L,q]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),ae=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},Ze={sdk_version:A.sdkVersion,app_instance_id:L,app_instance_id_token:q,app_id:A.appId,language_code:Ds()},vt={method:"POST",headers:Qe,body:JSON.stringify(Ze)},Ft=fetch(ae,vt),Ut=new Promise((Nr,ps)=>{D.signal.addEventListener(()=>{const yo=new Error("The operation was aborted.");yo.name="AbortError",ps(yo)})});let ei;try{yield Promise.race([Ft,Ut]),ei=yield Ft}catch(Nr){let ps="fetch-client-network";throw"AbortError"===Nr?.name&&(ps="fetch-timeout"),vr.create(ps,{originalErrorMessage:Nr?.message})}let Sn=ei.status;const $t=ei.headers.get("ETag")||void 0;let mo,ta;if(200===ei.status){let Nr;try{Nr=yield ei.json()}catch(ps){throw vr.create("fetch-client-parse",{originalErrorMessage:ps?.message})}mo=Nr.entries,ta=Nr.state}if("INSTANCE_STATE_UNSPECIFIED"===ta?Sn=500:"NO_CHANGE"===ta?Sn=304:("NO_TEMPLATE"===ta||"EMPTY_CONFIG"===ta)&&(mo={}),304!==Sn&&200!==Sn)throw vr.create("fetch-status",{httpStatus:Sn});return{status:Sn,eTag:$t,config:mo}})()}}class Sf{constructor(D,A){this.client=D,this.storage=A}fetch(D){var A=this;return(0,F.Z)(function*(){const L=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(D,L)})()}attemptFetch(D,{throttleEndTimeMillis:A,backoffCount:L}){var q=this;return(0,F.Z)(function*(){yield function Od(E,D){return new Promise((A,L)=>{const q=Math.max(D-Date.now(),0),X=setTimeout(A,q);E.addEventListener(()=>{clearTimeout(X),L(vr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,A);try{const X=yield q.client.fetch(D);return yield q.storage.deleteThrottleMetadata(),X}catch(X){if(!function $u(E){if(!(E instanceof ue.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(X))throw X;const ae={throttleEndTimeMillis:Date.now()+(0,ue.$s)(L),backoffCount:L+1};return yield q.storage.setThrottleMetadata(ae),q.attemptFetch(D,ae)}})()}}class ll{constructor(D,A,L,q,X){this.app=D,this._client=A,this._storageCache=L,this._storage=q,this._logger=X,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function js(E,D){const A=E.target.error||void 0;return vr.create(D,{originalErrorMessage:A&&A?.message})}const Si="app_namespace_store";class Ya{constructor(D,A,L,q=function lo(){return new Promise((E,D)=>{try{const A=indexedDB.open("firebase_remote_config",1);A.onerror=L=>{D(js(L,"storage-open"))},A.onsuccess=L=>{E(L.target.result)},A.onupgradeneeded=L=>{0===L.oldVersion&&L.target.result.createObjectStore(Si,{keyPath:"compositeKey"})}}catch(A){D(vr.create("storage-open",{originalErrorMessage:A?.message}))}})}()){this.appId=D,this.appName=A,this.namespace=L,this.openDbPromise=q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var A=this;return(0,F.Z)(function*(){const L=yield A.openDbPromise;return new Promise((q,X)=>{const Qe=L.transaction([Si],"readonly").objectStore(Si),Ze=A.createCompositeKey(D);try{const vt=Qe.get(Ze);vt.onerror=Ft=>{X(js(Ft,"storage-get"))},vt.onsuccess=Ft=>{const Ut=Ft.target.result;q(Ut?Ut.value:void 0)}}catch(vt){X(vr.create("storage-get",{originalErrorMessage:vt?.message}))}})})()}set(D,A){var L=this;return(0,F.Z)(function*(){const q=yield L.openDbPromise;return new Promise((X,ae)=>{const Ze=q.transaction([Si],"readwrite").objectStore(Si),vt=L.createCompositeKey(D);try{const Ft=Ze.put({compositeKey:vt,value:A});Ft.onerror=Ut=>{ae(js(Ut,"storage-set"))},Ft.onsuccess=()=>{X()}}catch(Ft){ae(vr.create("storage-set",{originalErrorMessage:Ft?.message}))}})})()}delete(D){var A=this;return(0,F.Z)(function*(){const L=yield A.openDbPromise;return new Promise((q,X)=>{const Qe=L.transaction([Si],"readwrite").objectStore(Si),Ze=A.createCompositeKey(D);try{const vt=Qe.delete(Ze);vt.onerror=Ft=>{X(js(Ft,"storage-delete"))},vt.onsuccess=()=>{q()}}catch(vt){X(vr.create("storage-delete",{originalErrorMessage:vt?.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class Qa{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,F.Z)(function*(){const A=D.storage.getLastFetchStatus(),L=D.storage.getLastSuccessfulFetchTimestampMillis(),q=D.storage.getActiveConfig(),X=yield A;X&&(D.lastFetchStatus=X);const ae=yield L;ae&&(D.lastSuccessfulFetchTimestampMillis=ae);const Qe=yield q;Qe&&(D.activeConfig=Qe)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function ma(){return $s.apply(this,arguments)}function $s(){return($s=(0,F.Z)(function*(){if(!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}!function Oi(){(0,le.Xd)(new ce.wA("remote-config",function E(D,{instanceIdentifier:A}){const L=D.getProvider("app").getImmediate(),q=D.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw vr.create("registration-window");if(!(0,ue.hl)())throw vr.create("indexed-db-unavailable");const{projectId:X,apiKey:ae,appId:Qe}=L.options;if(!X)throw vr.create("registration-project-id");if(!ae)throw vr.create("registration-api-key");if(!Qe)throw vr.create("registration-app-id");const Ze=new Ya(Qe,L.name,A=A||"firebase"),vt=new Qa(Ze),Ft=new Ee.Yd(jn);Ft.logLevel=Ee.in.ERROR;const Ut=new Ka(q,le.Jn,A,X,ae,Qe),ei=new Sf(Ut,Ze),Sn=new ss(ei,Ze,vt,Ft),$t=new ll(L,Sn,vt,Ze,Ft);return function _r(E){const D=(0,ue.m9)(E);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}($t),$t},"PUBLIC").setMultipleInstances(!0)),(0,le.KN)(jn,"0.4.4"),(0,le.KN)(jn,"0.4.4","esm2017")}();const Ja=(E,D)=>D.some(A=>E instanceof A);let Xa,bs;const ya=new WeakMap,Cs=new WeakMap,Mr=new WeakMap,Rr=new WeakMap,N=new WeakMap;let K={get(E,D,A){if(E instanceof IDBTransaction){if("done"===D)return Cs.get(E);if("objectStoreNames"===D)return E.objectStoreNames||Mr.get(E);if("store"===D)return A.objectStoreNames[1]?void 0:A.objectStore(A.objectStoreNames[0])}return St(E[D])},set:(E,D,A)=>(E[D]=A,!0),has:(E,D)=>E instanceof IDBTransaction&&("done"===D||"store"===D)||D in E};function rt(E){return"function"==typeof E?function Re(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ho(){return bs||(bs=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...D){return E.apply(zt(this),D),St(ya.get(this))}:function(...D){return St(E.apply(zt(this),D))}:function(D,...A){const L=E.call(zt(this),D,...A);return Mr.set(L,D.sort?D.sort():[D]),St(L)}}(E):(E instanceof IDBTransaction&&function k(E){if(Cs.has(E))return;const D=new Promise((A,L)=>{const q=()=>{E.removeEventListener("complete",X),E.removeEventListener("error",ae),E.removeEventListener("abort",ae)},X=()=>{A(),q()},ae=()=>{L(E.error||new DOMException("AbortError","AbortError")),q()};E.addEventListener("complete",X),E.addEventListener("error",ae),E.addEventListener("abort",ae)});Cs.set(E,D)}(E),Ja(E,function dl(){return Xa||(Xa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,K):E)}function St(E){if(E instanceof IDBRequest)return function M(E){const D=new Promise((A,L)=>{const q=()=>{E.removeEventListener("success",X),E.removeEventListener("error",ae)},X=()=>{A(St(E.result)),q()},ae=()=>{L(E.error),q()};E.addEventListener("success",X),E.addEventListener("error",ae)});return D.then(A=>{A instanceof IDBCursor&&ya.set(A,E)}).catch(()=>{}),N.set(D,E),D}(E);if(Rr.has(E))return Rr.get(E);const D=rt(E);return D!==E&&(Rr.set(E,D),N.set(D,E)),D}const zt=E=>N.get(E);function Yn(E,D,{blocked:A,upgrade:L,blocking:q,terminated:X}={}){const ae=indexedDB.open(E,D),Qe=St(ae);return L&&ae.addEventListener("upgradeneeded",Ze=>{L(St(ae.result),Ze.oldVersion,Ze.newVersion,St(ae.transaction))}),A&&ae.addEventListener("blocked",()=>A()),Qe.then(Ze=>{X&&Ze.addEventListener("close",()=>X()),q&&Ze.addEventListener("versionchange",()=>q())}).catch(()=>{}),Qe}function $n(E,{blocked:D}={}){const A=indexedDB.deleteDatabase(E);return D&&A.addEventListener("blocked",()=>D()),St(A).then(()=>{})}const fn=["get","getKey","getAll","getAllKeys","count"],wr=["put","add","delete","clear"],as=new Map;function Mo(E,D){if(!(E instanceof IDBDatabase)||D in E||"string"!=typeof D)return;if(as.get(D))return as.get(D);const A=D.replace(/FromIndex$/,""),L=D!==A,q=wr.includes(A);if(!(A in(L?IDBIndex:IDBObjectStore).prototype)||!q&&!fn.includes(A))return;const X=function(){var ae=(0,F.Z)(function*(Qe,...Ze){const vt=this.transaction(Qe,q?"readwrite":"readonly");let Ft=vt.store;return L&&(Ft=Ft.index(Ze.shift())),(yield Promise.all([Ft[A](...Ze),q&&vt.done]))[0]});return function(Ze){return ae.apply(this,arguments)}}();return as.set(D,X),X}!function $(E){K=E(K)}(E=>({...E,get:(D,A,L)=>Mo(D,A)||E.get(D,A,L),has:(D,A)=>!!Mo(D,A)||E.has(D,A)}));const Bt="/firebase-messaging-sw.js",eu="/firebase-cloud-messaging-push-scope",Ld="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fd="https://fcmregistrations.googleapis.com/v1",zu="google.c.a.c_id",Ud="google.c.a.c_l",Gu="google.c.a.ts",Rg="google.c.a.e";var ve=(()=>{return(E=ve||(ve={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ve;var E})();function Gt(E){const D=new Uint8Array(E);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function tu(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),L=atob(A),q=new Uint8Array(L.length);for(let X=0;X<L.length;++X)q[X]=L.charCodeAt(X);return q}const nu="fcm_token_details_db",Er=5,Ro="fcm_token_object_Store";function fi(){return fi=(0,F.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(X=>X.name).includes(nu))return null;let D=null;return(yield Yn(nu,Er,{upgrade:(L=(0,F.Z)(function*(q,X,ae,Qe){var Ze;if(X<2||!q.objectStoreNames.contains(Ro))return;const vt=Qe.objectStore(Ro),Ft=yield vt.index("fcmSenderId").get(E);if(yield vt.clear(),Ft)if(2===X){const Ut=Ft;if(!Ut.auth||!Ut.p256dh||!Ut.endpoint)return;D={token:Ut.fcmToken,createTime:null!==(Ze=Ut.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Ut.auth,p256dh:Ut.p256dh,endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:"string"==typeof Ut.vapidKey?Ut.vapidKey:Gt(Ut.vapidKey)}}}else if(3===X){const Ut=Ft;D={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Gt(Ut.auth),p256dh:Gt(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Gt(Ut.vapidKey)}}}else if(4===X){const Ut=Ft;D={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Gt(Ut.auth),p256dh:Gt(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Gt(Ut.vapidKey)}}}}),function(X,ae,Qe,Ze){return L.apply(this,arguments)})})).close(),yield $n(nu),yield $n("fcm_vapid_details_db"),yield $n("undefined"),function Vd(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:D}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}(D)?D:null;var L}),fi.apply(this,arguments)}const qu="firebase-messaging-database",Pg=1,Hs="firebase-messaging-store";let ru=null;function or(){return ru||(ru=Yn(qu,Pg,{upgrade:(E,D)=>{0===D&&E.createObjectStore(Hs)}})),ru}function Li(E){return Ts.apply(this,arguments)}function Ts(){return Ts=(0,F.Z)(function*(E){const D=Ku(E),L=yield(yield or()).transaction(Hs).objectStore(Hs).get(D);if(L)return L;{const q=yield function Wu(E){return fi.apply(this,arguments)}(E.appConfig.senderId);if(q)return yield Po(E,q),q}}),Ts.apply(this,arguments)}function Po(E,D){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,F.Z)(function*(E,D){const A=Ku(E),q=(yield or()).transaction(Hs,"readwrite");return yield q.objectStore(Hs).put(D,A),yield q.done,D})).apply(this,arguments)}function iu(){return(iu=(0,F.Z)(function*(E){const D=Ku(E),L=(yield or()).transaction(Hs,"readwrite");yield L.objectStore(Hs).delete(D),yield L.done})).apply(this,arguments)}function Ku({appConfig:E}){return E.appId}const ar=new ue.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function va(E,D){return hl.apply(this,arguments)}function hl(){return(hl=(0,F.Z)(function*(E,D){const A=yield fl(E),L=Hd(D),q={method:"POST",headers:A,body:JSON.stringify(L)};let X;try{X=yield(yield fetch(su(E.appConfig),q)).json()}catch(ae){throw ar.create("token-subscribe-failed",{errorInfo:ae?.toString()})}if(X.error)throw ar.create("token-subscribe-failed",{errorInfo:X.error.message});if(!X.token)throw ar.create("token-subscribe-no-token");return X.token})).apply(this,arguments)}function $d(){return($d=(0,F.Z)(function*(E,D){const A=yield fl(E),L=Hd(D.subscriptionOptions),q={method:"PATCH",headers:A,body:JSON.stringify(L)};let X;try{X=yield(yield fetch(`${su(E.appConfig)}/${D.token}`,q)).json()}catch(ae){throw ar.create("token-update-failed",{errorInfo:ae?.toString()})}if(X.error)throw ar.create("token-update-failed",{errorInfo:X.error.message});if(!X.token)throw ar.create("token-update-no-token");return X.token})).apply(this,arguments)}function Yu(E,D){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,F.Z)(function*(E,D){const L={method:"DELETE",headers:yield fl(E)};try{const X=yield(yield fetch(`${su(E.appConfig)}/${D}`,L)).json();if(X.error)throw ar.create("token-unsubscribe-failed",{errorInfo:X.error.message})}catch(q){throw ar.create("token-unsubscribe-failed",{errorInfo:q?.toString()})}})).apply(this,arguments)}function su({projectId:E}){return`${Fd}/projects/${E}/registrations`}function fl(E){return ou.apply(this,arguments)}function ou(){return(ou=(0,F.Z)(function*({appConfig:E,installations:D}){const A=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function Hd({p256dh:E,auth:D,endpoint:A,vapidKey:L}){const q={web:{endpoint:A,auth:D,p256dh:E}};return L!==Ld&&(q.web.applicationPubKey=L),q}const Ju=6048e5;function Xu(){return Xu=(0,F.Z)(function*(E){const D=yield function Mf(E,D){return zd.apply(this,arguments)}(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:D.endpoint,auth:Gt(D.getKey("auth")),p256dh:Gt(D.getKey("p256dh"))},L=yield Li(E.firebaseDependencies);if(L){if(function Og(E,D){return D.vapidKey===E.vapidKey&&D.endpoint===E.endpoint&&D.auth===E.auth&&D.p256dh===E.p256dh}(L.subscriptionOptions,A))return Date.now()>=L.createTime+Ju?function Fn(E,D){return ec.apply(this,arguments)}(E,{token:L.token,createTime:Date.now(),subscriptionOptions:A}):L.token;try{yield Yu(E.firebaseDependencies,L.token)}catch(q){console.warn(q)}return xf(E.firebaseDependencies,A)}return xf(E.firebaseDependencies,A)}),Xu.apply(this,arguments)}function zs(){return zs=(0,F.Z)(function*(E){const D=yield Li(E.firebaseDependencies);D&&(yield Yu(E.firebaseDependencies,D.token),yield function jd(E){return iu.apply(this,arguments)}(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()}),zs.apply(this,arguments)}function ec(){return ec=(0,F.Z)(function*(E,D){try{const A=yield function Zu(E,D){return $d.apply(this,arguments)}(E.firebaseDependencies,D),L=Object.assign(Object.assign({},D),{token:A,createTime:Date.now()});return yield Po(E.firebaseDependencies,L),A}catch(A){throw yield function Fr(E){return zs.apply(this,arguments)}(E),A}}),ec.apply(this,arguments)}function xf(E,D){return No.apply(this,arguments)}function No(){return(No=(0,F.Z)(function*(E,D){const L={token:yield va(E,D),createTime:Date.now(),subscriptionOptions:D};return yield Po(E,L),L.token})).apply(this,arguments)}function zd(){return(zd=(0,F.Z)(function*(E,D){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:tu(D)})})).apply(this,arguments)}function tc(E){const D={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function pl(E,D){if(!D.notification)return;E.notification={};const A=D.notification.title;A&&(E.notification.title=A);const L=D.notification.body;L&&(E.notification.body=L);const q=D.notification.image;q&&(E.notification.image=q);const X=D.notification.icon;X&&(E.notification.icon=X)}(D,E),function gl(E,D){D.data&&(E.data=D.data)}(D,E),function Gd(E,D){var A,L,q,X,ae;if(!(D.fcmOptions||null!==(A=D.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const Qe=null!==(q=null===(L=D.fcmOptions)||void 0===L?void 0:L.link)&&void 0!==q?q:null===(X=D.notification)||void 0===X?void 0:X.click_action;Qe&&(E.fcmOptions.link=Qe);const Ze=null===(ae=D.fcmOptions)||void 0===ae?void 0:ae.analytics_label;Ze&&(E.fcmOptions.analyticsLabel=Ze)}(D,E),D}function _a(E,D){const A=[];for(let L=0;L<E.length;L++)A.push(E.charAt(L)),L<D.length&&A.push(D.charAt(L));return A.join("")}function Gs(E){return ar.create("missing-app-config-values",{valueName:E})}_a("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_a("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class kg{constructor(D,A,L){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const q=function wa(E){if(!E||!E.options)throw Gs("App Configuration Object");if(!E.name)throw Gs("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const L of D)if(!A[L])throw Gs(L);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:q,installations:A,analyticsProvider:L}}_delete(){return Promise.resolve()}}function Rf(E){return nc.apply(this,arguments)}function nc(){return(nc=(0,F.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(Bt,{scope:eu}),E.swRegistration.update().catch(()=>{})}catch(D){throw ar.create("failed-service-worker-registration",{browserErrorMessage:D?.message})}})).apply(this,arguments)}function au(){return(au=(0,F.Z)(function*(E,D){if(!D&&!E.swRegistration&&(yield Rf(E)),D||!E.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw ar.create("invalid-sw-registration");E.swRegistration=D}})).apply(this,arguments)}function ko(){return(ko=(0,F.Z)(function*(E,D){D?E.vapidKey=D:E.vapidKey||(E.vapidKey=Ld)})).apply(this,arguments)}function Ea(){return Ea=(0,F.Z)(function*(E,D){if(!navigator)throw ar.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ar.create("permission-blocked");return yield function Oo(E,D){return ko.apply(this,arguments)}(E,D?.vapidKey),yield function jy(E,D){return au.apply(this,arguments)}(E,D?.serviceWorkerRegistration),function Af(E){return Xu.apply(this,arguments)}(E)}),Ea.apply(this,arguments)}function Lo(){return(Lo=(0,F.Z)(function*(E,D,A){const L=function Fo(E){switch(E){case ve.NOTIFICATION_CLICKED:return"notification_open";case ve.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(D);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(L,{message_id:A[zu],message_name:A[Ud],message_time:A[Gu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Uo(){return Uo=(0,F.Z)(function*(E,D){const A=D.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===ve.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(tc(A)):E.onMessageHandler.next(tc(A)));const L=A.data;(function ml(E){return"object"==typeof E&&!!E&&zu in E})(L)&&"1"===L[Rg]&&(yield function yl(E,D,A){return Lo.apply(this,arguments)}(E,A.messageType,L))}),Uo.apply(this,arguments)}const fo="@firebase/messaging",Bo=E=>{const D=new kg(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function ic(E,D){return Uo.apply(this,arguments)}(D,A)),D},sc=E=>{const D=E.getProvider("messaging").getImmediate();return{getToken:L=>function rc(E,D){return Ea.apply(this,arguments)}(D,L)}};function Pf(){return oc.apply(this,arguments)}function oc(){return(oc=(0,F.Z)(function*(){try{yield(0,ue.eu)()}catch{return!1}return typeof window<"u"&&(0,ue.hl)()&&(0,ue.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function uu(){(0,le.Xd)(new ce.wA("messaging",Bo,"PUBLIC")),(0,le.Xd)(new ce.wA("messaging-internal",sc,"PRIVATE")),(0,le.KN)(fo,"0.12.4"),(0,le.KN)(fo,"0.12.4","esm2017")}();const Tn="analytics",Zd="firebase_id",ac="origin",_l=6e4,uc="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cc="https://www.googletagmanager.com/gtag/js",Ir=new Ee.Yd("@firebase/analytics"),tr=new ue.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function wl(E){if(!E.startsWith(cc)){const D=tr.create("invalid-gtag-resource",{gtagURL:E});return Ir.warn(D.message),""}return E}function cu(E){return Promise.all(E.map(D=>D.catch(A=>A)))}function $o(){return($o=(0,F.Z)(function*(E,D,A,L,q,X){const ae=L[q];try{if(ae)yield D[ae];else{const Ze=(yield cu(A)).find(vt=>vt.measurementId===q);Ze&&(yield D[Ze.appId])}}catch(Qe){Ir.error(Qe)}E("config",q,X)})).apply(this,arguments)}function du(){return(du=(0,F.Z)(function*(E,D,A,L,q){try{let X=[];if(q&&q.send_to){let ae=q.send_to;Array.isArray(ae)||(ae=[ae]);const Qe=yield cu(A);for(const Ze of ae){const vt=Qe.find(Ut=>Ut.measurementId===Ze),Ft=vt&&D[vt.appId];if(!Ft){X=[];break}X.push(Ft)}}0===X.length&&(X=Object.values(D)),yield Promise.all(X),E("event",L,q||{})}catch(X){Ir.error(X)}})).apply(this,arguments)}const hu=30,zo=new class Ho{constructor(D={},A=1e3){this.throttleMetadata=D,this.intervalMillis=A}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,A){this.throttleMetadata[D]=A}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function kf(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function cn(){return(cn=(0,F.Z)(function*(E){var D;const{appId:A,apiKey:L}=E,q={method:"GET",headers:kf(L)},X=uc.replace("{app-id}",A),ae=yield fetch(X,q);if(200!==ae.status&&304!==ae.status){let Qe="";try{const Ze=yield ae.json();null!==(D=Ze.error)&&void 0!==D&&D.message&&(Qe=Ze.error.message)}catch{}throw tr.create("config-fetch-failed",{httpStatus:ae.status,responseMessage:Qe})}return ae.json()})).apply(this,arguments)}function fu(){return(fu=(0,F.Z)(function*(E,D=zo,A){const{appId:L,apiKey:q,measurementId:X}=E.options;if(!L)throw tr.create("no-app-id");if(!q){if(X)return{measurementId:X,appId:L};throw tr.create("no-api-key")}const ae=D.getThrottleMetadata(L)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Qe=new Hy;return setTimeout((0,F.Z)(function*(){Qe.abort()}),void 0!==A?A:_l),Il({appId:L,apiKey:q,measurementId:X},ae,Qe,D)})).apply(this,arguments)}function Il(E,D,A){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,F.Z)(function*(E,{throttleEndTimeMillis:D,backoffCount:A},L,q=zo){var X;const{appId:ae,measurementId:Qe}=E;try{yield function $y(E,D){return new Promise((A,L)=>{const q=Math.max(D-Date.now(),0),X=setTimeout(A,q);E.addEventListener(()=>{clearTimeout(X),L(tr.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(L,D)}catch(Ze){if(Qe)return Ir.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:ae,measurementId:Qe};throw Ze}try{const Ze=yield function Yd(E){return cn.apply(this,arguments)}(E);return q.deleteThrottleMetadata(ae),Ze}catch(Ze){const vt=Ze;if(!function Lf(E){if(!(E instanceof ue.ZR&&E.customData))return!1;const D=Number(E.customData.httpStatus);return 429===D||500===D||503===D||504===D}(vt)){if(q.deleteThrottleMetadata(ae),Qe)return Ir.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Qe} provided in the "measurementId" field in the local Firebase config. [${vt?.message}]`),{appId:ae,measurementId:Qe};throw Ze}const Ft=503===Number(null===(X=vt?.customData)||void 0===X?void 0:X.httpStatus)?(0,ue.$s)(A,q.intervalMillis,hu):(0,ue.$s)(A,q.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+Ft,backoffCount:A+1};return q.setThrottleMetadata(ae,Ut),Ir.debug(`Calling attemptFetch again in ${Ft} millis`),Il(E,Ut,L,q)}}),Dl.apply(this,arguments)}class Hy{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}let Go,Bf;function Ff(){return(Ff=(0,F.Z)(function*(E,D,A,L,q){if(q&&q.global)E("event",A,L);else{const X=yield D;E("event",A,Object.assign(Object.assign({},L),{send_to:X}))}})).apply(this,arguments)}function Dn(){return(Dn=(0,F.Z)(function*(){if(!(0,ue.hl)())return Ir.warn(tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ue.eu)()}catch(E){return Ir.warn(tr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function yt(){return yt=(0,F.Z)(function*(E,D,A,L,q,X,ae){var Qe;const Ze=function Lg(E){return fu.apply(this,arguments)}(E);Ze.then(Sn=>{A[Sn.measurementId]=Sn.appId,E.options.measurementId&&Sn.measurementId!==E.options.measurementId&&Ir.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Sn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Sn=>Ir.error(Sn)),D.push(Ze);const vt=function pi(){return Dn.apply(this,arguments)}().then(Sn=>{if(Sn)return L.getId()}),[Ft,Ut]=yield Promise.all([Ze,vt]);(function Ca(E){const D=window.document.getElementsByTagName("script");for(const A of Object.values(D))if(A.src&&A.src.includes(cc)&&A.src.includes(E))return A;return null})(X)||function qs(E,D){const A=function lu(E,D){let A;return window.trustedTypes&&(A=window.trustedTypes.createPolicy(E,D)),A}("firebase-js-sdk-policy",{createScriptURL:wl}),L=document.createElement("script"),q=`${cc}?l=${E}&id=${D}`;L.src=A?A?.createScriptURL(q):q,L.async=!0,document.head.appendChild(L)}(X,Ft.measurementId),Bf&&(q("consent","default",Bf),function Cl(E){Bf=E}(void 0)),q("js",new Date);const ei=null!==(Qe=ae?.config)&&void 0!==Qe?Qe:{};return ei[ac]="firebase",ei.update=!0,null!=Ut&&(ei[Zd]=Ut),q("config",Ft.measurementId,ei),Go&&(q("set",Go),function pc(E){Go=E}(void 0)),Ft.measurementId}),yt.apply(this,arguments)}class Qr{constructor(D){this.app=D}_delete(){return delete Hn[this.app.options.appId],Promise.resolve()}}let Hn={},Qd=[];const gu={};let Tl,Vi,Bi="dataLayer",gc="gtag",Ta=!1;function go(E,D,A){!function mu(){const E=[];if((0,ue.ru)()&&E.push("This is a browser extension environment."),(0,ue.zI)()||E.push("Cookies are not available."),E.length>0){const D=E.map((L,q)=>`(${q+1}) ${L}`).join(" "),A=tr.create("invalid-analytics-context",{errorInfo:D});Ir.warn(A.message)}}();const L=E.options.appId;if(!L)throw tr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw tr.create("no-api-key");Ir.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Hn[L])throw tr.create("already-exists",{id:L});if(!Ta){!function Nf(E){let D=[];Array.isArray(window[E])?D=window[E]:window[E]=D}(Bi);const{wrappedGtag:X,gtagCore:ae}=function po(E,D,A,L,q){let X=function(...ae){window[L].push(arguments)};return window[q]&&"function"==typeof window[q]&&(X=window[q]),window[q]=function ba(E,D,A,L){function X(){return X=(0,F.Z)(function*(ae,...Qe){try{if("event"===ae){const[Ze,vt]=Qe;yield function El(E,D,A,L,q){return du.apply(this,arguments)}(E,D,A,Ze,vt)}else if("config"===ae){const[Ze,vt]=Qe;yield function lc(E,D,A,L,q,X){return $o.apply(this,arguments)}(E,D,A,L,Ze,vt)}else if("consent"===ae){const[Ze]=Qe;E("consent","update",Ze)}else if("get"===ae){const[Ze,vt,Ft]=Qe;E("get",Ze,vt,Ft)}else if("set"===ae){const[Ze]=Qe;E("set",Ze)}else E(ae,...Qe)}catch(Ze){Ir.error(Ze)}}),X.apply(this,arguments)}return function q(ae){return X.apply(this,arguments)}}(X,E,D,A),{gtagCore:X,wrappedGtag:window[q]}}(Hn,Qd,gu,Bi,gc);Vi=X,Tl=ae,Ta=!0}return Hn[L]=function Ui(E,D,A,L,q,X,ae){return yt.apply(this,arguments)}(E,Qd,gu,D,Tl,Bi,A),new Qr(E)}function yc(){return qo.apply(this,arguments)}function qo(){return(qo=(0,F.Z)(function*(){if((0,ue.ru)()||!(0,ue.zI)()||!(0,ue.hl)())return!1;try{return yield(0,ue.eu)()}catch{return!1}})).apply(this,arguments)}const yu="@firebase/analytics";!function Vf(){(0,le.Xd)(new ce.wA(Tn,(D,{options:A})=>go(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,le.Xd)(new ce.wA("analytics-internal",function E(D){try{const A=D.getProvider(Tn).getImmediate();return{logEvent:(L,q,X)=>function Jd(E,D,A,L){E=(0,ue.m9)(E),function zy(E,D,A,L,q){return Ff.apply(this,arguments)}(Vi,Hn[E.app.options.appId],D,A,L).catch(q=>Ir.error(q))}(A,L,q,X)}}catch(A){throw tr.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,le.KN)(yu,"0.10.0"),(0,le.KN)(yu,"0.10.0","esm2017")}();var vu=U(4408),ls=U(7565);const Xr=new class wu extends ls.v{}(class _u extends vu.o{constructor(D,A){super(D,A),this.scheduler=D,this.work=A}schedule(D,A=0){return A>0?super.schedule(D,A):(this.delay=A,this.state=D,this.scheduler.flush(this),this)}execute(D,A){return A>0||this.closed?super.execute(D,A):this._execute(D,A)}requestAsyncId(D,A,L=0){return null!=L&&L>0||null==L&&this.delay>0?super.requestAsyncId(D,A,L):(D.flush(this),0)}});var Rl=U(4986),ur=U(8505),Qo=U(9468),Jo=U(5363);const gi=new y.GfV("7.6.1"),nr="__angularfire_symbol__analyticsIsSupportedValue",Xo="__angularfire_symbol__analyticsIsSupported",Pl="__angularfire_symbol__remoteConfigIsSupportedValue",Sa="__angularfire_symbol__remoteConfigIsSupported",ds="__angularfire_symbol__messagingIsSupportedValue",As="__angularfire_symbol__messagingIsSupported";function Ec(E,D,A){if(D){if(1===D.length)return D[0];const X=D.filter(ae=>ae.app===A);if(1===X.length)return X[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[Xo]||(globalThis[Xo]=yc().then(E=>globalThis[nr]=E).catch(()=>globalThis[nr]=!1)),globalThis[As]||(globalThis[As]=Pf().then(E=>globalThis[ds]=E).catch(()=>globalThis[ds]=!1)),globalThis[Sa]||(globalThis[Sa]=ma().then(E=>globalThis[Pl]=E).catch(()=>globalThis[Pl]=!1));const Ic=(E,D)=>{const A=D?[D]:(0,te.C6)(),L=[];return A.forEach(q=>{q.container.getProvider(E).instances.forEach(ae=>{L.includes(ae)||L.push(ae)})}),L};function Ks(){}class Nl{constructor(D,A=Xr){this.zone=D,this.delegate=A}now(){return this.delegate.now()}schedule(D,A,L){const q=this.zone;return this.delegate.schedule(function(ae){q.runGuarded(()=>{D.apply(this,[ae])})},A,L)}}class Dc{constructor(D){this.zone=D,this.task=null}call(D,A){const L=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ks,{},Ks,Ks)),A.pipe((0,ur.b)({next:L,complete:L,error:L})).subscribe(D).add(L)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Mt=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Nl(Zone.current)),this.insideAngular=A.run(()=>new Nl(Zone.current,Rl.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(y.LFG(y.R0b))},E.\u0275prov=y.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function hs(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function fs(E){return hs(),function th(E){return function(A){return(A=A.lift(new Dc(E.ngZone))).pipe((0,Qo.R)(E.outsideAngular),(0,Jo.Q)(E.insideAngular))}}(hs())(E)}},2090:(bt,Ne,U)=>{U.d(Ne,{$s:()=>Ni,BH:()=>Se,G6:()=>Ji,L:()=>ye,LL:()=>Ae,Pz:()=>Te,Sg:()=>Ke,UG:()=>oe,US:()=>ce,ZB:()=>Q,ZR:()=>xe,aH:()=>Ve,b$:()=>Xt,eu:()=>me,hl:()=>he,jU:()=>Pt,m9:()=>Gr,ne:()=>hn,pd:()=>Xi,r3:()=>Vn,ru:()=>it,tV:()=>G,uI:()=>ct,vZ:()=>wt,w1:()=>Os,xO:()=>Ar,xb:()=>ui,z$:()=>Le,zI:()=>we,zd:()=>zr});const le=function(j){const V=[];let Y=0;for(let Ie=0;Ie<j.length;Ie++){let ne=j.charCodeAt(Ie);ne<128?V[Y++]=ne:ne<2048?(V[Y++]=ne>>6|192,V[Y++]=63&ne|128):55296==(64512&ne)&&Ie+1<j.length&&56320==(64512&j.charCodeAt(Ie+1))?(ne=65536+((1023&ne)<<10)+(1023&j.charCodeAt(++Ie)),V[Y++]=ne>>18|240,V[Y++]=ne>>12&63|128,V[Y++]=ne>>6&63|128,V[Y++]=63&ne|128):(V[Y++]=ne>>12|224,V[Y++]=ne>>6&63|128,V[Y++]=63&ne|128)}return V},ce={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,V){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Y=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ne=0;ne<j.length;ne+=3){const He=j[ne],Nt=ne+1<j.length,on=Nt?j[ne+1]:0,kn=ne+2<j.length,An=kn?j[ne+2]:0;let yr=(15&on)<<2|An>>6,Wr=63&An;kn||(Wr=64,Nt||(yr=64)),Ie.push(Y[He>>2],Y[(3&He)<<4|on>>4],Y[yr],Y[Wr])}return Ie.join("")},encodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(j):this.encodeByteArray(le(j),V)},decodeString(j,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(j):function(j){const V=[];let Y=0,Ie=0;for(;Y<j.length;){const ne=j[Y++];if(ne<128)V[Ie++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const He=j[Y++];V[Ie++]=String.fromCharCode((31&ne)<<6|63&He)}else if(ne>239&&ne<365){const kn=((7&ne)<<18|(63&j[Y++])<<12|(63&j[Y++])<<6|63&j[Y++])-65536;V[Ie++]=String.fromCharCode(55296+(kn>>10)),V[Ie++]=String.fromCharCode(56320+(1023&kn))}else{const He=j[Y++],Nt=j[Y++];V[Ie++]=String.fromCharCode((15&ne)<<12|(63&He)<<6|63&Nt)}}return V.join("")}(this.decodeStringToByteArray(j,V))},decodeStringToByteArray(j,V){this.init_();const Y=V?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ne=0;ne<j.length;){const He=Y[j.charAt(ne++)],on=ne<j.length?Y[j.charAt(ne)]:0;++ne;const An=ne<j.length?Y[j.charAt(ne)]:64;++ne;const tn=ne<j.length?Y[j.charAt(ne)]:64;if(++ne,null==He||null==on||null==An||null==tn)throw new Ee;Ie.push(He<<2|on>>4),64!==An&&(Ie.push(on<<4&240|An>>2),64!==tn&&Ie.push(An<<6&192|tn))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ye=function(j){return function(j){const V=le(j);return ce.encodeByteArray(V,!0)}(j).replace(/\./g,"")},G=function(j){try{return ce.decodeString(j,!0)}catch(V){console.error("base64Decode failed: ",V)}return null};function Q(j,V){if(!(V instanceof Object))return V;switch(V.constructor){case Date:return new Date(V.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return V}for(const Y in V)!V.hasOwnProperty(Y)||!We(Y)||(j[Y]=Q(j[Y],V[Y]));return j}function We(j){return"__proto__"!==j}const Oe=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=j&&G(j[1]);return V&&JSON.parse(V)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},Ve=()=>{var j;return null===(j=Oe())||void 0===j?void 0:j.config},Te=j=>{var V;return null===(V=Oe())||void 0===V?void 0:V[`_${j}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,Y)=>{this.resolve=V,this.reject=Y})}wrapCallback(V){return(Y,Ie)=>{Y?this.reject(Y):this.resolve(Ie),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(Y):V(Y,Ie))}}}function Ke(j,V){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=V||"demo-project",ne=j.iat||0,He=j.sub||j.user_id;if(!He)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Nt=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ne,exp:ne+3600,auth_time:ne,sub:He,user_id:He,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ye(JSON.stringify({alg:"none",type:"JWT"})),ye(JSON.stringify(Nt)),""].join(".")}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ct(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function oe(){var j;const V=null===(j=Oe())||void 0===j?void 0:j.forceEnvironment;if("node"===V)return!0;if("browser"===V)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Pt(){return"object"==typeof self&&self.self===self}function it(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Xt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Os(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function Ji(){return!oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function he(){try{return"object"==typeof indexedDB}catch{return!1}}function me(){return new Promise((j,V)=>{try{let Y=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Ie);ne.onsuccess=()=>{ne.result.close(),Y||self.indexedDB.deleteDatabase(Ie),j(!0)},ne.onupgradeneeded=()=>{Y=!1},ne.onerror=()=>{var He;V((null===(He=ne.error)||void 0===He?void 0:He.message)||"")}}catch(Y){V(Y)}})}function we(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xe extends Error{constructor(V,Y,Ie){super(Y),this.code=V,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ae.prototype.create)}}class Ae{constructor(V,Y,Ie){this.service=V,this.serviceName=Y,this.errors=Ie}create(V,...Y){const Ie=Y[0]||{},ne=`${this.service}/${V}`,He=this.errors[V],Nt=He?function pt(j,V){return j.replace(gt,(Y,Ie)=>{const ne=V[Ie];return null!=ne?String(ne):`<${Ie}?>`})}(He,Ie):"Error";return new xe(ne,`${this.serviceName}: ${Nt} (${ne}).`,Ie)}}const gt=/\{\$([^}]+)}/g;function Vn(j,V){return Object.prototype.hasOwnProperty.call(j,V)}function ui(j){for(const V in j)if(Object.prototype.hasOwnProperty.call(j,V))return!1;return!0}function wt(j,V){if(j===V)return!0;const Y=Object.keys(j),Ie=Object.keys(V);for(const ne of Y){if(!Ie.includes(ne))return!1;const He=j[ne],Nt=V[ne];if(Lr(He)&&Lr(Nt)){if(!wt(He,Nt))return!1}else if(He!==Nt)return!1}for(const ne of Ie)if(!Y.includes(ne))return!1;return!0}function Lr(j){return null!==j&&"object"==typeof j}function Ar(j){const V=[];for(const[Y,Ie]of Object.entries(j))Array.isArray(Ie)?Ie.forEach(ne=>{V.push(encodeURIComponent(Y)+"="+encodeURIComponent(ne))}):V.push(encodeURIComponent(Y)+"="+encodeURIComponent(Ie));return V.length?"&"+V.join("&"):""}function zr(j){const V={};return j.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ne,He]=Ie.split("=");V[decodeURIComponent(ne)]=decodeURIComponent(He)}}),V}function Xi(j){const V=j.indexOf("?");if(!V)return"";const Y=j.indexOf("#",V);return j.substring(V,Y>0?Y:void 0)}function hn(j,V){const Y=new at(j,V);return Y.subscribe.bind(Y)}class at{constructor(V,Y){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Y,this.task.then(()=>{V(this)}).catch(Ie=>{this.error(Ie)})}next(V){this.forEachObserver(Y=>{Y.next(V)})}error(V){this.forEachObserver(Y=>{Y.error(V)}),this.close(V)}complete(){this.forEachObserver(V=>{V.complete()}),this.close()}subscribe(V,Y,Ie){let ne;if(void 0===V&&void 0===Y&&void 0===Ie)throw new Error("Missing Observer.");ne=function ci(j,V){if("object"!=typeof j||null===j)return!1;for(const Y of V)if(Y in j&&"function"==typeof j[Y])return!0;return!1}(V,["next","error","complete"])?V:{next:V,error:Y,complete:Ie},void 0===ne.next&&(ne.next=xr),void 0===ne.error&&(ne.error=xr),void 0===ne.complete&&(ne.complete=xr);const He=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),He}unsubscribeOne(V){void 0===this.observers||void 0===this.observers[V]||(delete this.observers[V],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(V){if(!this.finalized)for(let Y=0;Y<this.observers.length;Y++)this.sendOne(Y,V)}sendOne(V,Y){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[V])try{Y(this.observers[V])}catch(Ie){typeof console<"u"&&console.error&&console.error(Ie)}})}close(V){this.finalized||(this.finalized=!0,void 0!==V&&(this.finalError=V),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function xr(){}const dn=1e3,di=2,On=144e5,Kn=.5;function Ni(j,V=dn,Y=di){const Ie=V*Math.pow(Y,j),ne=Math.round(Kn*Ie*(Math.random()-.5)*2);return Math.min(On,Ie+ne)}function Gr(j){return j&&j._delegate?j._delegate:j}},9601:(bt,Ne,U)=>{var y=U(4650);let te=null;function F(){return te}class ue{}const ce=new y.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Ce(){return(0,y.LFG)(G)}()},providedIn:"platform"}),n})();const ye=new y.OlP("Location Initialized");let G=(()=>{class n extends Ee{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){W()?this._history.pushState(t,r,s):this._location.hash=s}replaceState(t,r,s){W()?this._history.replaceState(t,r,s):this._location.hash=s}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ce))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Q(){return new G((0,y.LFG)(ce))}()},providedIn:"platform"}),n})();function W(){return!!window.history.pushState}function We(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Me(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Je(n){return n&&"?"!==n[0]?"?"+n:n}let ht=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(Oe)},providedIn:"root"}),n})();const _e=new y.OlP("appBaseHref");let Oe=(()=>{class n extends ht{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return We(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Je(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,u){const l=this.prepareExternalUrl(s+Je(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){const l=this.prepareExternalUrl(s+Je(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ee),y.LFG(_e,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ue=(()=>{class n extends ht{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=We(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,u){let l=this.prepareExternalUrl(s+Je(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,s,u){let l=this.prepareExternalUrl(s+Je(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ee),y.LFG(_e,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),qe=(()=>{class n{constructor(t){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Ke(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Me(Se(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Je(r))}normalize(t){return n.stripTrailingSlash(function Te(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Se(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Je(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return n.normalizeQueryParams=Je,n.joinWithSlash=We,n.stripTrailingSlash=Me,n.\u0275fac=function(t){return new(t||n)(y.LFG(ht))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Ve(){return new qe((0,y.LFG)(ht))}()},providedIn:"root"}),n})();function Se(n){return n.replace(/\/index.html$/,"")}function ts(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[s,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(s.trim()===e)return decodeURIComponent(u)}return null}let ws=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Ht,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Ao("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Ao("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.s_b),y.Y36(y.Rgc))},n.\u0275dir=y.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Ht{constructor(){this.$implicit=null,this.ngIf=null}}function Ao(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,y.AaK)(e)}'.`)}let Es=(()=>{class n{constructor(t,r,s){this._ngEl=t,this._differs=r,this._renderer=s,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,r){const[s,u]=t.split("."),l=-1===s.indexOf("-")?void 0:y.JOm.DashCase;null!=r?this._renderer.setStyle(this._ngEl.nativeElement,s,u?`${r}${u}`:r,l):this._renderer.removeStyle(this._ngEl.nativeElement,s,l)}_applyChanges(t){t.forEachRemovedItem(r=>this._setStyle(r.key,null)),t.forEachAddedItem(r=>this._setStyle(r.key,r.currentValue)),t.forEachChangedItem(r=>this._setStyle(r.key,r.currentValue))}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.SBq),y.Y36(y.aQg),y.Y36(y.Qsj))},n.\u0275dir=y.lG2({type:n,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),n})(),Si=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();const Hu="server";function Oi(n){return n===Hu}let $s=(()=>{class n{}return n.\u0275prov=(0,y.Yz7)({token:n,providedIn:"root",factory:()=>new Ja((0,y.LFG)(ce),window)}),n})();class Ja{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function bs(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let s=r.currentNode;for(;s;){const u=s.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}s=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,s=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],s-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Xa(this.window.history)||Xa(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Xa(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ho{}class Gd extends ue{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ml extends Gd{static makeCurrent(){!function le(n){te||(te=n)}(new ml)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function wa(){return _a=_a||document.querySelector("base"),_a?_a.getAttribute("href"):null}();return null==t?null:function kg(n){Gs=Gs||document.createElement("a"),Gs.setAttribute("href",n);const e=Gs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){_a=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ts(document.cookie,e)}}let Gs,_a=null;const Rf=new y.OlP("TRANSITION_ID"),jy=[{provide:y.ip1,useFactory:function nc(n,e,t){return()=>{t.get(y.CZH).donePromise.then(()=>{const r=F(),s=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<s.length;u++)r.remove(s[u])})}},deps:[Rf,ce,y.zs3],multi:!0}];let Oo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const ko=new y.OlP("EventManagerPlugins");let rc=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}addGlobalEventListener(t,r,s){return this._findPluginFor(r).addGlobalEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const s=this._plugins;for(let u=0;u<s.length;u++){const l=s[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ko),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class Ea{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const s=F().getGlobalEventTarget(this._doc,e);if(!s)throw new Error(`Unsupported event target ${s} for event ${t}`);return this.addEventListener(s,t,r)}}let yl=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const s=this.usageCount;let u=s.get(t)??0;return u+=r,u>0?s.set(t,u):s.delete(t),u}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Lo=(()=>{class n extends yl{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(u=>u.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const s=this.doc.createElement("style");s.textContent=r,t.appendChild(s);const u=this.styleRef.get(r);u?u.push(s):this.styleRef.set(r,[s])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ce))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const Fo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ic=/%COMP%/g,uu=new y.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function qd(n,e){return e.flat(100).map(t=>t.replace(ic,n))}function Vo(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let us=(()=>{class n{constructor(t,r,s,u){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestory=u,this.rendererByCompId=new Map,this.defaultRenderer=new Ws(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const s=this.getOrCreateRenderer(t,r);return s instanceof Zd?s.applyToHost(t):s instanceof Tn&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let u=s.get(r.id);if(!u){const l=this.eventManager,g=this.sharedStylesHost,w=this.removeStylesOnCompDestory;switch(r.encapsulation){case y.ifc.Emulated:u=new Zd(l,g,r,this.appId,w);break;case y.ifc.ShadowDom:return new Kd(l,g,t,r);default:u=new Tn(l,g,r,w)}u.onDestroy=()=>s.delete(r.id),s.set(r.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(rc),y.LFG(Lo),y.LFG(y.AFp),y.LFG(uu))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class Ws{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Fo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Da(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Da(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,s){if(s){t=s+":"+t;const u=Fo[s];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const s=Fo[r];s?e.removeAttributeNS(s,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,s){s&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(t,r,s&y.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&y.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Vo(r)):this.eventManager.addEventListener(e,t,Vo(r))}}function Da(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Kd extends Ws{constructor(e,t,r,s){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=qd(s.id,s.styles);for(const l of u){const g=document.createElement("style");g.textContent=l,this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Tn extends Ws{constructor(e,t,r,s,u=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=s,this.rendererUsageCount=0,this.styles=qd(u,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Zd extends Tn{constructor(e,t,r,s,u){const l=s+"-"+r.id;super(e,t,r,u,l),this.contentAttr=function Pf(n){return"_ngcontent-%COMP%".replace(ic,n)}(l),this.hostAttr=function oc(n){return"_nghost-%COMP%".replace(ic,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let ac=(()=>{class n extends Ea{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ce))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const _l=["alt","control","meta","shift"],uc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},cc={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ir=(()=>{class n extends Ea{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,s){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const u=n._normalizeKey(r.pop());let l="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),l="code."),_l.forEach(C=>{const S=r.indexOf(C);S>-1&&(r.splice(S,1),l+=C+".")}),l+=u,0!=r.length||0===u.length)return null;const w={};return w.domEventName=s,w.fullKey=l,w}static matchEventFullKeyCode(t,r){let s=uc[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(s=t.code,u="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),_l.forEach(l=>{l!==s&&(0,cc[l])(t)&&(u+=l+".")}),u+=s,u===r)}static eventCallback(t,r,s){return u=>{n.matchEventFullKeyCode(u,t)&&s.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ce))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const El=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:"browser"},{provide:y.g9A,useValue:function qs(){ml.makeCurrent()},multi:!0},{provide:ce,useFactory:function lc(){return(0,y.RDi)(document),document},deps:[]}]),du=new y.OlP(""),ba=[{provide:y.rWj,useClass:class au{addToWindow(e){y.dqk.getAngularTestability=(r,s=!0)=>{const u=e.findTestabilityInTree(r,s);if(null==u)throw new Error("Could not find testability for element.");return u},y.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(r=>{const s=y.dqk.getAllAngularTestabilities();let u=s.length,l=!1;const g=function(w){l=l||w,u--,0==u&&r(l)};s.forEach(function(w){w.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],po=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Nf(){return new y.qLn},deps:[]},{provide:ko,useClass:ac,multi:!0,deps:[ce,y.R0b,y.Lbi]},{provide:ko,useClass:Ir,multi:!0,deps:[ce]},{provide:us,useClass:us,deps:[rc,Lo,y.AFp,uu]},{provide:y.FYo,useExisting:us},{provide:yl,useExisting:Lo},{provide:Lo,useClass:Lo,deps:[ce]},{provide:rc,useClass:rc,deps:[ko,y.R0b]},{provide:ho,useClass:Oo,deps:[]},[]];let Ca=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:y.AFp,useValue:t.appId},{provide:Rf,useExisting:y.AFp},jy]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(du,12))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[...po,...ba],imports:[Si,y.hGG]}),n})(),kf=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ce))},n.\u0275prov=y.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function zo(){return new kf((0,y.LFG)(ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Dn=U(8996),Ui=U(7669);function yt(...n){const e=(0,Ui.yG)(n);return(0,Dn.D)(n,e)}var Qr=U(7579);class Hn extends Qr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const gu=(0,U(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Bi=U(9751);const{isArray:gc}=Array,{getPrototypeOf:Tl,prototype:Vi,keys:Ta}=Object;var go=U(4671),Tt=U(4004);const{isArray:Sl}=Array;var Jr=U(5403),Al=U(9672);function xl(...n){const e=(0,Ui.yG)(n),t=(0,Ui.jO)(n),{args:r,keys:s}=function mc(n){if(1===n.length){const e=n[0];if(gc(e))return{args:e,keys:null};if(function mu(n){return n&&"object"==typeof n&&Tl(n)===Vi}(e)){const t=Ta(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,Dn.D)([],e);const u=new Bi.y(function Zo(n,e,t=go.y){return r=>{Yo(e,()=>{const{length:s}=n,u=new Array(s);let l=s,g=s;for(let w=0;w<s;w++)Yo(e,()=>{const C=(0,Dn.D)(n[w],e);let S=!1;C.subscribe((0,Jr.x)(r,O=>{u[w]=O,S||(S=!0,g--),g||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,s?l=>function Ko(n,e){return n.reduce((t,r,s)=>(t[r]=e[s],t),{})}(s,l):go.y));return t?u.pipe(function qo(n){return(0,Tt.U)(e=>function yc(n,e){return Sl(e)?n(...e):n(e)}(n,e))}(t)):u}function Yo(n,e,t){n?(0,Al.f)(t,n,e):e()}var vc=U(8189);function _c(...n){return function Jd(){return(0,vc.J)(1)}()((0,Dn.D)(n,(0,Ui.yG)(n)))}var yu=U(8421);function Xd(n){return new Bi.y(e=>{(0,yu.Xf)(n()).subscribe(e)})}var Vf=U(9635),vu=U(576);function _u(n,e){const t=(0,vu.m)(n)?n:()=>n,r=s=>s.error(t());return new Bi.y(e?s=>e.schedule(r,0,s):r)}var ls=U(515),wu=U(727),Xr=U(4482);function Ml(){return(0,Xr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Jr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const s=n._connection,u=t;t=null,s&&(!u||s===u)&&s.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Rl extends Bi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Xr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new wu.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Jr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=wu.w0.EMPTY)}return e}refCount(){return Ml()(this)}}function ur(n,e){return(0,Xr.e)((t,r)=>{let s=null,u=0,l=!1;const g=()=>l&&!s&&r.complete();t.subscribe((0,Jr.x)(r,w=>{s?.unsubscribe();let C=0;const S=u++;(0,yu.Xf)(n(w,S)).subscribe(s=(0,Jr.x)(r,O=>r.next(e?e(w,O,S,C++):O),()=>{s=null,g()}))},()=>{l=!0,g()}))})}function Qo(n){return n<=0?()=>ls.E:(0,Xr.e)((e,t)=>{let r=0;e.subscribe((0,Jr.x)(t,s=>{++r<=n&&(t.next(s),n<=r&&t.complete())}))})}function Jo(...n){const e=(0,Ui.yG)(n);return(0,Xr.e)((t,r)=>{(e?_c(n,t,e):_c(n,t)).subscribe(r)})}function gi(n,e){return(0,Xr.e)((t,r)=>{let s=0;t.subscribe((0,Jr.x)(r,u=>n.call(e,u,s++)&&r.next(u)))})}var nr=U(5577);function Xo(n){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,Jr.x)(t,s=>{r=!0,t.next(s)},()=>{r||t.next(n),t.complete()}))})}function Pl(n=Sa){return(0,Xr.e)((e,t)=>{let r=!1;e.subscribe((0,Jr.x)(t,s=>{r=!0,t.next(s)},()=>r?t.complete():t.error(n())))})}function Sa(){return new gu}function ds(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gi((s,u)=>n(s,u,r)):go.y,Qo(1),t?Xo(e):Pl(()=>new gu))}function As(n,e){return(0,vu.m)(e)?(0,nr.z)(n,e,1):(0,nr.z)(n,1)}var Pr=U(8505);function ea(n){return(0,Xr.e)((e,t)=>{let u,r=null,s=!1;r=e.subscribe((0,Jr.x)(t,void 0,void 0,l=>{u=(0,yu.Xf)(n(l,ea(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):s=!0})),s&&(r.unsubscribe(),r=null,u.subscribe(t))})}function wc(n,e){return(0,Xr.e)(function jf(n,e,t,r,s){return(u,l)=>{let g=t,w=e,C=0;u.subscribe((0,Jr.x)(l,S=>{const O=C++;w=g?n(w,S,O):(g=!0,S),r&&l.next(w)},s&&(()=>{g&&l.next(w),l.complete()})))}}(n,e,arguments.length>=2,!0))}function Ec(n){return n<=0?()=>ls.E:(0,Xr.e)((e,t)=>{let r=[];e.subscribe((0,Jr.x)(t,s=>{r.push(s),n<r.length&&r.shift()},()=>{for(const s of r)t.next(s);t.complete()},void 0,()=>{r=null}))})}function Ic(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gi((s,u)=>n(s,u,r)):go.y,Ec(1),t?Xo(e):Pl(()=>new gu))}function Dc(n){return(0,Xr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Mt="primary",hs=Symbol("RouteTitle");class bc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ji(n){return new bc(n)}function $f(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const s={};for(let u=0;u<r.length;u++){const l=r[u],g=n[u];if(l.startsWith(":"))s[l.substring(1)]=g;else if(l!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:s}}function fs(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let s;for(let u=0;u<t.length;u++)if(s=t[u],!th(n[s],e[s]))return!1;return!0}function th(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((s,u)=>r[u]===s)}return n===e}function nh(n){return Array.prototype.concat.apply([],n)}function rh(n){return n.length>0?n[n.length-1]:null}function D(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function A(n){return(0,y.CqO)(n)?n:(0,y.QGY)(n)?(0,Dn.D)(Promise.resolve(n)):yt(n)}const L=!1,q={exact:function Ze(n,e,t){if(!Nr(n.segments,e.segments)||!ei(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Ze(n.children[r],e.children[r],t))return!1;return!0},subset:Ft},X={exact:function Qe(n,e){return fs(n,e)},subset:function vt(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>th(n[t],e[t]))},ignored:()=>!0};function ae(n,e,t){return q[t.paths](n.root,e.root,t.matrixParams)&&X[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Ft(n,e,t){return Ut(n,e,e.segments,t)}function Ut(n,e,t,r){if(n.segments.length>t.length){const s=n.segments.slice(0,t.length);return!(!Nr(s,t)||e.hasChildren()||!ei(s,t,r))}if(n.segments.length===t.length){if(!Nr(n.segments,t)||!ei(n.segments,t,r))return!1;for(const s in e.children)if(!n.children[s]||!Ft(n.children[s],e.children[s],r))return!1;return!0}{const s=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Nr(n.segments,s)&&ei(n.segments,s,r)&&n.children[Mt])&&Ut(n.children[Mt],e,u,r)}}function ei(n,e,t){return e.every((r,s)=>X[t](n[s].parameters,r.parameters))}class Sn{constructor(e=new $t([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return kl.serialize(this)}}class $t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,D(t,(r,s)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Hf(this)}}class mo{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ji(this.parameters)),this._parameterMap}toString(){return Fg(this)}}function Nr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let yo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return new Ol},providedIn:"root"}),n})();class Ol{parse(e){const t=new Fl(e);return new Sn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Eu(e.root,!0)}`,r=function Gy(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(s=>`${na(t)}=${na(s)}`).join("&"):`${na(t)}=${na(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function zf(n){return encodeURI(n)}(e.fragment)}`:""}`}}const kl=new Ol;function Hf(n){return n.segments.map(e=>Fg(e)).join("/")}function Eu(n,e){if(!n.hasChildren())return Hf(n);if(e){const t=n.children[Mt]?Eu(n.children[Mt],!1):"",r=[];return D(n.children,(s,u)=>{u!==Mt&&r.push(`${u}:${Eu(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function ps(n,e){let t=[];return D(n.children,(r,s)=>{s===Mt&&(t=t.concat(e(r,s)))}),D(n.children,(r,s)=>{s!==Mt&&(t=t.concat(e(r,s)))}),t}(n,(r,s)=>s===Mt?[Eu(n.children[Mt],!1)]:[`${s}:${Eu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Mt]?`${Hf(n)}/${t[0]}`:`${Hf(n)}/(${t.join("//")})`}}function Ll(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function na(n){return Ll(n).replace(/%3B/gi,";")}function ra(n){return Ll(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cc(n){return decodeURIComponent(n)}function Gf(n){return Cc(n.replace(/\+/g,"%20"))}function Fg(n){return`${ra(n.path)}${function Wf(n){return Object.keys(n).map(e=>`;${ra(e)}=${ra(n[e])}`).join("")}(n.parameters)}`}const Ug=/^[^\/()?;=#]+/;function ih(n){const e=n.match(Ug);return e?e[0]:""}const L0=/^[^=?&#]+/,Wy=/^[^&#]+/;class Fl{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $t([],{}):new $t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Mt]=new $t(e,t)),r}parseSegment(){const e=ih(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new y.vHH(4009,L);return this.capture(e),new mo(Cc(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ih(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const s=ih(this.remaining);s&&(r=s,this.capture(r))}e[Cc(t)]=Cc(r)}parseQueryParam(e){const t=function Iu(n){const e=n.match(L0);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Bg(n){const e=n.match(Wy);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const s=Gf(t),u=Gf(r);if(e.hasOwnProperty(s)){let l=e[s];Array.isArray(l)||(l=[l],e[s]=l),l.push(u)}else e[s]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=ih(this.remaining),s=this.remaining[r.length];if("/"!==s&&")"!==s&&";"!==s)throw new y.vHH(4010,L);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Mt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Mt]:new $t([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new y.vHH(4011,L)}}function sh(n){return n.segments.length>0?new $t([],{[Mt]:n}):n}function Aa(n){const e={};for(const r of Object.keys(n.children)){const u=Aa(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function qy(n){if(1===n.numberOfChildren&&n.children[Mt]){const e=n.children[Mt];return new $t(n.segments.concat(e.segments),e.children)}return n}(new $t(n.segments,e))}function Du(n){return n instanceof Sn}const Tc=!1;function Vg(n,e,t,r,s){if(0===t.length)return ia(e.root,e.root,e.root,r,s);const u=function Vl(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ah(!0,0,n);let e=0,t=!1;const r=n.reduce((s,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return D(u.outlets,(w,C)=>{g[C]="string"==typeof w?w.split("/"):w}),[...s,{outlets:g}]}if(u.segmentPath)return[...s,u.segmentPath]}return"string"!=typeof u?[...s,u]:0===l?(u.split("/").forEach((g,w)=>{0==w&&"."===g||(0==w&&""===g?t=!0:".."===g?e++:""!=g&&s.push(g))}),s):[...s,u]},[]);return new ah(t,e,r)}(t);return u.toRoot()?ia(e.root,e.root,new $t([],{}),r,s):function l(w){const C=function uh(n,e,t,r){if(n.isAbsolute)return new bu(e.root,!0,0);if(-1===r)return new bu(t,t===e.root,0);return function Cu(n,e,t){let r=n,s=e,u=t;for(;u>s;){if(u-=s,r=r.parent,!r)throw new y.vHH(4005,Tc&&"Invalid number of '../'");s=r.segments.length}return new bu(r,!1,s-u)}(t,r+(Bl(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,w),S=C.processChildren?Zs(C.segmentGroup,C.index,u.commands):lh(C.segmentGroup,C.index,u.commands);return ia(e.root,C.segmentGroup,S,r,s)}(n.snapshot?._lastPathIndex)}function Bl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function oh(n){return"object"==typeof n&&null!=n&&n.outlets}function ia(n,e,t,r,s){let l,u={};r&&D(r,(w,C)=>{u[C]=Array.isArray(w)?w.map(S=>`${S}`):`${w}`}),l=n===e?t:jg(n,e,t);const g=sh(Aa(l));return new Sn(g,u,s)}function jg(n,e,t){const r={};return D(n.children,(s,u)=>{r[u]=s===e?t:jg(s,e,t)}),new $t(n.segments,r)}class ah{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bl(r[0]))throw new y.vHH(4003,Tc&&"Root segment cannot have matrix parameters");const s=r.find(oh);if(s&&s!==rh(r))throw new y.vHH(4004,Tc&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class bu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function lh(n,e,t){if(n||(n=new $t([],{})),0===n.segments.length&&n.hasChildren())return Zs(n,e,t);const r=function Kf(n,e,t){let r=0,s=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;s<n.segments.length;){if(r>=t.length)return u;const l=n.segments[s],g=t[r];if(oh(g))break;const w=`${g}`,C=r<t.length-1?t[r+1]:null;if(s>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Yf(w,C,l))return u;r+=2}else{if(!Yf(w,{},l))return u;r++}s++}return{match:!0,pathIndex:s,commandIndex:r}}(n,e,t),s=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new $t(n.segments.slice(0,r.pathIndex),{});return u.children[Mt]=new $t(n.segments.slice(r.pathIndex),n.children),Zs(u,0,s)}return r.match&&0===s.length?new $t(n.segments,{}):r.match&&!n.hasChildren()?jl(n,e,t):r.match?Zs(n,0,s):jl(n,e,t)}function Zs(n,e,t){if(0===t.length)return new $t(n.segments,{});{const r=function ch(n){return oh(n[0])?n[0].outlets:{[Mt]:n}}(t),s={};if(!r[Mt]&&n.children[Mt]&&1===n.numberOfChildren&&0===n.children[Mt].segments.length){const u=Zs(n.children[Mt],e,t);return new $t(n.segments,u.children)}return D(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(s[l]=lh(n.children[l],e,u))}),D(n.children,(u,l)=>{void 0===r[l]&&(s[l]=u)}),new $t(n.segments,s)}}function jl(n,e,t){const r=n.segments.slice(0,e);let s=0;for(;s<t.length;){const u=t[s];if(oh(u)){const w=$l(u.outlets);return new $t(r,w)}if(0===s&&Bl(t[0])){r.push(new mo(n.segments[e].path,Zf(t[0]))),s++;continue}const l=oh(u)?u.outlets[Mt]:`${u}`,g=s<t.length-1?t[s+1]:null;l&&g&&Bl(g)?(r.push(new mo(l,Zf(g))),s+=2):(r.push(new mo(l,{})),s++)}return new $t(r,{})}function $l(n){const e={};return D(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jl(new $t([],{}),0,t))}),e}function Zf(n){const e={};return D(n,(t,r)=>e[r]=`${t}`),e}function Yf(n,e,t){return n==t.path&&fs(e,t.parameters)}const Hl="imperative";class vo{constructor(e,t){this.id=e,this.url=t}}class Qf extends vo{constructor(e,t,r="imperative",s=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=s}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xs extends vo{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class zl extends vo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ma extends vo{constructor(e,t,r,s){super(e,t),this.reason=r,this.code=s,this.type=16}}class Gl extends vo{constructor(e,t,r,s){super(e,t),this.error=r,this.target=s,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Sc extends vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Zy extends vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yy extends vo{constructor(e,t,r,s,u){super(e,t),this.urlAfterRedirects=r,this.state=s,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Qy extends vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Jf extends vo{constructor(e,t,r,s){super(e,t),this.urlAfterRedirects=r,this.state=s,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wl{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $g{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ac{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Xf{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $i{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let tp=(()=>{class n{createUrlTree(t,r,s,u,l,g){return Vg(t||r.root,s,u,l,g)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Jy=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(e){return tp.\u0275fac(e)},providedIn:"root"}),n})();class rp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=ip(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=ip(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=ti(e,this._root);return t.length<2?[]:t[t.length-2].children.map(s=>s.value).filter(s=>s!==e)}pathFromRoot(e){return ti(e,this._root).map(t=>t.value)}}function ip(n,e){if(n===e.value)return e;for(const t of e.children){const r=ip(n,t);if(r)return r}return null}function ti(n,e){if(n===e.value)return[e];for(const t of e.children){const r=ti(n,t);if(r.length)return r.unshift(e),r}return[]}class Hi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Xy extends rp{constructor(e,t){super(e),this.snapshot=t,Su(this,e)}toString(){return this.snapshot.toString()}}function ev(n,e){const t=function tv(n,e){const l=new hh([],{},{},"",{},Mt,e,null,n.root,-1,{});return new _o("",new Hi(l,[]))}(n,e),r=new Hn([new mo("",{})]),s=new Hn({}),u=new Hn({}),l=new Hn({}),g=new Hn(""),w=new Ur(r,s,l,g,u,Mt,e,t.root);return w.snapshot=t.root,new Xy(new Hi(w,[]),t)}class Ur{constructor(e,t,r,s,u,l,g,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.title=this.data?.pipe((0,Tt.U)(C=>C[hs]))??yt(void 0),this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Tt.U)(e=>ji(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Tt.U)(e=>ji(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function sp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const s=t[r],u=t[r-1];if(s.routeConfig&&""===s.routeConfig.path)r--;else{if(u.component)break;r--}}return function dh(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class hh{get title(){return this.data?.[hs]}constructor(e,t,r,s,u,l,g,w,C,S,O){this.url=e,this.params=t,this.queryParams=r,this.fragment=s,this.data=u,this.outlet=l,this.component=g,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=S,this._resolve=O}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ji(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ji(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _o extends rp{constructor(e,t){super(t),this.url=e,Su(this,t)}toString(){return op(this._root)}}function Su(n,e){e.value._routerState=n,e.children.forEach(t=>Su(n,t))}function op(n){const e=n.children.length>0?` { ${n.children.map(op).join(", ")} } `:"";return`${n.value}${e}`}function Mc(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,fs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),fs(e.params,t.params)||n.params.next(t.params),function eh(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!fs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),fs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Ys(n,e){const t=fs(n.params,e.params)&&function ta(n,e){return Nr(n,e)&&n.every((t,r)=>fs(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Ys(n.parent,e.parent))}function Rc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const s=function Gg(n,e,t){return e.children.map(r=>{for(const s of t.children)if(n.shouldReuseRoute(r.value,s.value.snapshot))return Rc(n,r,s);return Rc(n,r)})}(n,e,t);return new Hi(r,s)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(g=>Rc(n,g)),l}}const r=function Wg(n){return new Ur(new Hn(n.url),new Hn(n.params),new Hn(n.queryParams),new Hn(n.fragment),new Hn(n.data),n.outlet,n.component,n)}(e.value),s=e.children.map(u=>Rc(n,u));return new Hi(r,s)}}const qg="ngNavigationCancelingError";function m(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Du(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,s=h(!1,0,e);return s.url=t,s.navigationBehaviorOptions=r,s}function h(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[qg]=!0,r.cancellationCode=e,t&&(r.url=t),r}function f(n){return _(n)&&Du(n.url)}function _(n){return n&&n[qg]}class T{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new R,this.attachRef=null}}let R=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new T,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const H=!1;let ee=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Mt,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.parentContexts=(0,y.f3M)(R),this.location=(0,y.f3M)(y.s_b),this.changeDetector=(0,y.f3M)(y.sBO),this.environmentInjector=(0,y.f3M)(y.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,H);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,H);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,H);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new y.vHH(4013,H);this._activatedRoute=t;const s=this.location,l=t.snapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,w=new ke(t,g,s.injector);if(r&&function Ye(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(l);this.activated=s.createComponent(C,s.length,w)}else this.activated=s.createComponent(l,{index:s.length,injector:w,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=y.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[y.TTD]}),n})();class ke{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ur?this.route:e===R?this.childContexts:this.parent.get(e,t)}}let ot=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(t,r){1&t&&y._UZ(0,"router-outlet")},dependencies:[ee],encapsulation:2}),n})();function ut(n,e){return n.providers&&!n._injector&&(n._injector=(0,y.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Kl(n){const e=n.children&&n.children.map(Kl),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Mt&&(t.component=ot),t}function gs(n){return n.outlet||Mt}function ph(n,e){const t=n.filter(r=>gs(r)===e);return t.push(...n.filter(r=>gs(r)!==e)),t}function Pc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class gh{constructor(e,t,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Mc(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const s=xc(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,s[l],r),delete s[l]}),D(s,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(s===u)if(s.component){const l=r.getContext(s.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=xc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);if(r&&r.outlet){const l=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),s=r&&e.value.component?r.children:t,u=xc(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],s);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const s=xc(t);e.children.forEach(u=>{this.activateRoutes(u,s[u.value.outlet],r),this.forwardEvent(new $i(u.value.snapshot))}),e.children.length&&this.forwardEvent(new Ac(e.value.snapshot))}activateRoutes(e,t,r){const s=e.value,u=t?t.value:null;if(Mc(s),s===u)if(s.component){const l=r.getOrCreateContext(s.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(s.component){const l=r.getOrCreateContext(s.outlet);if(this.routeReuseStrategy.shouldAttach(s.snapshot)){const g=this.routeReuseStrategy.retrieve(s.snapshot);this.routeReuseStrategy.store(s.snapshot,null),l.children.onOutletReAttached(g.contexts),l.attachRef=g.componentRef,l.route=g.route.value,l.outlet&&l.outlet.attach(g.componentRef,g.route.value),Mc(g.route.value),this.activateChildRoutes(e,null,l.children)}else{const g=Pc(s.snapshot),w=g?.get(y._Vd)??null;l.attachRef=null,l.route=s,l.resolver=w,l.injector=g,l.outlet&&l.outlet.activateWith(s,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class iv{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class sv{constructor(e,t){this.component=e,this.route=t}}function ap(n,e,t){const r=n._root;return mh(r,e?e._root:null,t,[r.value])}function Zl(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,y.Z0I)(n)?e.get(n):n:r}function mh(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=xc(e);return n.children.forEach(l=>{(function F0(n,e,t,r,s={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const w=function mD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Nr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Nr(n.url,e.url)||!fs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ys(n,e)||!fs(n.queryParams,e.queryParams);default:return!Ys(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);w?s.canActivateChecks.push(new iv(r)):(u.data=l.data,u._resolvedData=l._resolvedData),mh(n,e,u.component?g?g.children:null:t,r,s),w&&g&&g.outlet&&g.outlet.isActivated&&s.canDeactivateChecks.push(new sv(g.outlet.component,l))}else l&&up(e,g,s),s.canActivateChecks.push(new iv(r)),mh(n,null,u.component?g?g.children:null:t,r,s)})(l,u[l.value.outlet],t,r.concat([l.value]),s),delete u[l.value.outlet]}),D(u,(l,g)=>up(l,t.getContext(g),s)),s}function up(n,e,t){const r=xc(n),s=n.value;D(r,(u,l)=>{up(u,s.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new sv(s.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,s))}function yh(n){return"function"==typeof n}function xu(n){return n instanceof gu||"EmptyError"===n?.name}const Yg=Symbol("INITIAL_VALUE");function Nc(){return ur(n=>xl(n.map(e=>e.pipe(Qo(1),Jo(Yg)))).pipe((0,Tt.U)(e=>{for(const t of e)if(!0!==t){if(t===Yg)return Yg;if(!1===t||t instanceof Sn)return t}return!0}),gi(e=>e!==Yg),Qo(1)))}function hv(n){return(0,Vf.z)((0,Pr.b)(e=>{if(Du(e))throw m(0,e)}),(0,Tt.U)(e=>!0===e))}const fv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function j0(n,e,t,r,s){const u=pv(n,e,t);return u.matched?function vh(n,e,t,r){const s=e.canMatch;return s&&0!==s.length?yt(s.map(l=>{const g=Zl(l,n);return A(function cv(n){return n&&yh(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(Nc(),hv()):yt(!0)}(r=ut(e,r),e,t).pipe((0,Tt.U)(l=>!0===l?u:{...fv})):yt(u)}function pv(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...fv}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||$f)(t,n,e);if(!s)return{...fv};const u={};D(s.posParams,(g,w)=>{u[w]=g.path});const l=s.consumed.length>0?{...u,...s.consumed[s.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:l,positionalParamSegments:s.posParams??{}}}function _h(n,e,t,r){if(t.length>0&&function DD(n,e,t){return t.some(r=>gv(n,e,r)&&gs(r)!==Mt)}(n,t,r)){const u=new $t(e,function $0(n,e,t,r){const s={};s[Mt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&gs(u)!==Mt){const l=new $t([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,s[gs(u)]=l}return s}(n,e,r,new $t(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function H0(n,e,t){return t.some(r=>gv(n,e,r))}(n,t,r)){const u=new $t(n.segments,function ID(n,e,t,r,s){const u={};for(const l of r)if(gv(n,t,l)&&!s[gs(l)]){const g=new $t([],{});g._sourceSegment=n,g._segmentIndexShift=e.length,u[gs(l)]=g}return{...s,...u}}(n,e,t,r,n.children));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new $t(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function gv(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function z0(n,e,t,r){return!!(gs(n)===r||r!==Mt&&gv(e,t,n))&&("**"===n.path||pv(e,n,t).matched)}function wh(n,e,t){return 0===e.length&&!n.children[t]}const Xg=!1;class Mu{constructor(e){this.segmentGroup=e||null}}class Eh{constructor(e){this.urlTree=e}}function cp(n){return _u(new Mu(n))}function mv(n){return _u(new Eh(n))}class G0{constructor(e,t,r,s,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=s,this.config=u,this.allowRedirects=!0}apply(){const e=_h(this.urlTree.root,[],[],this.config).segmentGroup,t=new $t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Mt).pipe((0,Tt.U)(u=>this.createUrlTree(Aa(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ea(u=>{if(u instanceof Eh)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Mu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Mt).pipe((0,Tt.U)(s=>this.createUrlTree(Aa(s),e.queryParams,e.fragment))).pipe(ea(s=>{throw s instanceof Mu?this.noMatchError(s):s}))}noMatchError(e){return new y.vHH(4002,Xg)}createUrlTree(e,t,r){const s=sh(e);return new Sn(s,t,r)}expandSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Tt.U)(u=>new $t([],u))):this.expandSegment(e,r,t,r.segments,s,!0)}expandChildren(e,t,r){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);return(0,Dn.D)(s).pipe(As(u=>{const l=r.children[u],g=ph(t,u);return this.expandSegmentGroup(e,g,l,u).pipe((0,Tt.U)(w=>({segment:w,outlet:u})))}),wc((u,l)=>(u[l.outlet]=l.segment,u),{}),Ic())}expandSegment(e,t,r,s,u,l){return(0,Dn.D)(r).pipe(As(g=>this.expandSegmentAgainstRoute(e,t,r,g,s,u,l).pipe(ea(C=>{if(C instanceof Mu)return yt(null);throw C}))),ds(g=>!!g),ea((g,w)=>{if(xu(g))return wh(t,s,u)?yt(new $t([],{})):cp(t);throw g}))}expandSegmentAgainstRoute(e,t,r,s,u,l,g){return z0(s,t,u,l)?void 0===s.redirectTo?this.matchSegmentAgainstRoute(e,t,s,u,l):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l):cp(t):cp(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){return"**"===s.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,s,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,s){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?mv(u):this.lineralizeSegments(r,u).pipe((0,nr.z)(l=>{const g=new $t(l,{});return this.expandSegment(e,g,t,l,s,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,s,u,l){const{matched:g,consumedSegments:w,remainingSegments:C,positionalParamSegments:S}=pv(t,s,u);if(!g)return cp(t);const O=this.applyRedirectCommands(w,s.redirectTo,S);return s.redirectTo.startsWith("/")?mv(O):this.lineralizeSegments(s,O).pipe((0,nr.z)(z=>this.expandSegment(e,t,r,z.concat(C),l,!1)))}matchSegmentAgainstRoute(e,t,r,s,u){return"**"===r.path?(e=ut(r,e),r.loadChildren?(r._loadedRoutes?yt({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Tt.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new $t(s,{})))):yt(new $t(s,{}))):j0(t,r,s,e).pipe(ur(({matched:l,consumedSegments:g,remainingSegments:w})=>l?this.getChildConfig(e=r._injector??e,r,s).pipe((0,nr.z)(S=>{const O=S.injector??e,z=S.routes,{segmentGroup:J,slicedSegments:fe}=_h(t,g,w,z),Fe=new $t(J.segments,J.children);if(0===fe.length&&Fe.hasChildren())return this.expandChildren(O,z,Fe).pipe((0,Tt.U)(At=>new $t(g,At)));if(0===z.length&&0===fe.length)return yt(new $t(g,{}));const $e=gs(r)===u;return this.expandSegment(O,Fe,z,fe,$e?Mt:u,!0).pipe((0,Tt.U)(Rt=>new $t(g.concat(Rt.segments),Rt.children)))})):cp(t)))}getChildConfig(e,t,r){return t.children?yt({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?yt({routes:t._loadedRoutes,injector:t._loadedInjector}):function ED(n,e,t,r){const s=e.canLoad;return void 0===s||0===s.length?yt(!0):yt(s.map(l=>{const g=Zl(l,n);return A(function av(n){return n&&yh(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(Nc(),hv())}(e,t,r).pipe((0,nr.z)(s=>s?this.configLoader.loadChildren(e,t).pipe((0,Pr.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function CD(n){return _u(h(Xg,3))}())):yt({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],s=t.root;for(;;){if(r=r.concat(s.segments),0===s.numberOfChildren)return yt(r);if(s.numberOfChildren>1||!s.children[Mt])return e.redirectTo,_u(new y.vHH(4e3,Xg));s=s.children[Mt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,s){const u=this.createSegmentGroup(e,t.root,r,s);return new Sn(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return D(e,(s,u)=>{if("string"==typeof s&&s.startsWith(":")){const g=s.substring(1);r[u]=t[g]}else r[u]=s}),r}createSegmentGroup(e,t,r,s){const u=this.createSegments(e,t.segments,r,s);let l={};return D(t.children,(g,w)=>{l[w]=this.createSegmentGroup(e,g,r,s)}),new $t(u,l)}createSegments(e,t,r,s){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,s):this.findOrReturn(u,r))}findPosParam(e,t,r){const s=r[t.path.substring(1)];if(!s)throw new y.vHH(4001,Xg);return s}findOrReturn(e,t){let r=0;for(const s of t){if(s.path===e.path)return t.splice(r),s;r++}return e}}class yv{}class lp{constructor(e,t,r,s,u,l,g){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=s,this.url=u,this.paramsInheritanceStrategy=l,this.urlSerializer=g}recognize(){const e=_h(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Mt).pipe((0,Tt.U)(t=>{if(null===t)return null;const r=new hh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Mt,this.rootComponentType,null,this.urlTree.root,-1,{}),s=new Hi(r,t),u=new _o(this.url,s);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=sp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s))}processSegmentGroup(e,t,r,s){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,s)}processChildren(e,t,r){return(0,Dn.D)(Object.keys(r.children)).pipe(As(s=>{const u=r.children[s],l=ph(t,s);return this.processSegmentGroup(e,l,u,s)}),wc((s,u)=>s&&u?(s.push(...u),s):null),function Ks(n,e=!1){return(0,Xr.e)((t,r)=>{let s=0;t.subscribe((0,Jr.x)(r,u=>{const l=n(u,s++);(l||e)&&r.next(u),!l&&r.complete()}))})}(s=>null!==s),Xo(null),Ic(),(0,Tt.U)(s=>{if(null===s)return null;const u=q0(s);return function AD(n){n.sort((e,t)=>e.value.outlet===Mt?-1:t.value.outlet===Mt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,s,u){return(0,Dn.D)(t).pipe(As(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,s,u)),ds(l=>!!l),ea(l=>{if(xu(l))return wh(r,s,u)?yt([]):yt(null);throw l}))}processSegmentAgainstRoute(e,t,r,s,u){if(t.redirectTo||!z0(t,r,s,u))return yt(null);let l;if("**"===t.path){const g=s.length>0?rh(s).parameters:{},w=Z0(r)+s.length;l=yt({snapshot:new hh(s,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ra(t),gs(t),t.component??t._loadedComponent??null,t,K0(r),w,Y0(t)),consumedSegments:[],remainingSegments:[]})}else l=j0(r,t,s,e).pipe((0,Tt.U)(({matched:g,consumedSegments:w,remainingSegments:C,parameters:S})=>{if(!g)return null;const O=Z0(r)+w.length;return{snapshot:new hh(w,S,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Ra(t),gs(t),t.component??t._loadedComponent??null,t,K0(r),O,Y0(t)),consumedSegments:w,remainingSegments:C}}));return l.pipe(ur(g=>{if(null===g)return yt(null);const{snapshot:w,consumedSegments:C,remainingSegments:S}=g;e=t._injector??e;const O=t._loadedInjector??e,z=function xD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:J,slicedSegments:fe}=_h(r,C,S,z.filter($e=>void 0===$e.redirectTo));if(0===fe.length&&J.hasChildren())return this.processChildren(O,z,J).pipe((0,Tt.U)($e=>null===$e?null:[new Hi(w,$e)]));if(0===z.length&&0===fe.length)return yt([new Hi(w,[])]);const Fe=gs(t)===u;return this.processSegment(O,z,J,fe,Fe?Mt:u).pipe((0,Tt.U)($e=>null===$e?null:[new Hi(w,$e)]))}))}}function MD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function q0(n){const e=[],t=new Set;for(const r of n){if(!MD(r)){e.push(r);continue}const s=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==s?(s.children.push(...r.children),t.add(s)):e.push(r)}for(const r of t){const s=q0(r.children);e.push(new Hi(r.value,s))}return e.filter(r=>!t.has(r))}function K0(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Z0(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Ra(n){return n.data||{}}function Y0(n){return n.resolve||{}}function _v(n){return"string"==typeof n.title||null===n.title}function wv(n){return ur(e=>{const t=n(e);return t?(0,Dn.D)(t).pipe((0,Tt.U)(()=>e)):yt(e)})}const Ih=new y.OlP("ROUTES");let Iv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,y.f3M)(y.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return yt(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=A(t.loadComponent()).pipe((0,Tt.U)(X0),(0,Pr.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Dc(()=>{this.componentLoaders.delete(t)})),s=new Rl(r,()=>new Qr.x).pipe(Ml());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return yt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Tt.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let w,C,S=!1;Array.isArray(g)?C=g:(w=g.create(t).injector,C=nh(w.get(Ih,[],y.XFs.Self|y.XFs.Optional)));return{routes:C.map(Kl),injector:w}}),Dc(()=>{this.childrenLoaders.delete(r)})),l=new Rl(u,()=>new Qr.x).pipe(Ml());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return A(t()).pipe((0,Tt.U)(X0),(0,nr.z)(r=>r instanceof y.YKP||Array.isArray(r)?yt(r):(0,Dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function X0(n){return function sa(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let tm=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new Qr.x,this.configLoader=(0,y.f3M)(Iv),this.environmentInjector=(0,y.f3M)(y.lqb),this.urlSerializer=(0,y.f3M)(yo),this.rootContexts=(0,y.f3M)(R),this.navigationId=0,this.afterPreactivation=()=>yt(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new $g(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Wl(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Hn({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Hl,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(gi(r=>0!==r.id),(0,Tt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),ur(r=>{let s=!1,u=!1;return yt(r).pipe((0,Pr.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),ur(l=>{const g=t.browserUrlTree.toString(),w=!t.navigated||l.extractedUrl.toString()!==g||g!==t.currentUrlTree.toString();if(!w&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new Ma(l.id,t.serializeUrl(r.rawUrl),S,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),ls.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return ew(l.source)&&(t.browserUrlTree=l.extractedUrl),yt(l).pipe(ur(S=>{const O=this.transitions?.getValue();return this.events.next(new Qf(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),O!==this.transitions?.getValue()?ls.E:Promise.resolve(S)}),function W0(n,e,t,r){return ur(s=>function TD(n,e,t,r,s){return new G0(n,e,t,r,s).apply()}(n,e,t,s.extractedUrl,r).pipe((0,Tt.U)(u=>({...s,urlAfterRedirects:u}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,Pr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},r.urlAfterRedirects=S.urlAfterRedirects}),function PD(n,e,t,r,s){return(0,nr.z)(u=>function vv(n,e,t,r,s,u,l="emptyOnly"){return new lp(n,e,t,r,s,l,u).recognize().pipe(ur(g=>null===g?function SD(n){return new Bi.y(e=>e.error(n))}(new yv):yt(g)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,s).pipe((0,Tt.U)(l=>({...u,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,Pr.b)(S=>{if(r.targetSnapshot=S.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!S.extras.skipLocationChange){const z=t.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);t.setBrowserUrl(z,S)}t.browserUrlTree=S.urlAfterRedirects}const O=new Sc(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(O)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:S,extractedUrl:O,source:z,restoredState:J,extras:fe}=l,Fe=new Qf(S,this.urlSerializer.serialize(O),z,J);this.events.next(Fe);const $e=ev(O,this.rootComponentType).snapshot;return yt(r={...l,targetSnapshot:$e,urlAfterRedirects:O,extras:{...fe,skipLocationChange:!1,replaceUrl:!1}})}{const S="";return this.events.next(new Ma(l.id,t.serializeUrl(r.extractedUrl),S,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),ls.E}}),(0,Pr.b)(l=>{const g=new Zy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(g)}),(0,Tt.U)(l=>r={...l,guards:ap(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function Qg(n,e){return(0,nr.z)(t=>{const{targetSnapshot:r,currentSnapshot:s,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?yt({...t,guardsResult:!0}):function _D(n,e,t,r){return(0,Dn.D)(n).pipe((0,nr.z)(s=>function wD(n,e,t,r,s){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?yt(u.map(g=>{const w=Pc(e)??s,C=Zl(g,w);return A(function yD(n){return n&&yh(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):w.runInContext(()=>C(n,e,t,r))).pipe(ds())})).pipe(Nc()):yt(!0)}(s.component,s.route,t,e,r)),ds(s=>!0!==s,!0))}(l,r,s,n).pipe((0,nr.z)(g=>g&&function U0(n){return"boolean"==typeof n}(g)?function lv(n,e,t,r){return(0,Dn.D)(e).pipe(As(s=>_c(function Yl(n,e){return null!==n&&e&&e(new Hg(n)),yt(!0)}(s.route.parent,r),function Jg(n,e){return null!==n&&e&&e(new Xf(n)),yt(!0)}(s.route,r),function dv(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function ov(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>Xd(()=>yt(l.guards.map(w=>{const C=Pc(l.node)??t,S=Zl(w,C);return A(function uv(n){return n&&yh(n.canActivateChild)}(S)?S.canActivateChild(r,n):C.runInContext(()=>S(r,n))).pipe(ds())})).pipe(Nc())));return yt(u).pipe(Nc())}(n,s.path,t),function V0(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return yt(!0);const s=r.map(u=>Xd(()=>{const l=Pc(e)??t,g=Zl(u,l);return A(function PS(n){return n&&yh(n.canActivate)}(g)?g.canActivate(e,n):l.runInContext(()=>g(e,n))).pipe(ds())}));return yt(s).pipe(Nc())}(n,s.route,t))),ds(s=>!0!==s,!0))}(r,u,n,e):yt(g)),(0,Tt.U)(g=>({...t,guardsResult:g})))})}(this.environmentInjector,l=>this.events.next(l)),(0,Pr.b)(l=>{if(r.guardsResult=l.guardsResult,Du(l.guardsResult))throw m(0,l.guardsResult);const g=new Yy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(g)}),gi(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),wv(l=>{if(l.guards.canActivateChecks.length)return yt(l).pipe((0,Pr.b)(g=>{const w=new Qy(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(w)}),ur(g=>{let w=!1;return yt(g).pipe(function NS(n,e){return(0,nr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:s}}=t;if(!s.length)return yt(t);let u=0;return(0,Dn.D)(s).pipe(As(l=>function OS(n,e,t,r){const s=n.routeConfig,u=n._resolve;return void 0!==s?.title&&!_v(s)&&(u[hs]=s.title),function Q0(n,e,t,r){const s=function kS(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===s.length)return yt({});const u={};return(0,Dn.D)(s).pipe((0,nr.z)(l=>function J0(n,e,t,r){const s=Pc(e)??r,u=Zl(n,s);return A(u.resolve?u.resolve(e,t):s.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(ds(),(0,Pr.b)(g=>{u[l]=g}))),Ec(1),function Nl(n){return(0,Tt.U)(()=>n)}(u),ea(l=>xu(l)?ls.E:_u(l)))}(u,n,e,r).pipe((0,Tt.U)(l=>(n._resolvedData=l,n.data=sp(n,t).resolve,s&&_v(s)&&(n.data[hs]=s.title),null)))}(l.route,r,n,e)),(0,Pr.b)(()=>u++),Ec(1),(0,nr.z)(l=>u===s.length?yt(t):ls.E))})}(t.paramsInheritanceStrategy,this.environmentInjector),(0,Pr.b)({next:()=>w=!0,complete:()=>{w||(t.restoreHistory(g),this.cancelNavigationTransition(g,"",2))}}))}),(0,Pr.b)(g=>{const w=new Jf(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(w)}))}),wv(l=>{const g=w=>{const C=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,Pr.b)(S=>{w.component=S}),(0,Tt.U)(()=>{})));for(const S of w.children)C.push(...g(S));return C};return xl(g(l.targetSnapshot.root)).pipe(Xo(),Qo(1))}),wv(()=>this.afterPreactivation()),(0,Tt.U)(l=>{const g=function Au(n,e,t){const r=Rc(n,e._root,t?t._root:void 0);return new Xy(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:g}}),(0,Pr.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,Tt.U)(r=>(new gh(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Qo(1),(0,Pr.b)({next:l=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new xs(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{s=!0}}),Dc(()=>{s||u||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),ea(l=>{if(u=!0,_(l)){f(l)||(t.navigated=!0,t.restoreHistory(r,!0));const g=new zl(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(g),f(l)){const w=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),C={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||ew(r.source)};t.scheduleNavigation(w,Hl,null,C,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const g=new Gl(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(g);try{r.resolve(t.errorHandler(l))}catch(w){r.reject(w)}}return ls.E}))}))}cancelNavigationTransition(t,r,s){const u=new zl(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(u),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ew(n){return n!==Hl}let tw=(()=>{class n{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(u=>u.outlet===Mt);return r}getResolvedTitleForRoute(t){return t.data[hs]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(ND)},providedIn:"root"}),n})(),ND=(()=>{class n extends tw{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(kf))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),nw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(kD)},providedIn:"root"}),n})();class OD{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let kD=(()=>{class n extends OD{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=y.n5z(n)))(r||n)}}(),n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Wt=new y.OlP("",{providedIn:"root",factory:()=>({})});let rw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(iw)},providedIn:"root"}),n})(),iw=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function FD(n){throw n}function UD(n,e,t){return e.parse("/")}const sw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BD={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ms=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,y.f3M)(y.c2e),this.isNgZoneEnabled=!1,this.options=(0,y.f3M)(Wt,{optional:!0})||{},this.errorHandler=this.options.errorHandler||FD,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||UD,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,y.f3M)(rw),this.routeReuseStrategy=(0,y.f3M)(nw),this.urlCreationStrategy=(0,y.f3M)(Jy),this.titleStrategy=(0,y.f3M)(tw),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=nh((0,y.f3M)(Ih,{optional:!0})??[]),this.navigationTransitions=(0,y.f3M)(tm),this.urlSerializer=(0,y.f3M)(yo),this.location=(0,y.f3M)(qe),this.isNgZoneEnabled=(0,y.f3M)(y.R0b)instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Sn,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ev(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Hl,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const u={replaceUrl:!0},l=s?.navigationId?s:null;if(s){const w={...s};delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const g=this.parseUrl(t);this.scheduleNavigation(g,r,l,u)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Kl),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:s,queryParams:u,fragment:l,queryParamsHandling:g,preserveFragment:w}=r,C=w?this.currentUrlTree.fragment:l;let S=null;switch(g){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),this.urlCreationStrategy.createUrlTree(s,this.routerState,this.currentUrlTree,t,S,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=Du(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(u,Hl,null,r)}navigate(t,r={skipLocationChange:!1}){return function VD(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new y.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...sw}:!1===r?{...BD}:r,Du(t))return ae(this.currentUrlTree,t,s);const u=this.parseUrl(t);return ae(this.currentUrlTree,u,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const u=t[s];return null!=u&&(r[s]=u),r},{})}scheduleNavigation(t,r,s,u,l){if(this.disposed)return Promise.resolve(!1);let g,w,C,S;return l?(g=l.resolve,w=l.reject,C=l.promise):C=new Promise((O,z)=>{g=O,w=z}),S="computed"===this.canceledNavigationResolution?s&&s.\u0275routerPageId?s.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:S,source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:u,resolve:g,reject:w,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(O=>Promise.reject(O))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",l)}else{const u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(s,"",u)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const u=this.currentPageId-(this.browserPageId??this.currentPageId);0!==u?this.location.historyGo(u):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===u&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class bv{}let Cv=(()=>{class n{constructor(t,r,s,u,l){this.router=t,this.injector=s,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(gi(t=>t instanceof xs),As(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,y.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,g=u._loadedInjector??l;(u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent)&&s.push(this.preloadConfig(l,u)),(u.children||u._loadedRoutes)&&s.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,Dn.D)(s).pipe((0,vc.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):yt(null);const u=s.pipe((0,nr.z)(l=>null===l?yt(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Dn.D)([u,l]).pipe((0,vc.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ms),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(bv),y.LFG(Iv))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const fp=new y.OlP("");let aw=(()=>{class n{constructor(t,r,s,u,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=u,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Qf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Tu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Tu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){y.$Z()},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();var Eo=(()=>((Eo=Eo||{})[Eo.COMPLETE=0]="COMPLETE",Eo[Eo.FAILED=1]="FAILED",Eo[Eo.REDIRECTING=2]="REDIRECTING",Eo))();const pp=!1;function Ql(n,e){return{\u0275kind:n,\u0275providers:e}}const Sv=new y.OlP("",{providedIn:"root",factory:()=>!1});function gp(){const n=(0,y.f3M)(y.zs3);return e=>{const t=n.get(y.z2F);if(e!==t.components[0])return;const r=n.get(Ms),s=n.get(uw);1===n.get(rm)&&r.initialNavigation(),n.get(cw,null,y.XFs.Optional)?.setUpPreloading(),n.get(fp,null,y.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),s.closed||(s.next(),s.complete(),s.unsubscribe())}}const uw=new y.OlP(pp?"bootstrap done indicator":"",{factory:()=>new Qr.x}),rm=new y.OlP(pp?"initial navigation":"",{providedIn:"root",factory:()=>1});function zD(){let n=[];return n=pp?[{provide:y.Xts,multi:!0,useFactory:()=>{const e=(0,y.f3M)(Ms);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function ep(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],Ql(1,n)}const cw=new y.OlP(pp?"router preloader":"");function GD(n){return Ql(0,[{provide:cw,useExisting:Cv},{provide:bv,useExisting:n}])}const Ch=!1,KD=new y.OlP(Ch?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),Av=[qe,{provide:yo,useClass:Ol},Ms,R,{provide:Ur,useFactory:function Tv(n){return n.routerState.root},deps:[Ms]},Iv,Ch?{provide:Sv,useValue:!0}:[]];function ZD(){return new y.PXZ("Router",Ms)}let YD=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Av,Ch&&r?.enableTracing?zD().\u0275providers:[],{provide:Ih,multi:!0,useValue:t},{provide:KD,useFactory:hw,deps:[[Ms,new y.FiY,new y.tp0]]},{provide:Wt,useValue:r||{}},r?.useHash?{provide:ht,useClass:Ue}:{provide:ht,useClass:Oe},{provide:fp,useFactory:()=>{const n=(0,y.f3M)($s),e=(0,y.f3M)(y.R0b),t=(0,y.f3M)(Wt),r=(0,y.f3M)(tm),s=(0,y.f3M)(yo);return t.scrollOffset&&n.setOffset(t.scrollOffset),new aw(s,r,n,e,t)}},r?.preloadingStrategy?GD(r.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:ZD},r?.initialNavigation?JD(r):[],[{provide:fw,useFactory:gp},{provide:y.tb,multi:!0,useExisting:fw}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Ih,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(KD,8))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[ot]}),n})();function hw(n){if(Ch&&n)throw new y.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function JD(n){return["disabled"===n.initialNavigation?Ql(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const e=(0,y.f3M)(Ms);return()=>{e.setUpLocationChangeListener()}}},{provide:rm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Ql(2,[{provide:rm,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:e=>{const t=e.get(ye,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const s=e.get(Ms),u=e.get(uw);(function US(n,e){n.events.pipe(gi(t=>t instanceof xs||t instanceof zl||t instanceof Gl||t instanceof Ma),(0,Tt.U)(t=>t instanceof xs||t instanceof Ma?Eo.COMPLETE:t instanceof zl&&(0===t.code||1===t.code)?Eo.REDIRECTING:Eo.FAILED),gi(t=>t!==Eo.REDIRECTING),Qo(1)).subscribe(()=>{e()})})(s,()=>{r(!0)}),e.get(tm).afterPreactivation=()=>(r(!0),u.closed?yt(void 0):u),s.initialNavigation()}))}}]).\u0275providers:[]]}const fw=new y.OlP(Ch?"Router Initializer":""),xv=[];let yp=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[YD.forRoot(xv),YD]}),e})();var Mv=U(4986),Br=U(710);function sm(){return(0,Xr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Jr.x)(e,s=>{const u=t;t=s,r&&e.next([u,s]),r=!0}))})}function Pv(n,e){return n===e}var st,Qs=U(2011),be=(U(8463),U(6101),U(5861)),vp=(U(7212),U(4859)),Oc=U(1877),yn=U(2090),pw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oa={},ms=ms||{},Jt=pw||self;function am(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function um(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cm="closure_uid_"+(1e9*Math.random()>>>0),eb=0;function tb(n,e,t){return n.call.apply(n.bind,arguments)}function nb(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Ai(n,e,t){return(Ai=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?tb:nb).apply(null,arguments)}function lm(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Pa(){this.s=this.s,this.o=this.o}Pa.prototype.s=!1,Pa.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ov(n){Object.prototype.hasOwnProperty.call(n,cm)&&n[cm]||(n[cm]=++eb)}(this)},Pa.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const gw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function kv(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function mw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(am(r)){const s=n.length||0,u=r.length||0;n.length=s+u;for(let l=0;l<u;l++)n[s+l]=r[l]}else n.push(r)}}function zi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zi.prototype.h=function(){this.defaultPrevented=!0};var Na=function(){if(!Jt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Jt.addEventListener("test",()=>{},e),Jt.removeEventListener("test",()=>{},e)}catch{}return n}();function Jl(n){return/^[\s\xa0]*$/.test(n)}function dm(){var n=Jt.navigator;return n&&(n=n.userAgent)?n:""}function Oa(n){return-1!=dm().indexOf(n)}function hm(n){return hm[" "](n),n}hm[" "]=function(){};var Ah,sb=Oa("Opera"),Sh=Oa("Trident")||Oa("MSIE"),fm=Oa("Edge"),Lv=fm||Sh,yw=Oa("Gecko")&&!(-1!=dm().toLowerCase().indexOf("webkit")&&!Oa("Edge"))&&!(Oa("Trident")||Oa("MSIE"))&&!Oa("Edge"),pm=-1!=dm().toLowerCase().indexOf("webkit")&&!Oa("Edge");function _p(){var n=Jt.document;return n?n.documentMode:void 0}e:{var vw="",wp=function(){var n=dm();return yw?/rv:([^\);]+)(\)|;)/.exec(n):fm?/Edge\/([\d\.]+)/.exec(n):Sh?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):pm?/WebKit\/(\S+)/.exec(n):sb?/(?:Version)[ \/]?(\S+)/.exec(n):void 0}();if(wp&&(vw=wp?wp[1]:""),Sh){var _w=_p();if(null!=_w&&_w>parseFloat(vw)){Ah=String(_w);break e}}Ah=vw}var ww=Jt.document&&Sh&&(_p()||parseInt(Ah,10))||void 0;function xh(n,e){if(zi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yw){e:{try{hm(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Uv[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&xh.$.h.call(this)}}var Uv={2:"touch",3:"pen",4:"mouse"};xh.prototype.h=function(){xh.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Js="closure_listenable_"+(1e6*Math.random()|0),mm=0;function ym(n,e,t,r,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=s,this.key=++mm,this.fa=this.ia=!1}function kc(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function Bv(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Vv(n){const e={};for(const t in n)e[t]=n[t];return e}const Iw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Dw(n,e){let t,r;for(let s=1;s<arguments.length;s++){for(t in r=arguments[s],r)n[t]=r[t];for(let u=0;u<Iw.length;u++)t=Iw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Lc(n){this.src=n,this.g={},this.h=0}function jv(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],s=gw(r,e);(u=0<=s)&&Array.prototype.splice.call(r,s,1),u&&(kc(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function bw(n,e,t,r){for(var s=0;s<n.length;++s){var u=n[s];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return s}return-1}Lc.prototype.add=function(n,e,t,r,s){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=bw(n,e,r,s);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new ym(e,this.src,u,!!r,s)).ia=t,n.push(e)),e};var $v="closure_lm_"+(1e6*Math.random()|0),Hv={};function Cw(n,e,t,r,s){if(r&&r.once)return Sw(n,e,t,r,s);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Cw(n,e[u],t,r,s);return null}return t=Wv(t),n&&n[Js]?n.O(e,t,um(r)?!!r.capture:!!r,s):Tw(n,e,t,!1,r,s)}function Tw(n,e,t,r,s,u){if(!e)throw Error("Invalid event type");var l=um(s)?!!s.capture:!!s,g=Ep(n);if(g||(n[$v]=g=new Lc(n)),(t=g.add(e,t,r,l,u)).proxy)return t;if(r=function ob(){const e=ab;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Na||(s=l),void 0===s&&(s=!1),n.addEventListener(e.toString(),r,s);else if(n.attachEvent)n.attachEvent(zv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Sw(n,e,t,r,s){if(Array.isArray(e)){for(var u=0;u<e.length;u++)Sw(n,e[u],t,r,s);return null}return t=Wv(t),n&&n[Js]?n.P(e,t,um(r)?!!r.capture:!!r,s):Tw(n,e,t,!0,r,s)}function Aw(n,e,t,r,s){if(Array.isArray(e))for(var u=0;u<e.length;u++)Aw(n,e[u],t,r,s);else r=um(r)?!!r.capture:!!r,t=Wv(t),n&&n[Js]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=bw(u=n.g[e],t,r,s))&&(kc(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Ep(n))&&(e=n.g[e.toString()],n=-1,e&&(n=bw(e,t,r,s)),(t=-1<n?e[n]:null)&&vm(t))}function vm(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[Js])jv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(zv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Ep(e))?(jv(t,n),0==t.h&&(t.src=null,e[$v]=null)):kc(n)}}}function zv(n){return n in Hv?Hv[n]:Hv[n]="on"+n}function ab(n,e){if(n.fa)n=!0;else{e=new xh(e,this);var t=n.listener,r=n.la||n.src;n.ia&&vm(n),n=t.call(r,e)}return n}function Ep(n){return(n=n[$v])instanceof Lc?n:null}var Gv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Wv(n){return"function"==typeof n?n:(n[Gv]||(n[Gv]=function(e){return n.handleEvent(e)}),n[Gv])}function yi(){Pa.call(this),this.i=new Lc(this),this.S=this,this.J=null}function xi(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new zi(e,n);else if(e instanceof zi)e.target=e.target||n;else{var s=e;Dw(e=new zi(r,n),s)}if(s=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];s=_m(l,r,!0,e)&&s}if(s=_m(l=e.g=n,r,!0,e)&&s,s=_m(l,r,!1,e)&&s,t)for(u=0;u<t.length;u++)s=_m(l=e.g=t[u],r,!1,e)&&s}function _m(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.fa&&l.capture==t){var g=l.listener,w=l.la||l.src;l.ia&&jv(n.i,l),s=!1!==g.call(w,r)&&s}}return s&&!r.defaultPrevented}yi.prototype[Js]=!0,yi.prototype.removeEventListener=function(n,e,t,r){Aw(this,n,e,t,r)},yi.prototype.N=function(){if(yi.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)kc(t[r]);delete n.g[e],n.h--}}this.J=null},yi.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},yi.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qv=Jt.JSON.stringify;class ub{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function xw(){var n=Kv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}class Mw{constructor(){this.h=this.g=null}add(e,t){const r=Rw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}}var Rw=new ub(()=>new $S,n=>n.reset());class $S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Pw(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function HS(n){Jt.setTimeout(()=>{throw n},0)}let Fc,Ip=!1,Kv=new Mw,wm=()=>{const n=Jt.Promise.resolve(void 0);Fc=()=>{n.then(cb)}};var cb=()=>{for(var n;n=xw();){try{n.h.call(n.g)}catch(t){HS(t)}var e=Rw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ip=!1};function Xs(n,e){yi.call(this),this.h=n||1,this.g=e||Jt,this.j=Ai(this.qb,this),this.l=Date.now()}function Xl(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function vi(n,e,t){if("function"==typeof n)t&&(n=Ai(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ai(n.handleEvent,n)}return 2147483647<Number(e)?-1:Jt.setTimeout(n,e||0)}function Uc(n){n.g=vi(()=>{n.g=null,n.i&&(n.i=!1,Uc(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}(st=Xs.prototype).ga=!1,st.T=null,st.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),xi(this,"tick"),this.ga&&(Xl(this),this.start()))}},st.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.N=function(){Xs.$.N.call(this),Xl(this),delete this.g};class Em extends Pa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Uc(this)}N(){super.N(),this.g&&(Jt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Gi(n){Pa.call(this),this.h=n,this.g={}}var Im=[];function ed(n,e,t,r){Array.isArray(t)||(t&&(Im[0]=t.toString()),t=Im);for(var s=0;s<t.length;s++){var u=Cw(e,t[s],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function td(n){Bv(n.g,function(e,t){this.g.hasOwnProperty(t)&&vm(e)},n),n.g={}}function Ru(){this.g=!0}function aa(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Nh(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var u=s[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<s.length;l++)s[l]=""}}}return qv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Gi.prototype.N=function(){Gi.$.N.call(this),td(this)},Gi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ru.prototype.Ea=function(){this.g=!1},Ru.prototype.info=function(){};var Io={},Zv=null;function Dp(){return Zv=Zv||new yi}function Yv(n){zi.call(this,Io.Ta,n)}function Oh(n){const e=Dp();xi(e,new Yv(e))}function Qv(n,e){zi.call(this,Io.STAT_EVENT,n),this.stat=e}function Wi(n){const e=Dp();xi(e,new Qv(e,n))}function Jv(n,e){zi.call(this,Io.Ua,n),this.size=e}function kh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Jt.setTimeout(function(){n()},e)}Io.Ta="serverreachability",Io.STAT_EVENT="statevent",Io.Ua="timingevent";var bp={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Nw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ow(){}var t_,Cp={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tp(){zi.call(this,"d")}function Sp(){zi.call(this,"c")}function nd(){}function Bc(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Gi(this),this.P=lb,this.V=new Xs(n=Lv?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Dm}function Dm(){this.i=null,this.g="",this.h=!1}nd.prototype.g=function(){return new XMLHttpRequest},nd.prototype.i=function(){return{}},t_=new nd;var lb=45e3,Ap={},Lh={};function bm(n,e,t){n.L=1,n.v=Rp(ka(e)),n.s=t,n.S=!0,n_(n,null)}function n_(n,e){n.G=Date.now(),rd(n),n.A=ka(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),gb(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Dm,n.g=eE(n.l,t?e:null,!n.s),0<n.O&&(n.M=new Em(Ai(n.Pa,n,n.g),n.O)),ed(n.U,n.g,"readystatechange",n.nb),e=n.I?Vv(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Oh(),function Mh(n,e,t,r,s,u){n.info(function(){if(n.g)if(u)for(var l="",g=u.split("&"),w=0;w<g.length;w++){var C=g[w].split("=");if(1<C.length){var S=C[0];C=C[1];var O=S.split("_");l=2<=O.length&&"type"==O[1]?l+(S+"=")+C+"&":l+(S+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Cm(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function r_(n,e,t){let s,r=!0;for(;!n.J&&n.C<t.length;){if(s=kw(n,t),s==Lh){4==e&&(n.o=4,Wi(14),r=!1),aa(n.j,n.m,null,"[Incomplete Response]");break}if(s==Ap){n.o=4,Wi(15),aa(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}aa(n.j,n.m,s,null),Sm(n,s)}Cm(n)&&s!=Lh&&s!=Ap&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Wi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Lm(e),e.M=!0,Wi(11))):(aa(n.j,n.m,t,"[Invalid Chunked Response]"),Vc(n),Fh(n))}function kw(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Lh:(t=Number(e.substring(t,r)),isNaN(t)?Ap:(r+=1)+t>e.length?Lh:(e=e.slice(r,r+t),n.C=r+t,e))}function rd(n){n.Y=Date.now()+n.P,i_(n,n.P)}function i_(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=kh(Ai(n.lb,n),e)}function Tm(n){n.B&&(Jt.clearTimeout(n.B),n.B=null)}function Fh(n){0==n.l.H||n.J||y_(n.l,n)}function Vc(n){Tm(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Xl(n.V),td(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Sm(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||u_(t.i,n)))if(!n.K&&u_(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Fp(t),od(t)}km(t),Wi(18)}}else t.Fa=s[1],0<t.Fa-t.V&&37500>s[2]&&t.G&&0==t.A&&!t.v&&(t.v=kh(Ai(t.ib,t),6e3));if(1>=$w(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ad(t,11)}else if((n.K||t.g==n)&&Fp(t),!Jl(e))for(s=t.Ja.g.parse(e),e=0;e<s.length;e++){let C=s[e];if(t.V=C[0],C=C[1],2==t.H)if("c"==C[0]){t.K=C[1],t.pa=C[2];const S=C[3];null!=S&&(t.ra=S,t.l.info("VER="+t.ra));const O=C[4];null!=O&&(t.Ga=O,t.l.info("SVER="+t.Ga));const z=C[5];null!=z&&"number"==typeof z&&0<z&&(t.L=r=1.5*z,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const J=n.g;if(J){const fe=J.g?J.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fe){var u=r.i;u.g||-1==fe.indexOf("spdy")&&-1==fe.indexOf("quic")&&-1==fe.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Mm(u,u.h),u.h=null))}if(r.F){const Fe=J.g?J.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(r.Da=Fe,Gn(r.I,r.F,Fe))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=Xw(r,r.J?r.pa:null,r.Y),l.K){Hw(r.i,l);var g=l,w=r.L;w&&g.setTimeout(w),g.B&&(Tm(g),rd(g)),r.g=l}else g_(r);0<t.j.length&&Lp(t)}else"stop"!=C[0]&&"close"!=C[0]||ad(t,7);else 3==t.H&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?ad(t,7):Pm(t):"noop"!=C[0]&&t.h&&t.h.Aa(C),t.A=0)}Oh()}catch{}}function Fw(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(am(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function db(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(am(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Lw(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(am(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),s=r.length,u=0;u<s;u++)e.call(void 0,r[u],t&&t[u],n)}(st=Bc.prototype).setTimeout=function(n){this.P=n},st.nb=function(n){n=n.target;const e=this.M;e&&3==Do(n)?e.l():this.Pa(n)},st.Pa=function(n){try{if(n==this.g)e:{const S=Do(this.g);var e=this.g.Ia();if(this.g.da(),!(3>S)&&(3!=S||Lv||this.g&&(this.h.h||this.g.ja()||Hh(this.g)))){this.J||4!=S||7==e||Oh(),Tm(this);var t=this.g.da();this.ca=t;t:if(Cm(this)){var r=Hh(this.g);n="";var s=r.length,u=4==Do(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Vc(this),Fh(this);var l="";break t}this.h.i=new Jt.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==s-1});r.splice(0,s),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function Rh(n,e,t,r,s,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.W,S,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var g,w=this.g;if((g=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jl(g)){var C=g;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Wi(12),Vc(this),Fh(this);break e}aa(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sm(this,t)}this.S?(r_(this,S,l),Lv&&this.i&&3==S&&(ed(this.U,this.V,"tick",this.mb),this.V.start())):(aa(this.j,this.m,l,null),Sm(this,l)),4==S&&Vc(this),this.i&&!this.J&&(4==S?y_(this.l,this):(this.i=!1,rd(this)))}else(function wb(n){const e={};n=(n.g&&2<=Do(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(Jl(n[r]))continue;var t=Pw(n[r]);const s=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[s]||[];e[s]=u,u.push(t)}!function Ew(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Wi(12)):(this.o=0,Wi(13)),Vc(this),Fh(this)}}}catch{}},st.mb=function(){if(this.g){var n=Do(this.g),e=this.g.ja();this.C<e.length&&(Tm(this),r_(this,n,e),this.i&&4!=n&&rd(this))}},st.cancel=function(){this.J=!0,Vc(this)},st.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function Ph(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Oh(),Wi(17)),Vc(this),this.o=2,Fh(this)):i_(this,this.Y-n)};var Uw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Pu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Pu){this.h=n.h,xp(this,n.j),this.s=n.s,this.g=n.g,Mp(this,n.m),this.l=n.l;var e=n.i,t=new sd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),s_(this,t),this.o=n.o}else n&&(e=String(n).match(Uw))?(this.h=!1,xp(this,e[1]||"",!0),this.s=Uh(e[2]||""),this.g=Uh(e[3]||"",!0),Mp(this,e[4]),this.l=Uh(e[5]||"",!0),s_(this,e[6]||"",!0),this.o=Uh(e[7]||"")):(this.h=!1,this.i=new sd(null,this.h))}function ka(n){return new Pu(n)}function xp(n,e,t){n.j=t?Uh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Mp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function s_(n,e,t){e instanceof sd?(n.i=e,function mb(n,e){e&&!n.j&&(jc(n),n.i=null,n.g.forEach(function(t,r){var s=r.toLowerCase();r!=s&&(xm(this,r),gb(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Bh(e,o_)),n.i=new sd(e,n.h))}function Gn(n,e,t){n.i.set(e,t)}function Rp(n){return Gn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Uh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Bh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Am),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Am(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Bh(e,Nu,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Bh(e,Nu,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Bh(t,"/"==t.charAt(0)?fb:hb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Bh(t,id)),n.join("")};var Nu=/[#\/\?@]/g,hb=/[#\?:]/g,fb=/[#\?]/g,o_=/[#\?@]/g,id=/#/g;function sd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function jc(n){n.g||(n.g=new Map,n.h=0,n.i&&function Bw(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),s=null;if(0<=r){var u=n[t].substring(0,r);s=n[t].substring(r+1)}else u=n[t];e(u,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function xm(n,e){jc(n),e=Vh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function pb(n,e){return jc(n),e=Vh(n,e),n.g.has(e)}function gb(n,e,t){xm(n,e),0<t.length&&(n.i=null,n.g.set(Vh(n,e),kv(t)),n.h+=t.length)}function Vh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function jw(n){this.l=n||ni,n=Jt.PerformanceNavigationTiming?0<(n=Jt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Jt.g&&Jt.g.Ka&&Jt.g.Ka()&&Jt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=sd.prototype).add=function(n,e){jc(this),this.i=null,n=Vh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){jc(this),this.g.forEach(function(t,r){t.forEach(function(s){n.call(e,s,r,this)},this)},this)},st.ta=function(){jc(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const s=n[r];for(let u=0;u<s.length;u++)t.push(e[r])}return t},st.Z=function(n){jc(this);let e=[];if("string"==typeof n)pb(this,n)&&(e=e.concat(this.g.get(Vh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return jc(this),this.i=null,pb(this,n=Vh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var s=u;""!==l[r]&&(s+="="+encodeURIComponent(String(l[r]))),n.push(s)}}return this.i=n.join("&")};var ni=10;function a_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $w(n){return n.h?1:n.g?n.g.size:0}function u_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Mm(n,e){n.g?n.g.add(e):n.h=e}function Hw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function c_(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return kv(n.i)}jw.prototype.cancel=function(){if(this.i=c_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var n,zw=class{stringify(n){return Jt.JSON.stringify(n,void 0)}parse(n){return Jt.JSON.parse(n,void 0)}};function jh(){this.g=new zw}function yb(n,e,t){const r=t||"";try{Fw(n,function(s,u){let l=s;um(s)&&(l=qv(s)),e.push(r+u+"="+encodeURIComponent(l))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Pp(n,e,t,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Np(n){this.l=n.fc||null,this.j=n.ob||!1}function Op(n,e){yi.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=Gw,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Np.prototype.g=function(){return new Op(this.l,this.j)},Np.prototype.i=(n={},function(){return n});var Gw=0;function l_(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function $h(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Rs(n)}function Rs(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=Op.prototype).open=function(n,e){if(this.readyState!=Gw)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Rs(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Jt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$h(this)),this.readyState=Gw},st.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Rs(this)),this.g&&(this.readyState=3,Rs(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Jt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;l_(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},st.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?$h(this):Rs(this),3==this.readyState&&l_(this)}},st.Za=function(n){this.g&&(this.response=this.responseText=n,$h(this))},st.Ya=function(n){this.g&&(this.response=n,$h(this))},st.ka=function(){this.g&&$h(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")};var _b=Jt.JSON.parse;function br(n){yi.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=ua,this.L=this.M=!1}var ua="",ca=/^https?$/i,la=["POST","PUT"];function d_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,qw(n),Rm(n)}function qw(n){n.F||(n.F=!0,xi(n,"complete"),xi(n,"error"))}function Kw(n){if(n.h&&typeof ms<"u"&&(!n.C[1]||4!=Do(n)||2!=n.da()))if(n.v&&4==Do(n))vi(n.La,0,n);else if(xi(n,"readystatechange"),4==Do(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var s=String(n.I).match(Uw)[1]||null;!s&&Jt.self&&Jt.self.location&&(s=Jt.self.location.protocol.slice(0,-1)),r=!ca.test(s?s.toLowerCase():"")}t=r}if(t)xi(n,"complete"),xi(n,"success");else{n.m=6;try{var u=2<Do(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",qw(n)}}finally{Rm(n)}}}function Rm(n,e){if(n.g){Zw(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||xi(n,"ready");try{t.onreadystatechange=r}catch{}}}function Zw(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Jt.clearTimeout(n.A),n.A=null)}function Do(n){return n.g?n.g.readyState:0}function Hh(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case ua:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function h_(n){let e="";return Bv(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function f_(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=h_(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Gn(n,e,t))}function kp(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function p_(n){this.Ga=0,this.j=[],this.l=new Ru,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=kp("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=kp("baseRetryDelayMs",5e3,n),this.hb=kp("retryDelaySeedMs",1e4,n),this.eb=kp("forwardChannelMaxRetries",2,n),this.xa=kp("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new jw(n&&n.concurrentRequestLimit),this.Ja=new jh,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Pm(n){if(Yw(n),3==n.H){var e=n.W++,t=ka(n.I);if(Gn(t,"SID",n.K),Gn(t,"RID",e),Gn(t,"TYPE","terminate"),$c(n,t),(e=new Bc(n,n.l,e)).L=2,e.v=Rp(ka(t)),t=!1,Jt.navigator&&Jt.navigator.sendBeacon)try{t=Jt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Jt.Image&&((new Image).src=e.v,t=!0),t||(e.g=eE(e.l,null),e.g.ha(e.v)),e.G=Date.now(),rd(e)}Jw(n)}function od(n){n.g&&(Lm(n),n.g.cancel(),n.g=null)}function Yw(n){od(n),n.u&&(Jt.clearTimeout(n.u),n.u=null),Fp(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Jt.clearTimeout(n.m),n.m=null)}function Lp(n){if(!a_(n.i)&&!n.m){n.m=!0;var e=n.Na;Fc||wm(),Ip||(Fc(),Ip=!0),Kv.add(e,n),n.C=0}}function Nm(n,e){var t;t=e?e.m:n.W++;const r=ka(n.I);Gn(r,"SID",n.K),Gn(r,"RID",t),Gn(r,"AID",n.V),$c(n,r),n.o&&n.s&&f_(r,n.o,n.s),t=new Bc(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=Om(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Mm(n.i,t),bm(t,r,e)}function $c(n,e){n.na&&Bv(n.na,function(t,r){Gn(e,r,t)}),n.h&&Fw({},function(t,r){Gn(e,r,t)})}function Om(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ai(n.h.Va,n.h,n):null;e:{var s=n.j;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=s[0].g,l.push("ofs="+u)):u=0:l.push("ofs="+u);let g=!0;for(let w=0;w<t;w++){let C=s[w].g;const S=s[w].map;if(C-=u,0>C)u=Math.max(0,s[w].g-100),g=!1;else try{yb(S,l,"req"+C+"_")}catch{r&&r(S)}}if(g){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function g_(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Fc||wm(),Ip||(Fc(),Ip=!0),Kv.add(e,n),n.A=0}}function km(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=kh(Ai(n.Ma,n),v_(n,n.A)),n.A++,0))}function Lm(n){null!=n.B&&(Jt.clearTimeout(n.B),n.B=null)}function m_(n){n.g=new Bc(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=ka(n.wa);Gn(e,"RID","rpc"),Gn(e,"SID",n.K),Gn(e,"AID",n.V),Gn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Gn(e,"TO",n.qa),Gn(e,"TYPE","xmlhttp"),$c(n,e),n.o&&n.s&&f_(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=Rp(ka(e)),t.s=null,t.S=!0,n_(t,n)}function Fp(n){null!=n.v&&(Jt.clearTimeout(n.v),n.v=null)}function y_(n,e){var t=null;if(n.g==e){Fp(n),Lm(n),n.g=null;var r=2}else{if(!u_(n.i,e))return;t=e.F,Hw(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var s=n.C;xi(r=Dp(),new Jv(r,t)),Lp(n)}else g_(n);else if(3==(s=e.o)||0==s&&0<e.ca||!(1==r&&function Qw(n,e){return!($w(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=kh(Ai(n.Na,n,e),v_(n,n.C)),n.C++,0)))}(n,e)||2==r&&km(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),s){case 1:ad(n,5);break;case 4:ad(n,10);break;case 3:ad(n,6);break;default:ad(n,2)}}function v_(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ad(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ai(n.pb,n);t||(t=new Pu("//www.google.com/images/cleardot.gif"),Jt.location&&"http"==Jt.location.protocol||xp(t,"https"),Rp(t)),function vb(n,e){const t=new Ru;if(Jt.Image){const r=new Image;r.onload=lm(Pp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=lm(Pp,t,r,"TestLoadImage: error",!1,e),r.onabort=lm(Pp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=lm(Pp,t,r,"TestLoadImage: timeout",!1,e),Jt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Wi(2);n.H=0,n.h&&n.h.za(e),Jw(n),Yw(n)}function Jw(n){if(n.H=0,n.ma=[],n.h){const e=c_(n.i);(0!=e.length||0!=n.j.length)&&(mw(n.ma,e),mw(n.ma,n.j),n.i.i.length=0,kv(n.j),n.j.length=0),n.h.ya()}}function Xw(n,e,t){var r=t instanceof Pu?ka(t):new Pu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Mp(r,r.m);else{var s=Jt.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var u=new Pu(null);r&&xp(u,r),e&&(u.g=e),s&&Mp(u,s),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&Gn(r,t,e),Gn(r,"VER",n.ra),$c(n,r),r}function eE(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new br(t&&n.Ha&&!n.va?new Np({ob:!0}):n.va)).Oa(n.J),e}function Fm(){if(Sh&&!(10<=Number(ww)))throw Error("Environmental error: no available transport.")}function eo(n,e){yi.call(this),this.g=new p_(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!Jl(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jl(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new zh(this)}function nE(n){Tp.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rE(){Sp.call(this),this.status=1}function zh(n){this.g=n}function da(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function __(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var s=0;16>s;++s)r[s]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(s=0;16>s;++s)r[s]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],l=(e=n.g[0])+(u^(t=n.g[1])&((s=n.g[2])^u))+r[0]+3614090360&4294967295;l=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=(t=(s=(u=(e=t+(l<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(u^t&(s^u))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=u+(s^e&(t^s))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=s+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^s&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^u&(t^s))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(s^u&(t^s))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=u+(t^s&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=s+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(u^e&(s^u))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^s^u)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^s^u)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=u+(e^t^s)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=s+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(s^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(s^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(s^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=s+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(u^(s|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((u=(e=t+((l=e+(s^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=u+(t^(e|~s))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((s=u+((l=s+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(s+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+s&4294967295,n.g[3]=n.g[3]+u&4294967295}function Mn(n,e){this.h=e;for(var t=[],r=!0,s=n.length-1;0<=s;s--){var u=0|n[s];r&&u==e||(t[s]=u,r=!1)}this.g=t}(st=br.prototype).Oa=function(n){this.M=n},st.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():t_.g(),this.C=function e_(n){return n.h||(n.h=n.i())}(this.u?this.u:t_),this.g.onreadystatechange=Ai(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void d_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)t.set(s,r[s]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),s=Jt.FormData&&n instanceof Jt.FormData,!(0<=gw(la,e))||r||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Zw(this),0<this.B&&((this.L=function Ww(n){return Sh&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ai(this.ua,this)):this.A=vi(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){d_(this,u)}},st.ua=function(){typeof ms<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,xi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,xi(this,"complete"),xi(this,"abort"),Rm(this))},st.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rm(this,!0)),br.$.N.call(this)},st.La=function(){this.s||(this.G||this.v||this.l?Kw(this):this.kb())},st.kb=function(){Kw(this)},st.isActive=function(){return!!this.g},st.da=function(){try{return 2<Do(this)?this.g.status:-1}catch{return-1}},st.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},st.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),_b(e)}},st.Ia=function(){return this.m},st.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=p_.prototype).ra=8,st.H=1,st.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const s=new Bc(this,this.l,n);let u=this.s;if(this.U&&(u?(u=Vv(u),Dw(u,this.U)):u=this.U),null!==this.o||this.O||(s.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Om(this,s,e),Gn(t=ka(this.I),"RID",n),Gn(t,"CVER",22),this.F&&Gn(t,"X-HTTP-Session-Id",this.F),$c(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(h_(u)))+"&"+e:this.o&&f_(t,this.o,u)),Mm(this.i,s),this.bb&&Gn(t,"TYPE","init"),this.P?(Gn(t,"$req",e),Gn(t,"SID","null"),s.aa=!0,bm(s,t,null)):bm(s,t,e),this.H=2}}else 3==this.H&&(n?Nm(this,n):0==this.j.length||a_(this.i)||Nm(this))},st.Ma=function(){if(this.u=null,m_(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=kh(Ai(this.jb,this),n)}},st.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wi(10),od(this),m_(this))},st.ib=function(){null!=this.v&&(this.v=null,od(this),km(this),Wi(19))},st.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Wi(2)):(this.l.info("Failed to ping google.com"),Wi(1))},st.isActive=function(){return!!this.h&&this.h.isActive(this)},(st=function tE(){}.prototype).Ba=function(){},st.Aa=function(){},st.za=function(){},st.ya=function(){},st.isActive=function(){return!0},st.Va=function(){},Fm.prototype.g=function(n,e){return new eo(n,e)},eo.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Wi(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=Xw(n,null,n.Y),Lp(n)},eo.prototype.close=function(){Pm(this.g)},eo.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qv(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Lp(e)},eo.prototype.N=function(){this.g.h=null,delete this.j,Pm(this.g),delete this.g,eo.$.N.call(this)},zh.prototype.Ba=function(){xi(this.g,"a")},zh.prototype.Aa=function(n){xi(this.g,new nE(n))},zh.prototype.za=function(n){xi(this.g,new rE)},zh.prototype.ya=function(){xi(this.g,"b")},da.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},da.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,s=this.h,u=0;u<e;){if(0==s)for(;u<=t;)__(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[s++]=n.charCodeAt(u++),s==this.blockSize){__(this,r),s=0;break}}else for(;u<e;)if(r[s++]=n[u++],s==this.blockSize){__(this,r),s=0;break}}this.h=s,this.i+=e},da.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Ib={};function w_(n){return-128<=n&&128>n?function ib(n,e){var t=Ib;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Mn([0|e],0>e?-1:0)}):new Mn([0|n],0>n?-1:0)}function La(n){if(isNaN(n)||!isFinite(n))return ud;if(0>n)return _i(La(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Um;return new Mn(e,0)}var Um=4294967296,ud=w_(0),Bm=w_(1),E_=w_(16777216);function Fa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function to(n){return-1==n.h}function _i(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Mn(t,~n.h).add(Bm)}function Up(n,e){return n.add(_i(e))}function Bp(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Gh(n,e){this.g=n,this.h=e}function Vp(n,e){if(Fa(e))throw Error("division by zero");if(Fa(n))return new Gh(ud,ud);if(to(n))return e=Vp(_i(n),e),new Gh(_i(e.g),_i(e.h));if(to(e))return e=Vp(n,_i(e)),new Gh(_i(e.g),e.h);if(30<n.g.length){if(to(n)||to(e))throw Error("slowDivide_ only works with positive integers.");for(var t=Bm,r=e;0>=r.X(n);)t=Hc(t),r=Hc(r);var s=Wh(t,1),u=Wh(r,1);for(r=Wh(r,2),t=Wh(t,2);!Fa(r);){var l=u.add(r);0>=l.X(n)&&(s=s.add(t),u=l),r=Wh(r,1),t=Wh(t,1)}return e=Up(n,s.R(e)),new Gh(s,e)}for(s=ud;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(u=La(t)).R(e);to(l)||0<l.X(n);)l=(u=La(t-=r)).R(e);Fa(u)&&(u=Bm),s=s.add(u),n=Up(n,l)}return new Gh(s,n)}function Hc(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Mn(t,n.h)}function Wh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,s=[],u=0;u<r;u++)s[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new Mn(s,n.h)}(st=Mn.prototype).ea=function(){if(to(this))return-_i(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Um+r)*e,e*=Um}return n},st.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Fa(this))return"0";if(to(this))return"-"+_i(this).toString(n);for(var e=La(Math.pow(n,6)),t=this,r="";;){var s=Vp(t,e).g,u=((0<(t=Up(t,s.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Fa(t=s))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},st.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},st.X=function(n){return to(n=Up(this,n))?-1:Fa(n)?0:1},st.abs=function(){return to(this)?_i(this):this},st.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,s=0;s<=e;s++){var u=r+(65535&this.D(s))+(65535&n.D(s)),l=(u>>>16)+(this.D(s)>>>16)+(n.D(s)>>>16);r=l>>>16,t[s]=(l&=65535)<<16|(u&=65535)}return new Mn(t,-2147483648&t[t.length-1]?-1:0)},st.R=function(n){if(Fa(this)||Fa(n))return ud;if(to(this))return to(n)?_i(this).R(_i(n)):_i(_i(this).R(n));if(to(n))return _i(this.R(_i(n)));if(0>this.X(E_)&&0>n.X(E_))return La(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<n.g.length;s++){var u=this.D(r)>>>16,l=65535&this.D(r),g=n.D(s)>>>16,w=65535&n.D(s);t[2*r+2*s]+=l*w,Bp(t,2*r+2*s),t[2*r+2*s+1]+=u*w,Bp(t,2*r+2*s+1),t[2*r+2*s+1]+=l*g,Bp(t,2*r+2*s+1),t[2*r+2*s+2]+=u*g,Bp(t,2*r+2*s+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Mn(t,0)},st.gb=function(n){return Vp(this,n).h},st.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Mn(t,this.h&n.h)},st.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Mn(t,this.h|n.h)},st.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Mn(t,this.h^n.h)},Fm.prototype.createWebChannel=Fm.prototype.g,eo.prototype.send=eo.prototype.u,eo.prototype.open=eo.prototype.m,eo.prototype.close=eo.prototype.close,bp.NO_ERROR=0,bp.TIMEOUT=8,bp.HTTP_ERROR=6,Nw.COMPLETE="complete",Ow.EventType=Cp,Cp.OPEN="a",Cp.CLOSE="b",Cp.ERROR="c",Cp.MESSAGE="d",yi.prototype.listen=yi.prototype.O,br.prototype.listenOnce=br.prototype.P,br.prototype.getLastError=br.prototype.Sa,br.prototype.getLastErrorCode=br.prototype.Ia,br.prototype.getStatus=br.prototype.da,br.prototype.getResponseJson=br.prototype.Wa,br.prototype.getResponseText=br.prototype.ja,br.prototype.send=br.prototype.ha,br.prototype.setWithCredentials=br.prototype.Oa,da.prototype.digest=da.prototype.l,da.prototype.reset=da.prototype.reset,da.prototype.update=da.prototype.j,Mn.prototype.add=Mn.prototype.add,Mn.prototype.multiply=Mn.prototype.R,Mn.prototype.modulo=Mn.prototype.gb,Mn.prototype.compare=Mn.prototype.X,Mn.prototype.toNumber=Mn.prototype.ea,Mn.prototype.toString=Mn.prototype.toString,Mn.prototype.getBits=Mn.prototype.D,Mn.fromNumber=La,Mn.fromString=function iE(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return _i(iE(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=La(Math.pow(e,8)),r=ud,s=0;s<n.length;s+=8){var u=Math.min(8,n.length-s),l=parseInt(n.substring(s,s+u),e);8>u?(u=La(Math.pow(e,u)),r=r.R(u).add(La(l))):r=(r=r.R(t)).add(La(l))}return r};var Db=oa.createWebChannelTransport=function(){return new Fm},qh=oa.getStatEventTarget=function(){return Dp()},sE=oa.ErrorCode=bp,I_=oa.EventType=Nw,zS=oa.Event=Io,D_=oa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},oE=oa.FetchXmlHttpFactory=Np,b_=oa.WebChannel=Ow,Ot=oa.XhrIo=br,bb=oa.Md5=da,Kh=oa.Integer=Mn;class cr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cr.UNAUTHENTICATED=new cr(null),cr.GOOGLE_CREDENTIALS=new cr("google-credentials-uid"),cr.FIRST_PARTY=new cr("first-party-uid"),cr.MOCK_USER=new cr("mock-user");let Zh="9.23.0";const ha=new Oc.Yd("@firebase/firestore");function Yh(){return ha.logLevel}function ze(n,...e){if(ha.logLevel<=Oc.in.DEBUG){const t=e.map(C_);ha.debug(`Firestore (${Zh}): ${n}`,...t)}}function Tr(n,...e){if(ha.logLevel<=Oc.in.ERROR){const t=e.map(C_);ha.error(`Firestore (${Zh}): ${n}`,...t)}}function no(n,...e){if(ha.logLevel<=Oc.in.WARN){const t=e.map(C_);ha.warn(`Firestore (${Zh}): ${n}`,...t)}}function C_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function lt(n="Unexpected state"){const e=`FIRESTORE (${Zh}) INTERNAL ASSERTION FAILED: `+n;throw Tr(e),new Error(e)}function Dt(n,e){n||lt()}function nt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Pe extends yn.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Cb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(cr.UNAUTHENTICATED))}shutdown(){}}class Vm{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=cr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class cE{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new Vm(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(cr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}function jp(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Jh{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=jp(40);for(let u=0;u<s.length;++u)r.length<20&&s[u]<t&&(r+=e.charAt(s[u]%e.length))}return r}}function Kt(n,e){return n<e?-1:n>e?1:0}function Xh(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}class Qn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Pe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qn.fromMillis(Date.now())}static fromDate(e){return Qn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Qn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Kt(this.nanoseconds,e.nanoseconds):Kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ct{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ct(e)}static min(){return new Ct(new Qn(0,0))}static max(){return new Ct(new Qn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ef{constructor(e,t,r){void 0===t?t=0:t>e.length&&lt(),void 0===r?r=e.length-t:r>e.length-t&&lt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ef.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ef?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const u=e.get(s),l=t.get(s);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class gn extends ef{construct(e,t,r){return new gn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Pe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new gn(t)}static emptyPath(){return new gn([])}}const hE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Sr extends ef{construct(e,t,r){return new Sr(e,t,r)}static isValidIdentifier(e){return hE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Sr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Sr(["__name__"])}static fromServerFormat(e){const t=[];let r="",s=0;const u=()=>{if(0===r.length)throw new Pe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;s<e.length;){const g=e[s];if("\\"===g){if(s+1===e.length)throw new Pe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[s+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Pe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,s+=2}else"`"===g?(l=!l,s++):"."!==g||l?(r+=g,s++):(u(),s++)}if(u(),l)throw new Pe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Sr(t)}static emptyPath(){return new Sr([])}}class et{constructor(e){this.path=e}static fromPath(e){return new et(gn.fromString(e))}static fromName(e){return new et(gn.fromString(e).popFirst(5))}static empty(){return new et(gn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===gn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return gn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new et(new gn(e.slice()))}}function A_(n){return new Mi(n.readTime,n.key,-1)}class Mi{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Mi(Ct.min(),et.empty(),-1)}static max(){return new Mi(Ct.max(),et.empty(),-1)}}function x_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=et.comparator(n.documentKey,e.documentKey),0!==t?t:Kt(n.largestBatchId,e.largestBatchId))}const gE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function zc(n){return yE.apply(this,arguments)}function yE(){return yE=(0,be.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==gE)throw n;ze("LocalStore","Unexpectedly lost primary lease")}),yE.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,s)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,s)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let s=0,u=0,l=!1;e.forEach(g=>{++s,g.next(()=>{++u,l&&u===s&&t()},w=>r(w))}),l=!0,u===s&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(s=>s?se.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,u)=>{r.push(t.call(this,s,u))}),this.waitFor(r)}static mapArray(e,t){return new se((r,s)=>{const u=e.length,l=new Array(u);let g=0;for(let w=0;w<u;w++){const C=w;t(e[C]).next(S=>{l[C]=S,++g,g===u&&r(l)},S=>s(S))}})}static doWhile(e,t){return new se((r,s)=>{const u=()=>{!0===e()?t().next(()=>{u()},s):r()};u()})}}function Gc(n){return"IndexedDbTransactionError"===n.name}let ys=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=s=>this.ot(s),this.ut=s=>r.writeSequenceNumber(s))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Gp(n){return null==n}function nf(n){return 0===n&&1/n==-1/0}function TE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Wc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ld(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Bn{constructor(e,t){this.comparator=e,this.root=t||Ki.EMPTY}insert(e,t){return new Bn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ki.BLACK,null,null))}remove(e){return new Bn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ki.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(0===s)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new zm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new zm(this.root,e,this.comparator,!1)}getReverseIterator(){return new zm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new zm(this.root,e,this.comparator,!0)}}class zm{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&s&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ki{constructor(e,t,r,s,u){this.key=e,this.value=t,this.color=r??Ki.RED,this.left=s??Ki.EMPTY,this.right=u??Ki.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,u){return new Ki(e??this.key,t??this.value,r??this.color,s??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const u=r(e,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(e,t,r),null):0===u?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ki.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Ki.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ki.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ki.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw lt();const e=this.left.check();if(e!==this.right.check())throw lt();return e+(this.isRed()?0:1)}}Ki.EMPTY=null,Ki.RED=!0,Ki.BLACK=!1,Ki.EMPTY=new class{constructor(){this.size=0}get key(){throw lt()}get value(){throw lt()}get color(){throw lt()}get left(){throw lt()}get right(){throw lt()}copy(n,e,t,r,s){return this}insert(n,e,t){return new Ki(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wn{constructor(e){this.comparator=e,this.data=new Bn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gm(this.data.getIterator())}getIteratorFrom(e){return new Gm(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Wn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(s,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Wn(this.comparator);return t.data=e,t}}class Gm{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Zi{constructor(e){this.fields=e,e.sort(Sr.comparator)}static empty(){return new Zi([])}unionWith(e){let t=new Wn(Sr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Zi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class SE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new SE("Invalid base64 string: "+s):s}}(e);return new Or(t)}static fromUint8Array(e){const t=function(r){let s="";for(let u=0;u<r.length;++u)s+=String.fromCharCode(r[u]);return s}(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const xE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ku(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=xE.exec(n);if(Dt(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:lr(n.seconds),nanos:lr(n.nanos)}}function lr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Ua(n){return"string"==typeof n?Or.fromBase64String(n):Or.fromUint8Array(n)}function Wm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function qm(n){const e=n.mapValue.fields.__previous_value__;return Wm(e)?qm(e):e}function qp(n){const e=ku(n.mapValue.fields.__local_write_time__.timestampValue);return new Qn(e.seconds,e.nanos)}class zb{constructor(e,t,r,s,u,l,g,w,C){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=g,this.longPollingOptions=w,this.useFetchStreams=C}}class Lu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Lu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Lu&&e.projectId===this.projectId&&e.database===this.database}}const dd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function qc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Wm(n)?4:af(n)?9007199254740991:10:lt()}function Ba(n,e){if(n===e)return!0;const t=qc(n);if(t!==qc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return qp(n).isEqual(qp(e));case 3:return function(r,s){if("string"==typeof r.timestampValue&&"string"==typeof s.timestampValue&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const u=ku(r.timestampValue),l=ku(s.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,Ua(n.bytesValue).isEqual(Ua(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return lr(r.geoPointValue.latitude)===lr(s.geoPointValue.latitude)&&lr(r.geoPointValue.longitude)===lr(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return lr(r.integerValue)===lr(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const u=lr(r.doubleValue),l=lr(s.doubleValue);return u===l?nf(u)===nf(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return Xh(n.arrayValue.values||[],e.arrayValue.values||[],Ba);case 10:return function(r,s){const u=r.mapValue.fields||{},l=s.mapValue.fields||{};if(TE(u)!==TE(l))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===l[g]||!Ba(u[g],l[g])))return!1;return!0}(n,e);default:return lt()}var s}function Km(n,e){return void 0!==(n.values||[]).find(t=>Ba(t,e))}function Kc(n,e){if(n===e)return 0;const t=qc(n),r=qc(e);if(t!==r)return Kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Kt(n.booleanValue,e.booleanValue);case 2:return function(s,u){const l=lr(s.integerValue||s.doubleValue),g=lr(u.integerValue||u.doubleValue);return l<g?-1:l>g?1:l===g?0:isNaN(l)?isNaN(g)?0:-1:1}(n,e);case 3:return ME(n.timestampValue,e.timestampValue);case 4:return ME(qp(n),qp(e));case 5:return Kt(n.stringValue,e.stringValue);case 6:return function(s,u){const l=Ua(s),g=Ua(u);return l.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(s,u){const l=s.split("/"),g=u.split("/");for(let w=0;w<l.length&&w<g.length;w++){const C=Kt(l[w],g[w]);if(0!==C)return C}return Kt(l.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,u){const l=Kt(lr(s.latitude),lr(u.latitude));return 0!==l?l:Kt(lr(s.longitude),lr(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,u){const l=s.values||[],g=u.values||[];for(let w=0;w<l.length&&w<g.length;++w){const C=Kc(l[w],g[w]);if(C)return C}return Kt(l.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,u){if(s===dd.mapValue&&u===dd.mapValue)return 0;if(s===dd.mapValue)return 1;if(u===dd.mapValue)return-1;const l=s.fields||{},g=Object.keys(l),w=u.fields||{},C=Object.keys(w);g.sort(),C.sort();for(let S=0;S<g.length&&S<C.length;++S){const O=Kt(g[S],C[S]);if(0!==O)return O;const z=Kc(l[g[S]],w[C[S]]);if(0!==z)return z}return Kt(g.length,C.length)}(n.mapValue,e.mapValue);default:throw lt()}}function ME(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Kt(n,e);const t=ku(n),r=ku(e),s=Kt(t.seconds,r.seconds);return 0!==s?s:Kt(t.nanos,r.nanos)}function sf(n){return Zm(n)}function Zm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const s=ku(r);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Ua(n.bytesValue).toBase64():"referenceValue"in n?et.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let s="[",u=!0;for(const l of r.values||[])u?u=!1:s+=",",s+=Zm(l);return s+"]"}(n.arrayValue):"mapValue"in n?function(r){const s=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const g of s)l?l=!1:u+=",",u+=`${g}:${Zm(r.fields[g])}`;return u+"}"}(n.mapValue):lt();var e}function hd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function L_(n){return!!n&&"integerValue"in n}function Zp(n){return!!n&&"arrayValue"in n}function RE(n){return!!n&&"nullValue"in n}function PE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Qm(n){return!!n&&"mapValue"in n}function Yp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Wc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Yp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function af(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}class wi{constructor(e){this.value=e}static empty(){return new wi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Qm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yp(t)}setAll(e){let t=Sr.emptyPath(),r={},s=[];e.forEach((l,g)=>{if(!t.isImmediateParentOf(g)){const w=this.getFieldsMap(t);this.applyChanges(w,r,s),r={},s=[],t=g.popLast()}l?r[g.lastSegment()]=Yp(l):s.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,s)}delete(e){const t=this.field(e.popLast());Qm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Qm(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Wc(t,(s,u)=>e[s]=u);for(const s of r)delete e[s]}clone(){return new wi(Yp(this.value))}}function kE(n){const e=[];return Wc(n.fields,(t,r)=>{const s=new Sr([t]);if(Qm(r)){const u=kE(r.mapValue).fields;if(0===u.length)e.push(s);else for(const l of u)e.push(s.child(l))}else e.push(s)}),new Zi(e)}class Jn{constructor(e,t,r,s,u,l,g){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=u,this.data=l,this.documentState=g}static newInvalidDocument(e){return new Jn(e,0,Ct.min(),Ct.min(),Ct.min(),wi.empty(),0)}static newFoundDocument(e,t,r,s){return new Jn(e,1,t,Ct.min(),r,s,0)}static newNoDocument(e,t){return new Jn(e,2,t,Ct.min(),Ct.min(),wi.empty(),0)}static newUnknownDocument(e,t){return new Jn(e,3,t,Ct.min(),Ct.min(),wi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ct.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=wi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=wi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ct.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class fd{constructor(e,t){this.position=e,this.inclusive=t}}function LE(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const u=e[s],l=n.position[s];if(r=u.field.isKeyField()?et.comparator(et.fromName(l.referenceValue),t.key):Kc(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function FE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ba(n.position[t],e.position[t]))return!1;return!0}class uf{constructor(e,t="asc"){this.field=e,this.dir=t}}function Gb(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class UE{}class un extends UE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Xm(e,t,r):"array-contains"===t?new HE(e,r):"in"===t?new V_(e,r):"not-in"===t?new j_(e,r):"array-contains-any"===t?new zE(e,r):new un(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new ey(e,r):new Wb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Kc(t,this.value)):null!==t&&qc(this.value)===qc(t)&&this.matchesComparison(Kc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Rn extends UE{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Rn(e,t)}matches(e){return Zc(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Zc(n){return"and"===n.op}function B_(n){return function Jm(n){for(const e of n.filters)if(e instanceof Rn)return!1;return!0}(n)&&Zc(n)}function pd(n){if(n instanceof un)return n.field.canonicalString()+n.op.toString()+sf(n.value);if(B_(n))return n.filters.map(e=>pd(e)).join(",");{const e=n.filters.map(t=>pd(t)).join(",");return`${n.op}(${e})`}}function BE(n,e){return n instanceof un?(t=n,(r=e)instanceof un&&t.op===r.op&&t.field.isEqual(r.field)&&Ba(t.value,r.value)):n instanceof Rn?function(t,r){return r instanceof Rn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((s,u,l)=>s&&BE(u,r.filters[l]),!0)}(n,e):void lt();var t,r}function jE(n){return n instanceof un?`${(e=n).field.canonicalString()} ${e.op} ${sf(e.value)}`:n instanceof Rn?function(e){return e.op.toString()+" {"+e.getFilters().map(jE).join(" ,")+"}"}(n):"Filter";var e}class Xm extends un{constructor(e,t,r){super(e,t,r),this.key=et.fromName(r.referenceValue)}matches(e){const t=et.comparator(e.key,this.key);return this.matchesComparison(t)}}class ey extends un{constructor(e,t){super(e,"in",t),this.keys=$E(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Wb extends un{constructor(e,t){super(e,"not-in",t),this.keys=$E(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $E(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>et.fromName(r.referenceValue))}class HE extends un{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Zp(t)&&Km(t.arrayValue,this.value)}}class V_ extends un{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Km(this.value.arrayValue,t)}}class j_ extends un{constructor(e,t){super(e,"not-in",t)}matches(e){if(Km(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Km(this.value.arrayValue,t)}}class zE extends un{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Zp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Km(this.value.arrayValue,r))}}class $_{constructor(e,t=null,r=[],s=[],u=null,l=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=u,this.startAt=l,this.endAt=g,this.dt=null}}function Qp(n,e=null,t=[],r=[],s=null,u=null,l=null){return new $_(n,e,t,r,s,u,l)}function Yc(n){const e=nt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>pd(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),Gp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sf(r)).join(",")),e.dt=t}return e.dt}function gd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Gb(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!FE(n.startAt,e.startAt)&&FE(n.endAt,e.endAt)}function cf(n){return et.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Fu{constructor(e,t=null,r=[],s=[],u=null,l="F",g=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=u,this.limitType=l,this.startAt=g,this.endAt=w,this.wt=null,this._t=null}}function Qc(n){return new Fu(n)}function z_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function G_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Jp(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ny(n){return null!==n.collectionGroup}function md(n){const e=nt(n);if(null===e.wt){e.wt=[];const t=Jp(e),r=G_(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new uf(t)),e.wt.push(new uf(Sr.keyField(),"asc"));else{let s=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(s=!0);if(!s){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new uf(Sr.keyField(),u))}}}return e.wt}function Yi(n){const e=nt(n);if(!e._t)if("F"===e.limitType)e._t=Qp(e.path,e.collectionGroup,md(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of md(e))t.push(new uf(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new fd(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new fd(e.startAt.position,e.startAt.inclusive):null;e._t=Qp(e.path,e.collectionGroup,t,e.filters,e.limit,r,s)}return e._t}function ry(n,e){e.getFirstInequalityField(),Jp(n);const t=n.filters.concat([e]);return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function iy(n,e,t){return new Fu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lf(n,e){return gd(Yi(n),Yi(e))&&n.limitType===e.limitType}function qE(n){return`${Yc(Yi(n))}|lt:${n.limitType}`}function Ri(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>jE(r)).join(", ")}]`),Gp(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(s=r).field.canonicalString()} (${s.dir})`;var s}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>sf(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>sf(r)).join(",")),`Target(${t})`}(Yi(n))}; limitType=${n.limitType})`}function Va(n,e){return e.isFoundDocument()&&function(t,r){const s=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):et.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,r){for(const s of md(t))if(!s.field.isKeyField()&&null===r.data.field(s.field))return!1;return!0}(n,e)&&function(t,r){for(const s of t.filters)if(!s.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(s,u,l){const g=LE(s,u,l);return s.inclusive?g<=0:g<0}(t.startAt,md(t),r)||t.endAt&&!function(s,u,l){const g=LE(s,u,l);return s.inclusive?g>=0:g>0}(t.endAt,md(t),r)));var t,r}function ZE(n){return(e,t)=>{let r=!1;for(const s of md(n)){const u=qS(s,e,t);if(0!==u)return u;r=r||s.field.isKeyField()}return 0}}function qS(n,e,t){const r=n.field.isKeyField()?et.comparator(e.key,t.key):function(s,u,l){const g=u.data.field(s),w=l.data.field(s);return null!==g&&null!==w?Kc(g,w):lt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return lt()}}class Jc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[s,u]of r)if(this.equalsFn(s,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(void 0===s)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<s.length;u++)if(this.equalsFn(s[u][0],e))return void(s[u]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return 1===r.length?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wc(this.inner,(t,r)=>{for(const[s,u]of r)e(s,u)})}isEmpty(){return ld(this.inner)}size(){return this.innerSize}}const YE=new Bn(et.comparator);function Qi(){return YE}const df=new Bn(et.comparator);function Xp(...n){let e=df;for(const t of n)e=e.insert(t.key,t);return e}function sy(n){let e=df;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ja(){return eg()}function W_(){return eg()}function eg(){return new Jc(n=>n.toString(),(n,e)=>n.isEqual(e))}const qb=new Bn(et.comparator),Kb=new Wn(et.comparator);function en(...n){let e=Kb;for(const t of n)e=e.add(t);return e}const QE=new Wn(Kt);function tg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nf(e)?"-0":e}}function ay(n){return{integerValue:""+n}}function Zb(n,e){return function P_(n){return"number"==typeof n&&Number.isInteger(n)&&!nf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}(e)?ay(e):tg(n,e)}class ng{constructor(){this._=void 0}}function Yb(n,e,t){return n instanceof hf?function(r,s){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&Wm(s)&&(s=qm(s)),s&&(u.fields.__previous_value__=s),{mapValue:u}}(t,e):n instanceof Xc?uy(n,e):n instanceof ff?XE(n,e):function(r,s){const u=yd(r,s),l=eI(u)+eI(r.gt);return L_(u)&&L_(r.gt)?ay(l):tg(r.serializer,l)}(n,e)}function JE(n,e,t){return n instanceof Xc?uy(n,e):n instanceof ff?XE(n,e):t}function yd(n,e){return n instanceof rg?L_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class hf extends ng{}class Xc extends ng{constructor(e){super(),this.elements=e}}function uy(n,e){const t=tI(e);for(const r of n.elements)t.some(s=>Ba(s,r))||t.push(r);return{arrayValue:{values:t}}}class ff extends ng{constructor(e){super(),this.elements=e}}function XE(n,e){let t=tI(e);for(const r of n.elements)t=t.filter(s=>!Ba(s,r));return{arrayValue:{values:t}}}class rg extends ng{constructor(e,t){super(),this.serializer=e,this.gt=t}}function eI(n){return lr(n.integerValue||n.doubleValue)}function tI(n){return Zp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class rI{constructor(e,t){this.version=e,this.transformResults=t}}class rr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rr}static exists(e){return new rr(void 0,e)}static updateTime(e){return new rr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class og{}function iI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new ag(n.key,rr.none()):new vd(n.key,n.data,rr.none());{const t=n.data,r=wi.empty();let s=new Wn(Sr.comparator);for(let u of e.fields)if(!s.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),s=s.add(u)}return new $a(n.key,r,new Zi(s.toArray()),rr.none())}}function Qb(n,e,t){n instanceof vd?function(r,s,u){const l=r.value.clone(),g=sI(r.fieldTransforms,s,u.transformResults);l.setAll(g),s.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof $a?function(r,s,u){if(!sg(r.precondition,s))return void s.convertToUnknownDocument(u.version);const l=sI(r.fieldTransforms,s,u.transformResults),g=s.data;g.setAll(K_(r)),g.setAll(l),s.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function pf(n,e,t,r){return n instanceof vd?function(s,u,l,g){if(!sg(s.precondition,u))return l;const w=s.value.clone(),C=oI(s.fieldTransforms,g,u);return w.setAll(C),u.convertToFoundDocument(u.version,w).setHasLocalMutations(),null}(n,e,t,r):n instanceof $a?function(s,u,l,g){if(!sg(s.precondition,u))return l;const w=oI(s.fieldTransforms,g,u),C=u.data;return C.setAll(K_(s)),C.setAll(w),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===l?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(S=>S.field))}(n,e,t,r):(l=t,sg(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function Jb(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),u=yd(r.transform,s||null);null!=u&&(null===t&&(t=wi.empty()),t.set(r.field,u))}return t||null}function q_(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Xh(t,r,(s,u)=>function nI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Xc&&r instanceof Xc||t instanceof ff&&r instanceof ff?Xh(t.elements,r.elements,Ba):t instanceof rg&&r instanceof rg?Ba(t.gt,r.gt):t instanceof hf&&r instanceof hf);var t,r}(s,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class vd extends og{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class $a extends og{constructor(e,t,r,s,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function K_(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function sI(n,e,t){const r=new Map;Dt(n.length===t.length);for(let s=0;s<t.length;s++){const u=n[s],l=u.transform,g=e.data.field(u.field);r.set(u.field,JE(l,g,t[s]))}return r}function oI(n,e,t){const r=new Map;for(const s of n){const u=s.transform,l=t.data.field(s.field);r.set(s.field,Yb(u,l,e))}return r}class ag extends og{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class cy extends og{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class aI{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const u=this.mutations[s];u.key.isEqual(e.key)&&Qb(u,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=pf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=pf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=W_();return this.mutations.forEach(s=>{const u=e.get(s.key),l=u.overlayedDocument;let g=this.applyToLocalView(l,u.mutatedFields);g=t.has(s.key)?null:g;const w=iI(l,g);null!==w&&r.set(s.key,w),l.isValidDocument()||l.convertToNoDocument(Ct.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),en())}isEqual(e){return this.batchId===e.batchId&&Xh(this.mutations,e.mutations,(t,r)=>q_(t,r))&&Xh(this.baseMutations,e.baseMutations,(t,r)=>q_(t,r))}}class uI{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){Dt(e.mutations.length===r.length);let s=qb;const u=e.mutations;for(let l=0;l<u.length;l++)s=s.insert(u[l].key,r[l].version);return new uI(e,t,r,s)}}class cI{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ZS{constructor(e,t){this.count=e,this.unchangedNames=t}}var ii,vn;function ug(n){if(void 0===n)return Tr("GRPC error has no .code"),pe.UNKNOWN;switch(n){case ii.OK:return pe.OK;case ii.CANCELLED:return pe.CANCELLED;case ii.UNKNOWN:return pe.UNKNOWN;case ii.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case ii.INTERNAL:return pe.INTERNAL;case ii.UNAVAILABLE:return pe.UNAVAILABLE;case ii.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case ii.NOT_FOUND:return pe.NOT_FOUND;case ii.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case ii.ABORTED:return pe.ABORTED;case ii.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case ii.DATA_LOSS:return pe.DATA_LOSS;default:return lt()}}(vn=ii||(ii={}))[vn.OK=0]="OK",vn[vn.CANCELLED=1]="CANCELLED",vn[vn.UNKNOWN=2]="UNKNOWN",vn[vn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vn[vn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vn[vn.NOT_FOUND=5]="NOT_FOUND",vn[vn.ALREADY_EXISTS=6]="ALREADY_EXISTS",vn[vn.PERMISSION_DENIED=7]="PERMISSION_DENIED",vn[vn.UNAUTHENTICATED=16]="UNAUTHENTICATED",vn[vn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vn[vn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vn[vn.ABORTED=10]="ABORTED",vn[vn.OUT_OF_RANGE=11]="OUT_OF_RANGE",vn[vn.UNIMPLEMENTED=12]="UNIMPLEMENTED",vn[vn.INTERNAL=13]="INTERNAL",vn[vn.UNAVAILABLE=14]="UNAVAILABLE",vn[vn.DATA_LOSS=15]="DATA_LOSS";class lI{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return cg}static getOrCreateInstance(){return null===cg&&(cg=new lI),cg}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let cg=null;const dI=new Kh([4294967295,4294967295],0);function Z_(n){const e=function lg(){return new TextEncoder}().encode(n),t=new bb;return t.update(e),new Uint8Array(t.digest())}function eC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Kh([t,r],0),new Kh([s,u],0)]}class dg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new gf(`Invalid padding: ${t}`);if(r<0)throw new gf(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new gf(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new gf(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Kh.fromNumber(this.It)}Et(e,t,r){let s=e.add(t.multiply(Kh.fromNumber(r)));return 1===s.compare(dI)&&(s=new Kh([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Z_(e),[r,s]=eC(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);if(!this.At(l))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),l=new dg(u,s,t);return r.forEach(g=>l.insert(g)),l}insert(e){if(0===this.It)return;const t=Z_(e),[r,s]=eC(t);for(let u=0;u<this.hashCount;u++){const l=this.Et(r,s,u);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class gf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class hg{constructor(e,t,r,s,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ly.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new hg(Ct.min(),s,new Bn(Kt),Qi(),en())}}class ly{constructor(e,t,r,s,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ly(r,t,en(),en(),en())}}class Y_{constructor(e,t,r,s){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=s}}class hI{constructor(e,t){this.targetId=e,this.Vt=t}}class fI{constructor(e,t,r=Or.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class fg{constructor(){this.St=0,this.Dt=rC(),this.Ct=Or.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=en(),t=en(),r=en();return this.Dt.forEach((s,u)=>{switch(u){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:lt()}}),new ly(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=rC()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class tC{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Qi(),this.zt=nC(),this.Wt=new Bn(Kt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:lt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,s)=>{this.te(s)&&t(s)})}ne(e){var t;const r=e.targetId,s=e.Vt.count,u=this.se(r);if(u){const l=u.target;if(cf(l))if(0===s){const g=new et(l.path);this.Yt(r,g,Jn.newNoDocument(g,Ct.min()))}else Dt(1===s);else{const g=this.ie(r);if(g!==s){const w=this.re(e,g);0!==w&&(this.ee(r),this.Wt=this.Wt.insert(r,2===w?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=lI.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(C,S,O){var z,J,fe,Fe,$e,dt;const Rt={localCacheCount:S,existenceFilterCount:O.count},At=O.unchangedNames;return At&&(Rt.bloomFilter={applied:0===C,hashCount:null!==(z=At?.hashCount)&&void 0!==z?z:0,bitmapLength:null!==(Fe=null===(fe=null===(J=At?.bits)||void 0===J?void 0:J.bitmap)||void 0===fe?void 0:fe.length)&&void 0!==Fe?Fe:0,padding:null!==(dt=null===($e=At?.bits)||void 0===$e?void 0:$e.padding)&&void 0!==dt?dt:0}),Rt}(w,g,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:s}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:l=0},hashCount:g=0}=r;let w,C;try{w=Ua(u).toUint8Array()}catch(S){if(S instanceof SE)return no("Decoding the base64 bloom filter in existence filter failed ("+S.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw S}try{C=new dg(w,l,g)}catch(S){return no(S instanceof gf?"BloomFilter error: ":"Applying bloom filter failed: ",S),1}return 0===C.It?1:s!==t-this.oe(e.targetId,C)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let s=0;return r.forEach(u=>{const l=this.Gt.ue(),g=`projects/${l.projectId}/databases/${l.database}/documents/${u.path.canonicalString()}`;t.vt(g)||(this.Yt(e,u,null),s++)}),s}ce(e){const t=new Map;this.Qt.forEach((u,l)=>{const g=this.se(l);if(g){if(u.current&&cf(g.target)){const w=new et(g.target.path);null!==this.jt.get(w)||this.ae(l,w)||this.Yt(l,w,Jn.newNoDocument(w,e))}u.Mt&&(t.set(l,u.Ot()),u.Ft())}});let r=en();this.zt.forEach((u,l)=>{let g=!0;l.forEachWhile(w=>{const C=this.se(w);return!C||"TargetPurposeLimboResolution"===C.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.jt.forEach((u,l)=>l.setReadTime(e));const s=new hg(e,t,this.Wt,this.jt,r);return this.jt=Qi(),this.zt=nC(),this.Wt=new Bn(Kt),s}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const s=this.Zt(e);this.ae(e,t)?s.Bt(t,1):s.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new fg,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Wn(Kt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ze("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new fg),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function nC(){return new Bn(et.comparator)}function rC(){return new Bn(et.comparator)}const YS=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),iC=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),sC=(()=>({and:"AND",or:"OR"}))();class oC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pI(n,e){return n.useProto3Json||Gp(e)?e:{value:e}}function mf(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Q_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function gI(n,e){return mf(n,e.toTimestamp())}function jr(n){return Dt(!!n),Ct.fromTimestamp(function(e){const t=ku(e);return new Qn(t.seconds,t.nanos)}(n))}function ro(n,e){return(t=n,new gn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mI(n){const e=gn.fromString(n);return Dt(bI(e)),e}function _d(n,e){return ro(n.databaseId,e.path)}function Ha(n,e){const t=mI(e);if(t.get(1)!==n.databaseId.projectId)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Pe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new et(dy(t))}function yI(n,e){return ro(n.databaseId,e)}function pg(n){return new gn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dy(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function vI(n,e,t){return{name:_d(n,e),fields:t.value.mapValue.fields}}function e0(n,e){return{documents:[yI(n,e.path)]}}function t0(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=yI(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yI(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(w){if(0!==w.length)return DI(Rn.create(w,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:za((S=C).field),direction:Uu(S.dir)};var S})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=pI(n,e.limit);var g,w;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function n0(n){let e=function io(n){const e=mI(n);return 4===e.length?gn.emptyPath():dy(e)}(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){Dt(1===r);const S=t.from[0];S.allDescendants?s=S.collectionId:e=e.child(S.collectionId)}let u=[];t.where&&(u=function(S){const O=hy(S);return O instanceof Rn&&B_(O)?O.getFilters():[O]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(S=>{return new uf(wd((O=S).field),function(z){switch(z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(O.direction));var O}));let g=null;t.limit&&(g=function(S){let O;return O="object"==typeof S?S.value:S,Gp(O)?null:O}(t.limit));let w=null;var S;t.startAt&&(w=new fd((S=t.startAt).values||[],!!S.before));let C=null;return t.endAt&&(C=function(S){return new fd(S.values||[],!S.before)}(t.endAt)),function H_(n,e,t,r,s,u,l,g){return new Fu(n,e,t,r,s,u,l,g)}(e,s,l,u,g,"F",w,C)}function hy(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=wd(e.unaryFilter.field);return un.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=wd(e.unaryFilter.field);return un.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=wd(e.unaryFilter.field);return un.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wd(e.unaryFilter.field);return un.create(u,"!=",{nullValue:"NULL_VALUE"});default:return lt()}}(n):void 0!==n.fieldFilter?un.create(wd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return Rn.create(e.compositeFilter.filters.map(t=>hy(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return lt()}}(e.compositeFilter.op))}(n):lt();var e}function Uu(n){return YS[n]}function el(n){return iC[n]}function II(n){return sC[n]}function za(n){return{fieldPath:n.canonicalString()}}function wd(n){return Sr.fromServerFormat(n.fieldPath)}function DI(n){return n instanceof un?function(e){if("=="===e.op){if(PE(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NAN"}};if(RE(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(PE(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NAN"}};if(RE(e.value))return{unaryFilter:{field:za(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:za(e.field),op:el(e.op),value:e.value}}}(n):n instanceof Rn?function(e){const t=e.getFilters().map(r=>DI(r));return 1===t.length?t[0]:{compositeFilter:{op:II(e.op),filters:t}}}(n):lt()}function QS(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Bu{constructor(e,t,r,s,u=Ct.min(),l=Ct.min(),g=Or.EMPTY_BYTE_STRING,w=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=g,this.expectedCount=w}withSequenceNumber(e){return new Bu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Bu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class CI{constructor(e){this.fe=e}}function gy(n){const e=n0({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?iy(e,e.limit,"L"):e}class Id{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(lr(e.integerValue));else if("doubleValue"in e){const r=lr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),nf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Ua(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?af(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):lt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const s of Object.keys(r))this.Te(s,t),this.me(r[s],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const s of r)this.me(s,t)}ve(e,t){this.ye(t,37),et.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}Id.Ve=new Id;class l0{constructor(){this.rn=new Eg}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Mi.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Mi.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class Eg{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Wn(gn.comparator),u=!s.has(r);return this.index[t]=s.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Wn(gn.comparator)).toArray()}}class Pi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(41943040,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class Td{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Td(0)}static Mn(){return new Td(-1)}}class PI{constructor(){this.changes=new Jc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class DC{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(null!==r&&pf(r.mutation,s,Zi.empty(),Qn.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,en()).next(()=>r))}getLocalViewOfDocuments(e,t,r=en()){const s=ja();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(u=>{let l=Xp();return u.forEach((g,w)=>{l=l.insert(g,w.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ja();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,en()))}populateOverlays(e,t,r){const s=[];return r.forEach(u=>{t.has(u)||s.push(u)}),this.documentOverlayCache.getOverlays(e,s).next(u=>{u.forEach((l,g)=>{t.set(l,g)})})}computeViews(e,t,r,s){let u=Qi();const l=eg(),g=eg();return t.forEach((w,C)=>{const S=r.get(C.key);s.has(C.key)&&(void 0===S||S.mutation instanceof $a)?u=u.insert(C.key,C):void 0!==S?(l.set(C.key,S.mutation.getFieldMask()),pf(S.mutation,C,S.mutation.getFieldMask(),Qn.now())):l.set(C.key,Zi.empty())}),this.recalculateAndSaveOverlays(e,u).next(w=>(w.forEach((C,S)=>l.set(C,S)),t.forEach((C,S)=>{var O;return g.set(C,new iA(S,null!==(O=l.get(C))&&void 0!==O?O:null))}),g))}recalculateAndSaveOverlays(e,t){const r=eg();let s=new Bn((l,g)=>l-g),u=en();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const g of l)g.keys().forEach(w=>{const C=t.get(w);if(null===C)return;let S=r.get(w)||Zi.empty();S=g.applyToLocalView(C,S),r.set(w,S);const O=(s.get(g.batchId)||en()).add(w);s=s.insert(g.batchId,O)})}).next(()=>{const l=[],g=s.getReverseIterator();for(;g.hasNext();){const w=g.getNext(),C=w.key,S=w.value,O=W_();S.forEach(z=>{if(!u.has(z)){const J=iI(t.get(z),r.get(z));null!==J&&O.set(z,J),u=u.add(z)}}),l.push(this.documentOverlayCache.saveOverlays(e,C,O))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return et.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ny(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var s}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(u=>{const l=s-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-u.size):se.resolve(ja());let g=-1,w=u;return l.next(C=>se.forEach(C,(S,O)=>(g<O.largestBatchId&&(g=O.largestBatchId),u.get(S)?se.resolve():this.remoteDocumentCache.getEntry(e,S).next(z=>{w=w.insert(S,z)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,w,C,en())).next(S=>({batchId:g,changes:sy(S)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new et(t)).next(r=>{let s=Xp();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const s=t.collectionGroup;let u=Xp();return this.indexManager.getCollectionParents(e,s).next(l=>se.forEach(l,g=>{const w=(C=t,S=g.child(s),new Fu(S,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,S;return this.getDocumentsMatchingCollectionQuery(e,w,r).next(C=>{C.forEach((S,O)=>{u=u.insert(S,O)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(s=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s))).next(u=>{s.forEach((g,w)=>{const C=w.getKey();null===u.get(C)&&(u=u.insert(C,Jn.newInvalidDocument(C)))});let l=Xp();return u.forEach((g,w)=>{const C=s.get(g);void 0!==C&&pf(C.mutation,w,Zi.empty(),Qn.now()),Va(t,w)&&(l=l.insert(g,w))}),l})}}class sA{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:jr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:gy(r.bundledQuery),readTime:jr(r.readTime)}),se.resolve();var r}}class oA{constructor(){this.overlays=new Bn(et.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ja();return se.forEach(t,s=>this.getOverlay(e,s).next(u=>{null!==u&&r.set(s,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,u)=>{this.we(e,t,u)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.ls.get(r);return void 0!==s&&(s.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const s=ja(),u=t.length+1,l=new et(t.child("")),g=this.overlays.getIteratorFrom(l);for(;g.hasNext();){const w=g.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&s.set(w.getKey(),w)}return se.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let u=new Bn((C,S)=>C-S);const l=this.overlays.getIterator();for(;l.hasNext();){const C=l.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let S=u.get(C.largestBatchId);null===S&&(S=ja(),u=u.insert(C.largestBatchId,S)),S.set(C.getKey(),C)}}const g=ja(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,S)=>g.set(C,S)),!(g.size()>=s)););return se.resolve(g)}we(e,t,r){const s=this.overlays.get(r.key);if(null!==s){const l=this.ls.get(s.largestBatchId).delete(r.key);this.ls.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new cI(t,r));let u=this.ls.get(t);void 0===u&&(u=en(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class i{constructor(){this.fs=new Wn(o.ds),this.ws=new Wn(o._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new o(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new o(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new et(new gn([])),r=new o(t,e),s=new o(t,e+1),u=[];return this.ws.forEachInRange([r,s],l=>{this.ys(l),u.push(l.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new et(new gn([])),r=new o(t,e),s=new o(t,e+1);let u=en();return this.ws.forEachInRange([r,s],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new o(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class o{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return et.comparator(e.key,t.key)||Kt(e.As,t.As)}static _s(e,t){return Kt(e.As,t.As)||et.comparator(e.key,t.key)}}class a{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Wn(o.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,s){const u=this.vs;this.vs++;const l=new aI(u,t,r,s);this.mutationQueue.push(l);for(const g of s)this.Rs=this.Rs.add(new o(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.bs(t+1),u=s<0?0:s;return se.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new o(t,0),s=new o(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,s],l=>{const g=this.Ps(l.As);u.push(g)}),se.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Wn(Kt);return t.forEach(s=>{const u=new o(s,0),l=new o(s,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,l],g=>{r=r.add(g.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let u=r;et.isDocumentKey(u)||(u=u.child(""));const l=new o(new et(u),0);let g=new Wn(Kt);return this.Rs.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===s&&(g=g.add(w.As)),!0)},l),se.resolve(this.Vs(g))}Vs(e){const t=[];return e.forEach(r=>{const s=this.Ps(r);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){Dt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,s=>{const u=new o(s.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new o(t,0),s=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class c{constructor(e){this.Ds=e,this.docs=new Bn(et.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),u=s?s.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Jn.newInvalidDocument(t))}getEntries(e,t){let r=Qi();return t.forEach(s=>{const u=this.docs.get(s);r=r.insert(s,u?u.document.mutableCopy():Jn.newInvalidDocument(s))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let u=Qi();const l=t.path,g=new et(l.child("")),w=this.docs.getIteratorFrom(g);for(;w.hasNext();){const{key:C,value:{document:S}}=w.getNext();if(!l.isPrefixOf(C.path))break;C.path.length>l.length+1||x_(A_(S),r)<=0||(s.has(S.key)||Va(t,S))&&(u=u.insert(S.key,S.mutableCopy()))}return se.resolve(u)}getAllFromCollectionGroup(e,t,r,s){lt()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new d(this)}getSize(e){return se.resolve(this.size)}}class d extends PI{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.os.addEntry(e,s)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class p{constructor(e){this.persistence=e,this.xs=new Jc(t=>Yc(t),gd),this.lastRemoteSnapshotVersion=Ct.min(),this.highestTargetId=0,this.Ns=0,this.ks=new i,this.targetCount=0,this.Ms=Td.kn()}forEachTarget(e,t){return this.xs.forEach((r,s)=>t(s)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Td(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let s=0;const u=[];return this.xs.forEach((l,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.xs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),s++)}),se.waitFor(u).next(()=>s)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const s=this.persistence.referenceDelegate,u=[];return s&&t.forEach(l=>{u.push(s.markPotentiallyOrphaned(e,l))}),se.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class v{constructor(e,t){this.$s={},this.overlays={},this.Os=new ys(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new p(this),this.indexManager=new l0,this.remoteDocumentCache=new c(r=>this.referenceDelegate.Ls(r)),this.serializer=new CI(t),this.qs=new sA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new a(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ze("MemoryPersistence","Starting transaction:",e);const s=new I(this.Os.next());return this.referenceDelegate.Us(),r(s).next(u=>this.referenceDelegate.Ks(s).next(()=>u)).toPromise().then(u=>(s.raiseOnCommittedEvent(),u))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class I extends mE{constructor(e){super(),this.currentSequenceNumber=e}}class b{constructor(e){this.persistence=e,this.Qs=new i,this.js=null}static zs(e){return new b(e)}get Ws(){if(this.js)return this.js;throw lt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(s=>this.Ws.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const s=et.fromPath(r);return this.Hs(e,s).next(u=>{u||t.removeEntry(s,Ct.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class _t{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=s}static Li(e,t){let r=en(),s=en();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:s=s.add(u.doc.key)}return new _t(e,t.fromCache,r,s)}}class kt{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,s){return this.Ki(e,t).next(u=>u||this.Gi(e,t,s,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(z_(t))return se.resolve(null);let r=Yi(t);return this.indexManager.getIndexType(e,r).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=iy(t,null,"F"),r=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=en(...u);return this.Ui.getDocuments(e,l).next(g=>this.indexManager.getMinOffset(e,r).next(w=>{const C=this.ji(t,g);return this.zi(t,C,l,w.readTime)?this.Ki(e,iy(t,null,"F")):this.Wi(e,C,t,w)}))})))}Gi(e,t,r,s){return z_(t)||s.isEqual(Ct.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const l=this.ji(t,u);return this.zi(t,l,r,s)?this.Qi(e,t):(Yh()<=Oc.in.DEBUG&&ze("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ri(t)),this.Wi(e,l,t,function pE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ct.fromTimestamp(1e9===r?new Qn(t+1,0):new Qn(t,r));return new Mi(s,et.empty(),e)}(s,-1)))})}ji(e,t){let r=new Wn(ZE(e));return t.forEach((s,u)=>{Va(e,u)&&(r=r.add(u))}),r}zi(e,t,r,s){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(s)>0)}Qi(e,t){return Yh()<=Oc.in.DEBUG&&ze("QueryEngine","Using full collection scan to execute query:",Ri(t)),this.Ui.getDocumentsMatchingQuery(e,t,Mi.min())}Wi(e,t,r,s){return this.Ui.getDocumentsMatchingQuery(e,r,s).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class je{constructor(e,t,r,s){this.persistence=e,this.Hi=t,this.serializer=s,this.Ji=new Bn(Kt),this.Yi=new Jc(u=>Yc(u),gd),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new DC(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Xn(n,e){return dr.apply(this,arguments)}function dr(){return dr=(0,be.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(u=>(s=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],g=[];let w=en();for(const C of s){l.push(C.batchId);for(const S of C.mutations)w=w.add(S.key)}for(const C of u){g.push(C.batchId);for(const S of C.mutations)w=w.add(S.key)}return t.localDocuments.getDocuments(r,w).next(C=>({er:C,removedBatchIds:l,addedBatchIds:g}))})})}),dr.apply(this,arguments)}function uA(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function xM(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ty(n,e,t){return bC.apply(this,arguments)}function bC(){return bC=(0,be.Z)(function*(n,e,t){const r=nt(n),s=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,s)))}catch(l){if(!Gc(l))throw l;ze("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(s.target)}),bC.apply(this,arguments)}function NI(n,e,t){const r=nt(n);let s=Ct.min(),u=en();return r.persistence.runTransaction("Execute query","readonly",l=>function(g,w,C){const S=nt(g),O=S.Yi.get(C);return void 0!==O?se.resolve(S.Ji.get(O)):S.Bs.getTargetData(w,C)}(r,l,Yi(e)).next(g=>{if(g)return s=g.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,g.targetId).next(w=>{u=w})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?s:Ct.min(),t?u:en())).next(g=>(function hA(n,e,t){let r=n.Xi.get(e)||Ct.min();t.forEach((s,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}(r,function KE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}(e),g),{documents:g,ir:u})))}class xC{constructor(){this.activeTargetIds=function oy(){return QE}()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class gA{constructor(){this.Hr=new xC,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new xC,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PM{Yr(e){}shutdown(){}}class mA{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ze("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ze("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let LI=null;function RC(){return null===LI?LI=268435456+Math.round(2147483648*Math.random()):LI++,"0x"+LI.toString(16)}const NM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class OM{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ps="WebChannelConnection";class kM extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,s,u){const l=RC(),g=this.To(e,t);ze("RestConnection",`Sending RPC '${e}' ${l}:`,g,r);const w={};return this.Eo(w,s,u),this.Ao(e,g,w,r).then(C=>(ze("RestConnection",`Received RPC '${e}' ${l}: `,C),C),C=>{throw no("RestConnection",`RPC '${e}' ${l} failed with error: `,C,"url: ",g,"request:",r),C})}vo(e,t,r,s,u,l){return this.Io(e,t,r,s,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Zh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,u)=>e[u]=s),r&&r.headers.forEach((s,u)=>e[u]=s)}To(e,t){return`${this.mo}/v1/${t}:${NM[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,s){const u=RC();return new Promise((l,g)=>{const w=new Ot;w.setWithCredentials(!0),w.listenOnce(I_.COMPLETE,()=>{try{switch(w.getLastErrorCode()){case sE.NO_ERROR:const S=w.getResponseJson();ze(Ps,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(S)),l(S);break;case sE.TIMEOUT:ze(Ps,`RPC '${e}' ${u} timed out`),g(new Pe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case sE.HTTP_ERROR:const O=w.getStatus();if(ze(Ps,`RPC '${e}' ${u} failed with status:`,O,"response text:",w.getResponseText()),O>0){let z=w.getResponseJson();Array.isArray(z)&&(z=z[0]);const J=z?.error;if(J&&J.status&&J.message){const fe=function(Fe){const $e=Fe.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf($e)>=0?$e:pe.UNKNOWN}(J.status);g(new Pe(fe,J.message))}else g(new Pe(pe.UNKNOWN,"Server responded with status "+w.getStatus()))}else g(new Pe(pe.UNAVAILABLE,"Connection failed."));break;default:lt()}}finally{ze(Ps,`RPC '${e}' ${u} completed.`)}});const C=JSON.stringify(s);ze(Ps,`RPC '${e}' ${u} sending request:`,s),w.send(t,"POST",C,r,15)})}Ro(e,t,r){const s=RC(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Db(),g=qh(),w={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},C=this.longPollingOptions.timeoutSeconds;void 0!==C&&(w.longPollingTimeout=Math.round(1e3*C)),this.useFetchStreams&&(w.xmlHttpFactory=new oE({})),this.Eo(w.initMessageHeaders,t,r),w.encodeInitMessageHeaders=!0;const S=u.join("");ze(Ps,`Creating RPC '${e}' stream ${s}: ${S}`,w);const O=l.createWebChannel(S,w);let z=!1,J=!1;const fe=new OM({ro:$e=>{J?ze(Ps,`Not sending because RPC '${e}' stream ${s} is closed:`,$e):(z||(ze(Ps,`Opening RPC '${e}' stream ${s} transport.`),O.open(),z=!0),ze(Ps,`RPC '${e}' stream ${s} sending:`,$e),O.send($e))},oo:()=>O.close()}),Fe=($e,dt,Rt)=>{$e.listen(dt,At=>{try{Rt(At)}catch(Vt){setTimeout(()=>{throw Vt},0)}})};return Fe(O,b_.EventType.OPEN,()=>{J||ze(Ps,`RPC '${e}' stream ${s} transport opened.`)}),Fe(O,b_.EventType.CLOSE,()=>{J||(J=!0,ze(Ps,`RPC '${e}' stream ${s} transport closed`),fe.wo())}),Fe(O,b_.EventType.ERROR,$e=>{J||(J=!0,no(Ps,`RPC '${e}' stream ${s} transport errored:`,$e),fe.wo(new Pe(pe.UNAVAILABLE,"The operation could not be completed")))}),Fe(O,b_.EventType.MESSAGE,$e=>{var dt;if(!J){const Rt=$e.data[0];Dt(!!Rt);const Vt=Rt.error||(null===(dt=Rt[0])||void 0===dt?void 0:dt.error);if(Vt){ze(Ps,`RPC '${e}' stream ${s} received error:`,Vt);const rn=Vt.status;let _n=function(Mg){const SM=ii[Mg];if(void 0!==SM)return ug(SM)}(rn),Ns=Vt.message;void 0===_n&&(_n=pe.INTERNAL,Ns="Unknown error status: "+rn+" with message "+Vt.message),J=!0,fe.wo(new Pe(_n,Ns)),O.close()}else ze(Ps,`RPC '${e}' stream ${s} received:`,Rt),fe._o(Rt)}}),Fe(g,zS.STAT_EVENT,$e=>{$e.stat===D_.PROXY?ze(Ps,`RPC '${e}' stream ${s} detected buffering proxy`):$e.stat===D_.NOPROXY&&ze(Ps,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{fe.fo()},0),fe}}function FI(){return typeof document<"u"?document:null}function y0(n){return new oC(n,!0)}class PC{constructor(e,t,r=1e3,s=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=s,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),s=Math.max(0,t-r);s>0&&ze("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,s,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class vA{constructor(e,t,r,s,u,l,g,w){this.ii=e,this.$o=r,this.Oo=s,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=g,this.listener=w,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new PC(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,be.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,be.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,be.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(Tr(t.toString()),Tr("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Fo===t&&this.Zo(r,s)},r=>{e(()=>{const s=new Pe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(s)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(s=>{r(()=>this.tu(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Go(){var e=this;this.state=5,this.qo.No((0,be.Z)(function*(){e.state=0,e.start()}))}tu(e){return ze("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ze("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LM extends vA{constructor(e,t,r,s,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function wI(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:lt(),s=e.targetChange.targetIds||[],u=function(w,C){return w.useProto3Json?(Dt(void 0===C||"string"==typeof C),Or.fromBase64String(C||"")):(Dt(void 0===C||C instanceof Uint8Array),Or.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,g=l&&function(w){const C=void 0===w.code?pe.UNKNOWN:ug(w.code);return new Pe(C,w.message||"")}(l);t=new fI(r,s,u,g||null)}else if("documentChange"in e){const r=e.documentChange,s=Ha(n,r.document.name),u=jr(r.document.updateTime),l=r.document.createTime?jr(r.document.createTime):Ct.min(),g=new wi({mapValue:{fields:r.document.fields}}),w=Jn.newFoundDocument(s,u,l,g);t=new Y_(r.targetIds||[],r.removedTargetIds||[],w.key,w)}else if("documentDelete"in e){const r=e.documentDelete,s=Ha(n,r.document),u=r.readTime?jr(r.readTime):Ct.min(),l=Jn.newNoDocument(s,u);t=new Y_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,s=Ha(n,r.document);t=new Y_([],r.removedTargetIds||[],s,null)}else{if(!("filter"in e))return lt();{const r=e.filter,{count:s=0,unchangedNames:u}=r,l=new ZS(s,u);t=new hI(r.targetId,l)}}var w;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Ct.min();const u=s.targetChange;return u.targetIds&&u.targetIds.length?Ct.min():u.readTime?jr(u.readTime):Ct.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=pg(this.serializer),t.addTarget=function(s,u){let l;const g=u.target;if(l=cf(g)?{documents:e0(s,g)}:{query:t0(s,g)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){l.resumeToken=Q_(s,u.resumeToken);const w=pI(s,u.expectedCount);null!==w&&(l.expectedCount=w)}else if(u.snapshotVersion.compareTo(Ct.min())>0){l.readTime=mf(s,u.snapshotVersion.toTimestamp());const w=pI(s,u.expectedCount);null!==w&&(l.expectedCount=w)}return l}(this.serializer,e);const r=function aC(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=pg(this.serializer),t.removeTarget=e,this.Wo(t)}}class FM extends vA{constructor(e,t,r,s,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,l),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function EI(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,s){let u=jr(r.updateTime?r.updateTime:s);return u.isEqual(Ct.min())&&(u=jr(s)),new rI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=jr(e.commitTime);return this.listener.cu(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=pg(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>function yf(n,e){let t;if(e instanceof vd)t={update:vI(n,e.key,e.value)};else if(e instanceof ag)t={delete:_d(n,e.key)};else if(e instanceof $a)t={update:vI(n,e.key,e.data),updateMask:QS(e.fieldMask)};else{if(!(e instanceof cy))return lt();t={verify:_d(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,u){const l=u.transform;if(l instanceof hf)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Xc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ff)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof rg)return{fieldPath:u.field.canonicalString(),increment:l.gt};throw lt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:gI(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:lt()),t;var s}(this.serializer,r))};this.Wo(t)}}class UM extends class{}{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.lu=!1}fu(){if(this.lu)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection.Io(e,t,r,s,u)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Pe(pe.UNKNOWN,s.toString())})}vo(e,t,r,s){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection.vo(e,t,r,u,l,s)).catch(u=>{throw"FirebaseError"===u.name?(u.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Pe(pe.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class VM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Tr(t),this.mu=!1):ze("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class jM{constructor(e,t,r,s,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(g=>{r.enqueueAndForget((0,be.Z)(function*(){var w;wf(l)&&(ze("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,be.Z)(function*(C){const S=nt(C);S.vu.add(4),yield Sy(S),S.bu.set("Unknown"),S.vu.delete(4),yield v0(S)}),function(C){return w.apply(this,arguments)})(l))}))}),this.bu=new VM(r,s)}}function v0(n){return OC.apply(this,arguments)}function OC(){return OC=(0,be.Z)(function*(n){if(wf(n))for(const e of n.Ru)yield e(!0)}),OC.apply(this,arguments)}function Sy(n){return kC.apply(this,arguments)}function kC(){return kC=(0,be.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),kC.apply(this,arguments)}function UI(n,e){const t=nt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),UC(t)?FC(t):xy(t).Ko()&&LC(t,e))}function _0(n,e){const t=nt(n),r=xy(t);t.Au.delete(e),r.Ko()&&_A(t,e),0===t.Au.size&&(r.Ko()?r.jo():wf(t)&&t.bu.set("Unknown"))}function LC(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ct.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}xy(n).su(e)}function _A(n,e){n.Vu.qt(e),xy(n).iu(e)}function FC(n){n.Vu=new tC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),xy(n).start(),n.bu.gu()}function UC(n){return wf(n)&&!xy(n).Uo()&&n.Au.size>0}function wf(n){return 0===nt(n).vu.size}function wA(n){n.Vu=void 0}function $M(n){return BC.apply(this,arguments)}function BC(){return BC=(0,be.Z)(function*(n){n.Au.forEach((e,t)=>{LC(n,e)})}),BC.apply(this,arguments)}function HM(n,e){return VC.apply(this,arguments)}function VC(){return VC=(0,be.Z)(function*(n,e){wA(n),UC(n)?(n.bu.Iu(e),FC(n)):n.bu.set("Unknown")}),VC.apply(this,arguments)}function zM(n,e,t){return jC.apply(this,arguments)}function jC(){return jC=(0,be.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof fI&&2===e.state&&e.cause)try{yield(r=(0,be.Z)(function*(s,u){const l=u.cause;for(const g of u.targetIds)s.Au.has(g)&&(yield s.remoteSyncer.rejectListen(g,l),s.Au.delete(g),s.Vu.removeTarget(g))}),function(s,u){return r.apply(this,arguments)})(n,e)}catch(r){ze("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield BI(n,r)}else if(e instanceof Y_?n.Vu.Ht(e):e instanceof hI?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Ct.min()))try{const r=yield uA(n.localStore);t.compareTo(r)>=0&&(yield function(s,u){const l=s.Vu.ce(u);return l.targetChanges.forEach((g,w)=>{if(g.resumeToken.approximateByteSize()>0){const C=s.Au.get(w);C&&s.Au.set(w,C.withResumeToken(g.resumeToken,u))}}),l.targetMismatches.forEach((g,w)=>{const C=s.Au.get(g);if(!C)return;s.Au.set(g,C.withResumeToken(Or.EMPTY_BYTE_STRING,C.snapshotVersion)),_A(s,g);const S=new Bu(C.target,g,w,C.sequenceNumber);LC(s,S)}),s.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){ze("RemoteStore","Failed to raise snapshot:",r),yield BI(n,r)}var r}),jC.apply(this,arguments)}function BI(n,e,t){return $C.apply(this,arguments)}function $C(){return $C=(0,be.Z)(function*(n,e,t){if(!Gc(e))throw e;n.vu.add(1),yield Sy(n),n.bu.set("Offline"),t||(t=()=>uA(n.localStore)),n.asyncQueue.enqueueRetryable((0,be.Z)(function*(){ze("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield v0(n)}))}),$C.apply(this,arguments)}function EA(n,e){return e().catch(t=>BI(n,t,e))}function Ay(n){return HC.apply(this,arguments)}function HC(){return HC=(0,be.Z)(function*(n){const e=nt(n),t=Ef(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;GM(e);)try{const s=yield xM(e.localStore,r);if(null===s){0===e.Eu.length&&t.jo();break}r=s.batchId,WM(e,s)}catch(s){yield BI(e,s)}IA(e)&&DA(e)}),HC.apply(this,arguments)}function GM(n){return wf(n)&&n.Eu.length<10}function WM(n,e){n.Eu.push(e);const t=Ef(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function IA(n){return wf(n)&&!Ef(n).Uo()&&n.Eu.length>0}function DA(n){Ef(n).start()}function qM(n){return zC.apply(this,arguments)}function zC(){return zC=(0,be.Z)(function*(n){Ef(n).hu()}),zC.apply(this,arguments)}function KM(n){return GC.apply(this,arguments)}function GC(){return GC=(0,be.Z)(function*(n){const e=Ef(n);for(const t of n.Eu)e.uu(t.mutations)}),GC.apply(this,arguments)}function ZM(n,e,t){return WC.apply(this,arguments)}function WC(){return WC=(0,be.Z)(function*(n,e,t){const r=n.Eu.shift(),s=uI.from(r,e,t);yield EA(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield Ay(n)}),WC.apply(this,arguments)}function YM(n,e){return qC.apply(this,arguments)}function qC(){return qC=(0,be.Z)(function*(n,e){var t;e&&Ef(n).ou&&(yield(t=(0,be.Z)(function*(r,s){if(function Xb(n){switch(n){default:return lt();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}(u=s.code)&&u!==pe.ABORTED){const l=r.Eu.shift();Ef(r).Qo(),yield EA(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),yield Ay(r)}var u}),function(r,s){return t.apply(this,arguments)})(n,e)),IA(n)&&DA(n)}),qC.apply(this,arguments)}function bA(n,e){return KC.apply(this,arguments)}function KC(){return KC=(0,be.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),ze("RemoteStore","RemoteStore received new credentials");const r=wf(t);t.vu.add(3),yield Sy(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield v0(t)}),KC.apply(this,arguments)}function YC(){return YC=(0,be.Z)(function*(n,e){const t=nt(n);e?(t.vu.delete(2),yield v0(t)):e||(t.vu.add(2),yield Sy(t),t.bu.set("Unknown"))}),YC.apply(this,arguments)}function xy(n){return n.Su||(n.Su=function(e,t,r){const s=nt(e);return s.fu(),new LM(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:$M.bind(null,n),ao:HM.bind(null,n),nu:zM.bind(null,n)}),n.Ru.push(function(){var e=(0,be.Z)(function*(t){t?(n.Su.Qo(),UC(n)?FC(n):n.bu.set("Unknown")):(yield n.Su.stop(),wA(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Ef(n){return n.Du||(n.Du=function(e,t,r){const s=nt(e);return s.fu(),new FM(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{uo:qM.bind(null,n),ao:YM.bind(null,n),au:KM.bind(null,n),cu:ZM.bind(null,n)}),n.Ru.push(function(){var e=(0,be.Z)(function*(t){t?(n.Du.Qo(),yield Ay(n)):(yield n.Du.stop(),n.Eu.length>0&&(ze("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class QC{constructor(e,t,r,s,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=u,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,s,u){const l=Date.now()+r,g=new QC(e,t,l,s,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Pe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function My(n,e){if(Tr("AsyncQueue",`${e}: ${n}`),Gc(n))return new Pe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class Ry{constructor(e){this.comparator=e?(t,r)=>e(t,r)||et.comparator(t.key,r.key):(t,r)=>et.comparator(t.key,r.key),this.keyedMap=Xp(),this.sortedSet=new Bn(this.comparator)}static emptySet(e){return new Ry(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ry)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,u=r.getNext().key;if(!s.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ry;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class CA{constructor(){this.Cu=new Bn(et.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):lt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Py{constructor(e,t,r,s,u,l,g,w,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=g,this.excludesMetadataChanges=w,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,s,u){const l=[];return t.forEach(g=>{l.push({type:0,doc:g})}),new Py(e,t,Ry.emptySet(t),l,r,s,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}class QM{constructor(){this.Nu=void 0,this.listeners=[]}}class JM{constructor(){this.queries=new Jc(e=>qE(e),lf),this.onlineState="Unknown",this.ku=new Set}}function JC(n,e){return XC.apply(this,arguments)}function XC(){return XC=(0,be.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1,u=t.queries.get(r);if(u||(s=!0,u=new QM),s)try{u.Nu=yield t.onListen(r)}catch(l){const g=My(l,`Initialization of query '${Ri(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&nT(t)}),XC.apply(this,arguments)}function eT(n,e){return tT.apply(this,arguments)}function tT(){return tT=(0,be.Z)(function*(n,e){const t=nt(n),r=e.query;let s=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),s=0===u.listeners.length)}if(s)return t.queries.delete(r),t.onUnlisten(r)}),tT.apply(this,arguments)}function XM(n,e){const t=nt(n);let r=!1;for(const s of e){const l=t.queries.get(s.query);if(l){for(const g of l.listeners)g.$u(s)&&(r=!0);l.Nu=s}}r&&nT(t)}function eR(n,e,t){const r=nt(n),s=r.queries.get(e);if(s)for(const u of s.listeners)u.onError(t);r.queries.delete(e)}function nT(n){n.ku.forEach(e=>{e.next()})}class rT{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)3!==s.type&&r.push(s);e=new Py(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Py.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class AA{constructor(e){this.key=e}}class xA{constructor(e){this.key=e}}class MA{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=en(),this.mutatedKeys=en(),this.tc=ZE(e),this.ec=new Ry(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new CA,s=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,l=s,g=!1;const w="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,C="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((S,O)=>{const z=s.get(S),J=Va(this.query,O)?O:null,fe=!!z&&this.mutatedKeys.has(z.key),Fe=!!J&&(J.hasLocalMutations||this.mutatedKeys.has(J.key)&&J.hasCommittedMutations);let $e=!1;z&&J?z.data.isEqual(J.data)?fe!==Fe&&(r.track({type:3,doc:J}),$e=!0):this.rc(z,J)||(r.track({type:2,doc:J}),$e=!0,(w&&this.tc(J,w)>0||C&&this.tc(J,C)<0)&&(g=!0)):!z&&J?(r.track({type:0,doc:J}),$e=!0):z&&!J&&(r.track({type:1,doc:z}),$e=!0,(w||C)&&(g=!0)),$e&&(J?(l=l.add(J),u=Fe?u.add(S):u.delete(S)):(l=l.delete(S),u=u.delete(S)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const S="F"===this.query.limitType?l.last():l.first();l=l.delete(S.key),u=u.delete(S.key),r.track({type:1,doc:S})}return{ec:l,ic:r,zi:g,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const s=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((C,S)=>function(O,z){const J=fe=>{switch(fe){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lt()}};return J(O)-J(z)}(C.type,S.type)||this.tc(C.doc,S.doc)),this.oc(r);const l=t?this.uc():[],g=0===this.Zu.size&&this.current?1:0,w=g!==this.Xu;return this.Xu=g,0!==u.length||w?{snapshot:new Py(this.query,e.ec,s,u,e.mutatedKeys,0===g,w,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new CA,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=en(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new xA(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new AA(r))}),t}hc(e){this.Yu=e.ir,this.Zu=en();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Py.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class rR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class iR{constructor(e){this.key=e,this.fc=!1}}class sR{constructor(e,t,r,s,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Jc(g=>qE(g),lf),this._c=new Map,this.mc=new Set,this.gc=new Bn(et.comparator),this.yc=new Map,this.Ic=new i,this.Tc={},this.Ec=new Map,this.Ac=Td.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function oR(n,e){return iT.apply(this,arguments)}function iT(){return iT=(0,be.Z)(function*(n,e){const t=function ST(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=RA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=cR.bind(null,e),e.dc.nu=XM.bind(null,e.eventManager),e.dc.Pc=eR.bind(null,e.eventManager),e}(n);let r,s;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),s=u.view.lc();else{const l=yield function Cy(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Bs.getTargetData(r,e).next(u=>u?(s=u,se.resolve(s)):t.Bs.allocateTargetId(r).next(l=>(s=new Bu(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ji.get(r.targetId);return(null===s||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}(t.localStore,Yi(e)),g=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,s=yield function sT(n,e,t,r,s){return oT.apply(this,arguments)}(t,e,r,"current"===g,l.resumeToken),t.isPrimaryClient&&UI(t.remoteStore,l)}return s}),iT.apply(this,arguments)}function oT(){return oT=(0,be.Z)(function*(n,e,t,r,s){n.Rc=(O,z,J)=>{return(fe=(0,be.Z)(function*(Fe,$e,dt,Rt){let At=$e.view.sc(dt);At.zi&&(At=yield NI(Fe.localStore,$e.query,!1).then(({documents:_n})=>$e.view.sc(_n,At)));const Vt=Rt&&Rt.targetChanges.get($e.targetId),rn=$e.view.applyChanges(At,Fe.isPrimaryClient,Vt);return mT(Fe,$e.targetId,rn.cc),rn.snapshot}),function(Fe,$e,dt,Rt){return fe.apply(this,arguments)})(n,O,z,J);var fe};const u=yield NI(n.localStore,e,!0),l=new MA(e,u.ir),g=l.sc(u.documents),w=ly.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,s),C=l.applyChanges(g,n.isPrimaryClient,w);mT(n,t,C.cc);const S=new rR(e,t,l);return n.wc.set(e,S),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),C.snapshot}),oT.apply(this,arguments)}function aR(n,e){return aT.apply(this,arguments)}function aT(){return aT=(0,be.Z)(function*(n,e){const t=nt(n),r=t.wc.get(e),s=t._c.get(r.targetId);if(s.length>1)return t._c.set(r.targetId,s.filter(u=>!lf(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Ty(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_0(t.remoteStore,r.targetId),Ny(t,r.targetId)}).catch(zc))):(Ny(t,r.targetId),yield Ty(t.localStore,r.targetId,!0))}),aT.apply(this,arguments)}function uT(){return uT=(0,be.Z)(function*(n,e,t){const r=function AT(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=lR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dR.bind(null,e),e}(n);try{const s=yield function(u,l){const g=nt(u),w=Qn.now(),C=l.reduce((z,J)=>z.add(J.key),en());let S,O;return g.persistence.runTransaction("Locally write mutations","readwrite",z=>{let J=Qi(),fe=en();return g.Zi.getEntries(z,C).next(Fe=>{J=Fe,J.forEach(($e,dt)=>{dt.isValidDocument()||(fe=fe.add($e))})}).next(()=>g.localDocuments.getOverlayedDocuments(z,J)).next(Fe=>{S=Fe;const $e=[];for(const dt of l){const Rt=Jb(dt,S.get(dt.key).overlayedDocument);null!=Rt&&$e.push(new $a(dt.key,Rt,kE(Rt.value.mapValue),rr.exists(!0)))}return g.mutationQueue.addMutationBatch(z,w,$e,l)}).next(Fe=>{O=Fe;const $e=Fe.applyToLocalDocumentSet(S,fe);return g.documentOverlayCache.saveOverlays(z,Fe.batchId,$e)})}).then(()=>({batchId:O.batchId,changes:sy(S)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,l,g){let w=u.Tc[u.currentUser.toKey()];w||(w=new Bn(Kt)),w=w.insert(l,g),u.Tc[u.currentUser.toKey()]=w}(r,s.batchId,t),yield xd(r,s.changes),yield Ay(r.remoteStore)}catch(s){const u=My(s,"Failed to persist write");t.reject(u)}}),uT.apply(this,arguments)}function RA(n,e){return cT.apply(this,arguments)}function cT(){return cT=(0,be.Z)(function*(n,e){const t=nt(n);try{const r=yield function AM(n,e){const t=nt(n),r=e.snapshotVersion;let s=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});s=t.Ji;const g=[];e.targetChanges.forEach((S,O)=>{const z=s.get(O);if(!z)return;g.push(t.Bs.removeMatchingKeys(u,S.removedDocuments,O).next(()=>t.Bs.addMatchingKeys(u,S.addedDocuments,O)));let J=z.withSequenceNumber(u.currentSequenceNumber);var fe,Fe,$e;null!==e.targetMismatches.get(O)?J=J.withResumeToken(Or.EMPTY_BYTE_STRING,Ct.min()).withLastLimboFreeSnapshotVersion(Ct.min()):S.resumeToken.approximateByteSize()>0&&(J=J.withResumeToken(S.resumeToken,r)),s=s.insert(O,J),Fe=J,$e=S,(0===(fe=z).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-fe.snapshotVersion.toMicroseconds()>=3e8||$e.addedDocuments.size+$e.modifiedDocuments.size+$e.removedDocuments.size>0)&&g.push(t.Bs.updateTargetData(u,J))});let w=Qi(),C=en();if(e.documentUpdates.forEach(S=>{e.resolvedLimboDocuments.has(S)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,S))}),g.push(function cA(n,e,t){let r=en(),s=en();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Qi();return t.forEach((g,w)=>{const C=u.get(g);w.isFoundDocument()!==C.isFoundDocument()&&(s=s.add(g)),w.isNoDocument()&&w.version.isEqual(Ct.min())?(e.removeEntry(g,w.readTime),l=l.insert(g,w)):!C.isValidDocument()||w.version.compareTo(C.version)>0||0===w.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(w),l=l.insert(g,w)):ze("LocalStore","Ignoring outdated watch update for ",g,". Current version:",C.version," Watch version:",w.version)}),{nr:l,sr:s}})}(u,l,e.documentUpdates).next(S=>{w=S.nr,C=S.sr})),!r.isEqual(Ct.min())){const S=t.Bs.getLastRemoteSnapshotVersion(u).next(O=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(S)}return se.waitFor(g).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,w,C)).next(()=>w)}).then(u=>(t.Ji=s,u))}(t.localStore,e);e.targetChanges.forEach((s,u)=>{const l=t.yc.get(u);l&&(Dt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.fc=!0:s.modifiedDocuments.size>0?Dt(l.fc):s.removedDocuments.size>0&&(Dt(l.fc),l.fc=!1))}),yield xd(t,r,e)}catch(r){yield zc(r)}}),cT.apply(this,arguments)}function PA(n,e,t){const r=nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const s=[];r.wc.forEach((u,l)=>{const g=l.view.Mu(e);g.snapshot&&s.push(g.snapshot)}),function(u,l){const g=nt(u);g.onlineState=l;let w=!1;g.queries.forEach((C,S)=>{for(const O of S.listeners)O.Mu(l)&&(w=!0)}),w&&nT(g)}(r.eventManager,e),s.length&&r.dc.nu(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function cR(n,e,t){return lT.apply(this,arguments)}function lT(){return lT=(0,be.Z)(function*(n,e,t){const r=nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.yc.get(e),u=s&&s.key;if(u){let l=new Bn(et.comparator);l=l.insert(u,Jn.newNoDocument(u,Ct.min()));const g=en().add(u),w=new hg(Ct.min(),new Map,new Bn(Kt),l,g);yield RA(r,w),r.gc=r.gc.remove(u),r.yc.delete(e),yT(r)}else yield Ty(r.localStore,e,!1).then(()=>Ny(r,e,t)).catch(zc)}),lT.apply(this,arguments)}function lR(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,be.Z)(function*(n,e){const t=nt(n),r=e.batch.batchId;try{const s=yield function aA(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,g,w,C){const S=w.batch,O=S.keys();let z=se.resolve();return O.forEach(J=>{z=z.next(()=>C.getEntry(g,J)).next(fe=>{const Fe=w.docVersions.get(J);Dt(null!==Fe),fe.version.compareTo(Fe)<0&&(S.applyToRemoteDocument(fe,w),fe.isValidDocument()&&(fe.setReadTime(w.commitVersion),C.addEntry(fe)))})}),z.next(()=>l.mutationQueue.removeMutationBatch(g,S))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let g=en();for(let w=0;w<l.mutationResults.length;++w)l.mutationResults[w].transformResults.length>0&&(g=g.add(l.batch.mutations[w].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}(t.localStore,e);gT(t,r,null),pT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield xd(t,s)}catch(s){yield zc(s)}}),dT.apply(this,arguments)}function dR(n,e,t){return hT.apply(this,arguments)}function hT(){return hT=(0,be.Z)(function*(n,e,t){const r=nt(n);try{const s=yield function(u,l){const g=nt(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return g.mutationQueue.lookupMutationBatch(w,l).next(S=>(Dt(null!==S),C=S.keys(),g.mutationQueue.removeMutationBatch(w,S))).next(()=>g.mutationQueue.performConsistencyCheck(w)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(w,C,l)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,C)).next(()=>g.localDocuments.getDocuments(w,C))})}(r.localStore,e);gT(r,e,t),pT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield xd(r,s)}catch(s){yield zc(s)}}),hT.apply(this,arguments)}function pT(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function gT(n,e,t){const r=nt(n);let s=r.Tc[r.currentUser.toKey()];if(s){const u=s.get(e);u&&(t?u.reject(t):u.resolve(),s=s.remove(e)),r.Tc[r.currentUser.toKey()]=s}}function Ny(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||NA(n,r)})}function NA(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(_0(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),yT(n))}function mT(n,e,t){for(const r of t)r instanceof AA?(n.Ic.addReference(r.key,e),fR(n,r)):r instanceof xA?(ze("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||NA(n,r.key)):lt()}function fR(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ze("SyncEngine","New document in limbo: "+t),n.mc.add(r),yT(n))}function yT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new et(gn.fromString(e)),r=n.Ac.next();n.yc.set(r,new iR(t)),n.gc=n.gc.insert(t,r),UI(n.remoteStore,new Bu(Yi(Qc(t.path)),r,"TargetPurposeLimboResolution",ys.ct))}}function xd(n,e,t){return vT.apply(this,arguments)}function vT(){return vT=(0,be.Z)(function*(n,e,t){const r=nt(n),s=[],u=[],l=[];var g;r.wc.isEmpty()||(r.wc.forEach((g,w)=>{l.push(r.Rc(w,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C?.fromCache?"not-current":"current"),C){s.push(C);const S=_t.Li(w.targetId,C);u.push(S)}}))}),yield Promise.all(l),r.dc.nu(s),yield(g=(0,be.Z)(function*(w,C){const S=nt(w);try{yield S.persistence.runTransaction("notifyLocalViewChanges","readwrite",O=>se.forEach(C,z=>se.forEach(z.Fi,J=>S.persistence.referenceDelegate.addReference(O,z.targetId,J)).next(()=>se.forEach(z.Bi,J=>S.persistence.referenceDelegate.removeReference(O,z.targetId,J)))))}catch(O){if(!Gc(O))throw O;ze("LocalStore","Failed to update sequence numbers: "+O)}for(const O of C){const z=O.targetId;if(!O.fromCache){const J=S.Ji.get(z),Fe=J.withLastLimboFreeSnapshotVersion(J.snapshotVersion);S.Ji=S.Ji.insert(z,Fe)}}}),function(w,C){return g.apply(this,arguments)})(r.localStore,u))}),vT.apply(this,arguments)}function pR(n,e){return _T.apply(this,arguments)}function _T(){return _T=(0,be.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){ze("SyncEngine","User change. New user:",e.toKey());const r=yield Xn(t.localStore,e);t.currentUser=e,(s=t).Ec.forEach(l=>{l.forEach(g=>{g.reject(new Pe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield xd(t,r.er)}var s}),_T.apply(this,arguments)}function gR(n,e){const t=nt(n),r=t.yc.get(e);if(r&&r.fc)return en().add(r.key);{let s=en();const u=t._c.get(e);if(!u)return s;for(const l of u){const g=t.wc.get(l);s=s.unionWith(g.view.nc)}return s}}class w0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,be.Z)(function*(){t.serializer=y0(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return function Zt(n,e,t,r){return new je(n,e,t,r)}(this.persistence,new kt,e.initialUser,this.serializer)}createPersistence(e){return new v(b.zs,this.serializer)}createSharedClientState(e){return new gA}terminate(){var e=this;return(0,be.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Oy{initialize(e,t){var r=this;return(0,be.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=s=>PA(r.syncEngine,s,1),r.remoteStore.remoteSyncer.handleCredentialChange=pR.bind(null,r.syncEngine),yield function ZC(n,e){return YC.apply(this,arguments)}(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new JM}createDatastore(e){const t=y0(e.databaseInfo.databaseId),r=new kM(e.databaseInfo);return new UM(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,s=e.asyncQueue,u=g=>PA(this.syncEngine,g,0),l=mA.D()?new mA:new PM,new jM(t,r,s,u,l);var t,r,s,u,l}createSyncEngine(e,t){return function(r,s,u,l,g,w,C){const S=new sR(r,s,u,l,g,w);return C&&(S.vc=!0),S}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,be.Z)(function*(t){const r=nt(t);ze("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield Sy(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}class VI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Tr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class AR{constructor(e,t,r,s){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=cr.UNAUTHENTICATED,this.clientId=Jh.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,be.Z)(function*(g){ze("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(ze("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,be.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Pe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,be.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const s=My(r,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function jI(n,e){return MT.apply(this,arguments)}function MT(){return MT=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ze("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,be.Z)(function*(u){r.isEqual(u)||(yield Xn(e.localStore,u),r=u)});return function(u){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),MT.apply(this,arguments)}function RT(n,e){return PT.apply(this,arguments)}function PT(){return PT=(0,be.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield NT(n);ze("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(s=>bA(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,u)=>bA(e.remoteStore,u)),n._onlineComponents=e}),PT.apply(this,arguments)}function NT(n){return OT.apply(this,arguments)}function OT(){return OT=(0,be.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ze("FirestoreClient","Using user provided OfflineComponentProvider");try{yield jI(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function UA(n){return"FirebaseError"===n.name?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}(t))throw t;no("Error using user provided cache. Falling back to memory cache: "+t),yield jI(n,new w0)}}else ze("FirestoreClient","Using default OfflineComponentProvider"),yield jI(n,new w0);return n._offlineComponents}),OT.apply(this,arguments)}function $I(n){return kT.apply(this,arguments)}function kT(){return kT=(0,be.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ze("FirestoreClient","Using user provided OnlineComponentProvider"),yield RT(n,n._uninitializedComponentsProvider._online)):(ze("FirestoreClient","Using default OnlineComponentProvider"),yield RT(n,new Oy))),n._onlineComponents}),kT.apply(this,arguments)}function HI(n){return NT(n).then(e=>e.localStore)}function ky(n){return FT.apply(this,arguments)}function FT(){return FT=(0,be.Z)(function*(n){const e=yield $I(n),t=e.eventManager;return t.onListen=oR.bind(null,e.syncEngine),t.onUnlisten=aR.bind(null,e.syncEngine),t}),FT.apply(this,arguments)}function $A(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(s,u,l,g,w){const C=new VI({next:O=>{u.enqueueAndForget(()=>eT(s,S));const z=O.docs.has(l);!z&&O.fromCache?w.reject(new Pe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):z&&O.fromCache&&g&&"server"===g.source?w.reject(new Pe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(O)},error:O=>w.reject(O)}),S=new rT(Qc(l.path),C,{includeMetadataChanges:!0,Ku:!0});return JC(s,S)}(yield ky(n),n.asyncQueue,e,t,r)})),r.promise}function HA(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function(s,u,l,g,w){const C=new VI({next:O=>{u.enqueueAndForget(()=>eT(s,S)),O.fromCache&&"server"===g.source?w.reject(new Pe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(O)},error:O=>w.reject(O)}),S=new rT(l,C,{includeMetadataChanges:!0,Ku:!0});return JC(s,S)}(yield ky(n),n.asyncQueue,e,t,r)})),r.promise}function zA(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const GA=new Map;function UT(n,e,t){if(!t)throw new Pe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function qA(n){if(!et.isDocumentKey(n))throw new Pe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function KA(n){if(et.isDocumentKey(n))throw new Pe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":lt()}function mn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Pe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zI(n);throw new Pe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ZA(n,e){if(e<=0)throw new Pe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class YA{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Pe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Pe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function WA(n,e,t,r){if(!0===e&&!0===r)throw new Pe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=zA(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new Pe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Pe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Pe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class E0{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new YA({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Pe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Pe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new YA(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Cb;switch(t.type){case"firstParty":return new cE(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Pe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=GA.get(e);t&&(ze("ComponentProvider","Removing Datastore"),GA.delete(e),t.terminate())}(this),Promise.resolve()}}class hr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hr(this.firestore,e,this._key)}}class vs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vs(this.firestore,e,this._query)}}class sl extends vs{constructor(e,t,r){super(e,t,Qc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new hr(this.firestore,null,new et(e))}withConverter(e){return new sl(this.firestore,e,this._path)}}function GI(n,e,...t){if(n=(0,yn.m9)(n),1===arguments.length&&(e=Jh.A()),UT("doc","path",e),n instanceof E0){const r=gn.fromString(e,...t);return qA(r),new hr(n,null,new et(r))}{if(!(n instanceof hr||n instanceof sl))throw new Pe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return qA(r),new hr(n.firestore,n instanceof sl?n.converter:null,new et(r))}}function XA(n,e){return n=(0,yn.m9)(n),e=(0,yn.m9)(e),(n instanceof hr||n instanceof sl)&&(e instanceof hr||e instanceof sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BT(n,e){return n=(0,yn.m9)(n),e=(0,yn.m9)(e),n instanceof vs&&e instanceof vs&&n.firestore===e.firestore&&lf(n._query,e._query)&&n.converter===e.converter}class UR{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new PC(this,"async_queue_retry"),this.Xc=()=>{const t=FI();t&&ze("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=FI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=FI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new ri;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,be.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Gc(t))throw t;ze("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,Tr("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const s=QC.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(s),s}Zc(){this.Wc&&lt()}verifyOperationInProgress(){}sa(){var e=this;return(0,be.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function VT(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const s of["next","error","complete"])if(s in r&&"function"==typeof r[s])return!0;return!1}(n)}class fr extends E0{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new UR,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||ex(this),this._firestoreClient.terminate()}}function si(n){return n._firestoreClient||ex(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ex(n){var e,t,r;const s=n._freezeSettings(),u=(g=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new zb(n._databaseId,g,n._persistenceKey,(C=s).host,C.ssl,C.experimentalForceLongPolling,C.experimentalAutoDetectLongPolling,zA(C.experimentalLongPollingOptions),C.useFetchStreams));var g,C;n._firestoreClient=new AR(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=s.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=s.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}class ol{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ol(Or.fromBase64String(e))}catch(t){throw new Pe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ol(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Md{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Pe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Sr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Dg{constructor(e){this._methodName=e}}class WI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Pe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Pe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Kt(this._lat,e._lat)||Kt(this._long,e._long)}}const YR=/^__.*__$/;class QR{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new $a(e,this.data,this.fieldMask,t,this.fieldTransforms):new vd(e,this.data,t,this.fieldTransforms)}}class rx{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $a(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ix(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lt()}}class qI{constructor(e,t,r,s,u,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new qI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.fa(e),s}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.aa({path:r,la:!1});return s.ua(),s}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return YI(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(ix(this.ca)&&YR.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class JR{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||y0(e)}ya(e,t,r,s=!1){return new qI({ca:e,methodName:t,ga:r,path:Sr.emptyPath(),la:!1,ma:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function bg(n){const e=n._freezeSettings(),t=y0(n._databaseId);return new JR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function KI(n,e,t,r,s,u={}){const l=n.ya(u.merge||u.mergeFields?2:0,e,t,s);zT("Data must be an object, but it was:",l,r);const g=ax(r,l);let w,C;if(u.merge)w=new Zi(l.fieldMask),C=l.fieldTransforms;else if(u.mergeFields){const S=[];for(const O of u.mergeFields){const z=b0(e,O,t);if(!l.contains(z))throw new Pe(pe.INVALID_ARGUMENT,`Field '${z}' is specified in your field mask but missing from your input data.`);cx(S,z)||S.push(z)}w=new Zi(S),C=l.fieldTransforms.filter(O=>w.covers(O.field))}else w=null,C=l.fieldTransforms;return new QR(new wi(g),w,C)}class D0 extends Dg{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof D0}}function ox(n,e,t,r=!1){return Cg(t,n.ya(r?4:3,e))}function Cg(n,e){if(ux(n=(0,yn.m9)(n)))return zT("Unsupported field value:",e,n),ax(n,e);if(n instanceof Dg)return function(t,r){if(!ix(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const s=[];let u=0;for(const l of t){let g=Cg(l,r.wa(u));null==g&&(g={nullValue:"NULL_VALUE"}),s.push(g),u++}return{arrayValue:{values:s}}}(n,e)}return function(t,r){if(null===(t=(0,yn.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zb(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=Qn.fromDate(t);return{timestampValue:mf(r.serializer,s)}}if(t instanceof Qn){const s=new Qn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:mf(r.serializer,s)}}if(t instanceof WI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ol)return{bytesValue:Q_(r.serializer,t._byteString)};if(t instanceof hr){const s=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(s))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ro(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${zI(t)}`)}(n,e)}function ax(n,e){const t={};return ld(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wc(n,(r,s)=>{const u=Cg(s,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function ux(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Qn||n instanceof WI||n instanceof ol||n instanceof hr||n instanceof Dg)}function zT(n,e,t){if(!ux(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=zI(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function b0(n,e,t){if((e=(0,yn.m9)(e))instanceof Md)return e._internalPath;if("string"==typeof e)return ZI(n,e);throw YI("Field path arguments must be of type string or ",n,!1,void 0,t)}const nP=new RegExp("[~\\*/\\[\\]]");function ZI(n,e,t){if(e.search(nP)>=0)throw YI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Md(...e.split("."))._internalPath}catch{throw YI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function YI(n,e,t,r,s){const u=r&&!r.isEmpty(),l=void 0!==s;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let w="";return(u||l)&&(w+=" (found",u&&(w+=` in field ${r}`),l&&(w+=` in document ${s}`),w+=")"),new Pe(pe.INVALID_ARGUMENT,g+n+w)}function cx(n,e){return n.some(t=>t.isEqual(e))}class C0{constructor(e,t,r,s,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new hr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new rP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(QI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class rP extends C0{data(){return super.data()}}function QI(n,e){return"string"==typeof e?ZI(n,e):e instanceof Md?e._internalPath:e._delegate._internalPath}function lx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Pe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GT{}class T0 extends GT{}function If(n,e,...t){let r=[];e instanceof GT&&r.push(e),r=r.concat(t),function(s){const u=s.filter(g=>g instanceof Ly).length,l=s.filter(g=>g instanceof S0).length;if(u>1||u>0&&l>0)throw new Pe(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class S0 extends T0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new S0(e,t,r)}_apply(e){const t=this._parse(e);return px(e._query,t),new vs(e.firestore,e.converter,ry(e._query,t))}_parse(e){const t=bg(e.firestore);return function(s,u,l,g,w,C,S){let O;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){fx(S,C);const z=[];for(const J of S)z.push(hx(g,s,J));O={arrayValue:{values:z}}}else O=hx(g,s,S)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||fx(S,C),O=ox(l,"where",S,"in"===C||"not-in"===C);return un.create(w,C,O)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ly extends GT{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ly(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Rn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,s){let u=r;const l=s.getFlattenedFilters();for(const g of l)px(u,g),u=ry(u,g)}(e._query,t),new vs(e.firestore,e.converter,ry(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class WT extends T0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new WT(e,t)}_apply(e){const t=function(r,s,u){if(null!==r.startAt)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new uf(s,u);return function(g,w){if(null===G_(g)){const C=Jp(g);null!==C&&gx(0,C,w.field)}}(r,l),l}(e._query,this._field,this._direction);return new vs(e.firestore,e.converter,function(r,s){const u=r.explicitOrderBy.concat([s]);return new Fu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class JI extends T0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new JI(e,t,r)}_apply(e){return new vs(e.firestore,e.converter,iy(e._query,this._limit,this._limitType))}}class XI extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XI(e,t,r)}_apply(e){const t=dx(e,this.type,this._docOrFields,this._inclusive);return new vs(e.firestore,e.converter,(s=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)));var r,s}}class eD extends T0{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new eD(e,t,r)}_apply(e){const t=dx(e,this.type,this._docOrFields,this._inclusive);return new vs(e.firestore,e.converter,(s=t,new Fu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)));var r,s}}function dx(n,e,t,r){if(t[0]=(0,yn.m9)(t[0]),t[0]instanceof C0)return function(s,u,l,g,w){if(!g)throw new Pe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const C=[];for(const S of md(s))if(S.field.isKeyField())C.push(hd(u,g.key));else{const O=g.data.field(S.field);if(Wm(O))throw new Pe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+S.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===O){const z=S.field.canonicalString();throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${z}' (used as the orderBy) does not exist.`)}C.push(O)}return new fd(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const s=bg(n.firestore);return function(u,l,g,w,C,S){const O=u.explicitOrderBy;if(C.length>O.length)throw new Pe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const z=[];for(let J=0;J<C.length;J++){const fe=C[J];if(O[J].field.isKeyField()){if("string"!=typeof fe)throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof fe}`);if(!ny(u)&&-1!==fe.indexOf("/"))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${fe}' contains a slash.`);const Fe=u.path.child(gn.fromString(fe));if(!et.isDocumentKey(Fe))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const $e=new et(Fe);z.push(hd(l,$e))}else{const Fe=ox(g,w,fe);z.push(Fe)}}return new fd(z,S)}(n._query,n.firestore._databaseId,s,e,t,r)}}function hx(n,e,t){if("string"==typeof(t=(0,yn.m9)(t))){if(""===t)throw new Pe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ny(e)&&-1!==t.indexOf("/"))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(gn.fromString(t));if(!et.isDocumentKey(r))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return hd(n,new et(r))}if(t instanceof hr)return hd(n,t._key);throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zI(t)}.`)}function fx(n,e){if(!Array.isArray(n)||0===n.length)throw new Pe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function px(n,e){if(e.isInequality()){const r=Jp(n),s=e.field;if(null!==r&&!r.isEqual(s))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const u=G_(n);null!==u&&gx(0,s,u)}const t=function(r,s){for(const u of r)for(const l of u.getFlattenedFilters())if(s.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Pe(pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function gx(n,e,t){if(!t.isEqual(e))throw new Pe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class qT{convertValue(e,t="none"){switch(qc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return lr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Wc(e,(s,u)=>{r[s]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new WI(lr(e.latitude),lr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=qm(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(qp(e));default:return null}}convertTimestamp(e){const t=ku(e);return new Qn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gn.fromString(e);Dt(bI(r));const s=new Lu(r.get(1),r.get(3)),u=new et(r.popFirst(5));return s.isEqual(t)||Tr(`Document ${u} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function tD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Tg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Rd extends C0{constructor(e,t,r,s,u,l){super(e,t,r,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new A0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(QI("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class A0 extends Rd{data(e={}){return super.data(e)}}class Df{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Tg(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new A0(this._firestore,this._userDataWriter,r.key,r,new Tg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Pe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new A0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>s||3!==l.type).map(l=>{const g=new A0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Tg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==l.type&&(w=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),C=u.indexOf(l.doc.key)),{type:pP(l.type),doc:g,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function pP(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lt()}}function yx(n,e){return n instanceof Rd&&e instanceof Rd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Df&&e instanceof Df&&n._firestore===e._firestore&&BT(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class bf extends qT{constructor(e){super(),this.firestore=e}convertBytes(e){return new ol(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new hr(this.firestore,null,t)}}function vx(n,e,t){n=mn(n,hr);const r=mn(n.firestore,fr),s=tD(n.converter,e,t);return Fy(r,[KI(bg(r),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,rr.none())])}function _x(n,e,t,...r){n=mn(n,hr);const s=mn(n.firestore,fr),u=bg(s);let l;return l="string"==typeof(e=(0,yn.m9)(e))||e instanceof Md?function HT(n,e,t,r,s,u){const l=n.ya(1,e,t),g=[b0(e,r,t)],w=[s];if(u.length%2!=0)throw new Pe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let z=0;z<u.length;z+=2)g.push(b0(e,u[z])),w.push(u[z+1]);const C=[],S=wi.empty();for(let z=g.length-1;z>=0;--z)if(!cx(C,g[z])){const J=g[z];let fe=w[z];fe=(0,yn.m9)(fe);const Fe=l.da(J);if(fe instanceof D0)C.push(J);else{const $e=Cg(fe,Fe);null!=$e&&(C.push(J),S.set(J,$e))}}const O=new Zi(C);return new rx(S,O,l.fieldTransforms)}(u,"updateDoc",n._key,e,t,r):function $T(n,e,t,r){const s=n.ya(1,e,t);zT("Data must be an object, but it was:",s,r);const u=[],l=wi.empty();Wc(r,(w,C)=>{const S=ZI(e,w,t);C=(0,yn.m9)(C);const O=s.da(S);if(C instanceof D0)u.push(S);else{const z=Cg(C,O);null!=z&&(u.push(S),l.set(S,z))}});const g=new Zi(u);return new rx(l,g,s.fieldTransforms)}(u,"updateDoc",n._key,e),Fy(s,[l.toMutation(n._key,rr.exists(!0))])}function wx(n,...e){var t,r,s;n=(0,yn.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||VT(e[l])||(u=e[l],l++);const g={includeMetadataChanges:u.includeMetadataChanges};if(VT(e[l])){const O=e[l];e[l]=null===(t=O.next)||void 0===t?void 0:t.bind(O),e[l+1]=null===(r=O.error)||void 0===r?void 0:r.bind(O),e[l+2]=null===(s=O.complete)||void 0===s?void 0:s.bind(O)}let w,C,S;if(n instanceof hr)C=mn(n.firestore,fr),S=Qc(n._key.path),w={next:O=>{e[l]&&e[l](KT(C,n,O))},error:e[l+1],complete:e[l+2]};else{const O=mn(n,vs);C=mn(O.firestore,fr),S=O._query;const z=new bf(C);w={next:J=>{e[l]&&e[l](new Df(C,z,O,J))},error:e[l+1],complete:e[l+2]},lx(n._query)}return function(O,z,J,fe){const Fe=new VI(fe),$e=new rT(z,Fe,J);return O.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return JC(yield ky(O),$e)})),()=>{Fe.Dc(),O.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return eT(yield ky(O),$e)}))}}(si(C),S,g,w)}function Fy(n,e){return function(t,r){const s=new ri;return t.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return function uR(n,e,t){return uT.apply(this,arguments)}(yield function LT(n){return $I(n).then(e=>e.syncEngine)}(t),r,s)})),s.promise}(si(n),e)}function KT(n,e,t){const r=t.docs.get(e._key),s=new bf(n);return new Rd(n,s,e._key,r,new Tg(t.hasPendingWrites,t.fromCache),e.converter)}function Dx(){if(typeof Uint8Array>"u")throw new Pe("unimplemented","Uint8Arrays are not available in this environment.")}function bx(){if(!function AE(){return typeof atob<"u"}())throw new Pe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class x0{constructor(e){this._delegate=e}static fromBase64String(e){return bx(),new x0(ol.fromBase64String(e))}static fromUint8Array(e){return Dx(),new x0(ol.fromUint8Array(e))}toBase64(){return bx(),this._delegate.toBase64()}toUint8Array(){return Dx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YT(n){return function $P(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class nD extends qT{constructor(e){super(),this.firestore=e}convertBytes(e){return new x0(new ol(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ga.forKey(t,this.firestore,null)}}class Sg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new A0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new R0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Sg.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let u=s.get(t);return u||(u=new Sg(e,new nD(e),t),s.set(t,u)),u}}Sg.INSTANCES=new WeakMap;class Ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Pe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ga(t,new hr(t._delegate,r,new et(e)))}static forKey(e,t,r){return new Ga(t,new hr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Uy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Uy(this.firestore,function JA(n,e,...t){if(n=(0,yn.m9)(n),UT("collection","path",e),n instanceof E0){const r=gn.fromString(e,...t);return KA(r),new sl(n,null,r)}{if(!(n instanceof hr||n instanceof sl))throw new Pe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gn.fromString(e,...t));return KA(r),new sl(n.firestore,null,r)}}(this._delegate,e))}catch(t){throw so(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,yn.m9)(e))instanceof hr&&XA(this._delegate,e)}set(e,t){t=function ZT(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Pe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}("DocumentReference.set",t);try{return t?vx(this._delegate,e,t):vx(this._delegate,e)}catch(r){throw so(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?_x(this._delegate,e):_x(this._delegate,e,t,...r)}catch(s){throw so(s,"updateDoc()","DocumentReference.update()")}}delete(){return function EP(n){return Fy(mn(n.firestore,fr),[new ag(n._key,rr.none())])}(this._delegate)}onSnapshot(...e){const t=Ax(e),r=xx(e,s=>new M0(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return wx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function mP(n){n=mn(n,hr);const e=mn(n.firestore,fr),t=si(e),r=new bf(e);return function RR(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(s,u,l){try{const g=yield function(w,C){const S=nt(w);return S.persistence.runTransaction("read document","readonly",O=>S.localDocuments.getDocument(O,C))}(s,u);g.isFoundDocument()?l.resolve(g):g.isNoDocument()?l.resolve(null):l.reject(new Pe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const w=My(g,`Failed to get document '${u} from cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield HI(n),e,t);var r})),t.promise}(t,n._key).then(s=>new Rd(e,r,n._key,s,new Tg(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function yP(n){n=mn(n,hr);const e=mn(n.firestore,fr);return $A(si(e),n._key,{source:"server"}).then(t=>KT(e,n,t))}(this._delegate):function gP(n){n=mn(n,hr);const e=mn(n.firestore,fr);return $A(si(e),n._key).then(t=>KT(e,n,t))}(this._delegate),t.then(r=>new M0(this.firestore,new Rd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ga(this.firestore,this._delegate.withConverter(e?Sg.getInstance(this.firestore,e):null))}}function so(n,e,t){return n.message=n.message.replace(e,t),n}function Ax(n){for(const e of n)if("object"==typeof e&&!YT(e))return e;return{}}function xx(n,e){var t,r;let s;return s=YT(n[0])?n[0]:YT(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{s.next&&s.next(e(u))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(r=s.complete)||void 0===r?void 0:r.bind(s)}}class M0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yx(this._delegate,e._delegate)}}class R0 extends M0{data(e){const t=this._delegate.data(e);return function uE(n,e){n||lt()}(void 0!==t),t}}class oo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nD(e)}where(e,t,r){try{return new oo(this.firestore,If(this._delegate,function iP(n,e,t){const r=e,s=QI("where",n);return S0._create(s,r,t)}(e,t,r)))}catch(s){throw so(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new oo(this.firestore,If(this._delegate,function sP(n,e="asc"){const t=e,r=QI("orderBy",n);return WT._create(r,t)}(e,t)))}catch(r){throw so(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new oo(this.firestore,If(this._delegate,function oP(n){return ZA("limit",n),JI._create("limit",n,"F")}(e)))}catch(t){throw so(t,"limit()","Query.limit()")}}limitToLast(e){try{return new oo(this.firestore,If(this._delegate,function aP(n){return ZA("limitToLast",n),JI._create("limitToLast",n,"L")}(e)))}catch(t){throw so(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new oo(this.firestore,If(this._delegate,function uP(...n){return XI._create("startAt",n,!0)}(...e)))}catch(t){throw so(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new oo(this.firestore,If(this._delegate,function cP(...n){return XI._create("startAfter",n,!1)}(...e)))}catch(t){throw so(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new oo(this.firestore,If(this._delegate,function lP(...n){return eD._create("endBefore",n,!1)}(...e)))}catch(t){throw so(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new oo(this.firestore,If(this._delegate,function dP(...n){return eD._create("endAt",n,!0)}(...e)))}catch(t){throw so(t,"endAt()","Query.endAt()")}}isEqual(e){return BT(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function _P(n){n=mn(n,vs);const e=mn(n.firestore,fr),t=si(e),r=new bf(e);return function PR(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget((0,be.Z)(function*(){return(r=(0,be.Z)(function*(s,u,l){try{const g=yield NI(s,u,!0),w=new MA(u,g.ir),C=w.sc(g.documents),S=w.applyChanges(C,!1);l.resolve(S.snapshot)}catch(g){const w=My(g,`Failed to execute query '${u} against cache`);l.reject(w)}}),function(s,u,l){return r.apply(this,arguments)})(yield HI(n),e,t);var r})),t.promise}(t,n._query).then(s=>new Df(e,r,n,s))}(this._delegate):"server"===e?.source?function wP(n){n=mn(n,vs);const e=mn(n.firestore,fr),t=si(e),r=new bf(e);return HA(t,n._query,{source:"server"}).then(s=>new Df(e,r,n,s))}(this._delegate):function vP(n){n=mn(n,vs);const e=mn(n.firestore,fr),t=si(e),r=new bf(e);return lx(n._query),HA(t,n._query).then(s=>new Df(e,r,n,s))}(this._delegate),t.then(r=>new QT(this.firestore,new Df(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ax(e),r=xx(e,s=>new QT(this.firestore,new Df(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return wx(this._delegate,t,r)}withConverter(e){return new oo(this.firestore,this._delegate.withConverter(e?Sg.getInstance(this.firestore,e):null))}}class GP{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new R0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QT{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new oo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new R0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new GP(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new R0(this._firestore,r))})}isEqual(e){return yx(this._delegate,e._delegate)}}class Uy extends oo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ga(this.firestore,e):null}doc(e){try{return new Ga(this.firestore,void 0===e?GI(this._delegate):GI(this._delegate,e))}catch(t){throw so(t,"doc()","CollectionReference.doc()")}}add(e){return function IP(n,e){const t=mn(n.firestore,fr),r=GI(n),s=tD(n.converter,e);return Fy(t,[KI(bg(n.firestore),"addDoc",r._key,s,null!==n.converter,{}).toMutation(r._key,rr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ga(this.firestore,t))}isEqual(e){return XA(this._delegate,e._delegate)}withConverter(e){return new Uy(this.firestore,this._delegate.withConverter(e?Sg.getInstance(this.firestore,e):null))}}var ZP=U(6451),rD=U(5363),YP=U(6063);class QP extends Qr.x{constructor(e=1/0,t=1/0,r=YP.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:s,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!s&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:s}=this,u=s.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:s}=this,u=(s?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!s){const l=t.now();let g=0;for(let w=1;w<r.length&&r[w]<=l;w+=2)g=w;g&&r.splice(0,g+1)}}}var JP=U(3099);function Mx(n,e,t){let r,s=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:s=!1,scheduler:t}=n):r=n??1/0,(0,JP.B)({connector:()=>new QP(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:s})}function Rx(n,e){return(0,vu.m)(e)?ur(()=>n,e):ur(()=>n)}var XT=U(9468);U(8140);var tS=U(1186);const nS=new Map,Nx={activated:!1,tokenObservers:[]},rN={initialized:!1,enabled:!1};function $r(n){return nS.get(n)||Object.assign({},Nx)}function sD(){return rN}const rS="https://content-firebaseappcheck.googleapis.com/v1",aN="exchangeDebugToken",Ox={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class cN{constructor(e,t,r,s,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=s,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=s,s>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,be.Z)(function*(){t.stop();try{t.pending=new yn.BH,yield function lN(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new yn.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const _s=new yn.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function iS(n){if(!$r(n).activated)throw _s.create("use-before-activation",{appName:n.name})}function uD(n,e){return oS.apply(this,arguments)}function oS(){return oS=(0,be.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){const O=yield s.getHeartbeatsHeader();O&&(r["X-Firebase-Client"]=O)}const u={method:"POST",body:JSON.stringify(e),headers:r};let l,g;try{l=yield fetch(n,u)}catch(O){throw _s.create("fetch-network-error",{originalErrorMessage:O?.message})}if(200!==l.status)throw _s.create("fetch-status-error",{httpStatus:l.status});try{g=yield l.json()}catch(O){throw _s.create("fetch-parse-error",{originalErrorMessage:O?.message})}const w=g.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw _s.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const C=1e3*Number(w[1]),S=Date.now();return{token:g.token,expireTimeMillis:S+C,issuedAtTimeMillis:S}}),oS.apply(this,arguments)}function kx(n,e){const{projectId:t,appId:r,apiKey:s}=n.options;return{url:`${rS}/projects/${t}/apps/${r}:${aN}?key=${s}`,body:{debug_token:e}}}const pN="firebase-app-check-database",gN=1,P0="firebase-app-check-store";let cD=null;function aS(){return aS=(0,be.Z)(function*(n,e){const r=(yield function Fx(){return cD||(cD=new Promise((n,e)=>{try{const t=indexedDB.open(pN,gN);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var s;e(_s.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(P0,{keyPath:"compositeKey"})}}catch(t){e(_s.create("storage-open",{originalErrorMessage:t?.message}))}}),cD)}()).transaction(P0,"readwrite"),u=r.objectStore(P0).put({compositeKey:n,value:e});return new Promise((l,g)=>{u.onsuccess=w=>{l()},r.onerror=w=>{var C;g(_s.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})}),aS.apply(this,arguments)}const N0=new Oc.Yd("@firebase/app-check");function lS(n,e){return(0,yn.hl)()?function yN(n,e){return function Ux(n,e){return aS.apply(this,arguments)}(function Vx(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{N0.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function hS(){return sD().enabled}function fS(){return pS.apply(this,arguments)}function pS(){return pS=(0,be.Z)(function*(){const n=sD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),pS.apply(this,arguments)}const DN={error:"UNKNOWN_ERROR"};function bN(n){return yn.US.encodeString(JSON.stringify(n),!1)}function lD(n){return gS.apply(this,arguments)}function gS(){return gS=(0,be.Z)(function*(n,e=!1){const t=n.app;iS(t);const r=$r(t);let u,s=r.token;if(s&&!By(s)&&(r.token=void 0,s=void 0),!s){const w=yield r.cachedTokenPromise;w&&(By(w)?s=w:yield lS(t,void 0))}if(!e&&s&&By(s))return{token:s.token};let g,l=!1;if(hS()){r.exchangeTokenPromise||(r.exchangeTokenPromise=uD(kx(t,yield fS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const w=yield r.exchangeTokenPromise;return yield lS(t,w),r.token=w,{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),s=yield $r(t).exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?N0.warn(w.message):N0.error(w),u=w}return s?u?g=By(s)?{token:s.token,internalError:u}:zx(u):(g={token:s.token},r.token=s,yield lS(t,s)):g=zx(u),l&&function Hx(n,e){const t=$r(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,g),g}),gS.apply(this,arguments)}function mS(){return mS=(0,be.Z)(function*(n){const e=n.app;iS(e);const{provider:t}=$r(e);if(hS()){const r=yield fS(),{token:s}=yield uD(kx(e,r),n.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}}),mS.apply(this,arguments)}function vS(n,e){const t=$r(n),r=t.tokenObservers.filter(s=>s.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $x(n){const{app:e}=n,t=$r(e);let r=t.tokenRefresher;r||(r=function CN(n){const{app:e}=n;return new cN((0,be.Z)(function*(){let r;if(r=$r(e).token?yield lD(n,!0):yield lD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=$r(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},Ox.RETRIAL_MIN_WAIT,Ox.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function By(n){return n.expireTimeMillis-Date.now()>0}function zx(n){return{token:bN(DN),error:n}}class TN{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=$r(this.app);for(const t of e)vS(this.app,t.next);return Promise.resolve()}}const Jx="app-check-internal";!function VN(){(0,tS.Xd)(new vp.wA("app-check",n=>function SN(n,e){return new TN(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Jx).initialize()})),(0,tS.Xd)(new vp.wA(Jx,n=>function AN(n){return{getToken:e=>lD(n,e),getLimitedUseToken:()=>function jx(n){return mS.apply(this,arguments)}(n),addTokenListener:e=>function yS(n,e,t,r){const{app:s}=n,u=$r(s);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&By(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),$x(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$x(n))}(n,"INTERNAL",e),removeTokenListener:e=>vS(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,tS.KN)("@firebase/app-check","0.8.0")}();class IS{constructor(){return(0,Br.vb)("app-check")}}typeof window<"u"&&window;var GN=U(1274);const eM=new y.OlP("angularfire2.auth.use-emulator"),tM=new y.OlP("angularfire2.auth.settings"),nM=new y.OlP("angularfire2.auth.tenant-id"),rM=new y.OlP("angularfire2.auth.langugage-code"),iM=new y.OlP("angularfire2.auth.use-device-language"),sM=new y.OlP("angularfire.auth.persistence"),oM=(n,e,t,r,s,u,l,g)=>(0,Qs.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>{});if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=s,u&&w.useDeviceLanguage(),l)for(const[C,S]of Object.entries(l))w.settings[C]=S;return g&&w.setPersistence(g),w},[t,r,s,u,l,g]);let bS=(()=>{class n{constructor(t,r,s,u,l,g,w,C,S,O,z,J){const fe=new Qr.x,Fe=yt(void 0).pipe((0,rD.Q)(l.outsideAngular),ur(()=>u.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,8463)))),(0,Tt.U)(()=>(0,Qs.on)(t,u,r)),(0,Tt.U)($e=>oM($e,u,g,C,S,O,w,z)),Mx({bufferSize:1,refCount:!1}));if(Oi(s))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=yt(null);else{Fe.pipe(ds()).subscribe();const dt=Fe.pipe(ur(Vt=>Vt.getRedirectResult().then(rn=>rn,()=>null)),Br.iC,Mx({bufferSize:1,refCount:!1})),Rt=Fe.pipe(ur(Vt=>new Bi.y(rn=>({unsubscribe:u.runOutsideAngular(()=>Vt.onAuthStateChanged(_n=>rn.next(_n),_n=>rn.error(_n),()=>rn.complete()))})))),At=Fe.pipe(ur(Vt=>new Bi.y(rn=>({unsubscribe:u.runOutsideAngular(()=>Vt.onIdTokenChanged(_n=>rn.next(_n),_n=>rn.error(_n),()=>rn.complete()))}))));this.authState=dt.pipe(Rx(Rt),(0,XT.R)(l.outsideAngular),(0,rD.Q)(l.insideAngular)),this.user=dt.pipe(Rx(At),(0,XT.R)(l.outsideAngular),(0,rD.Q)(l.insideAngular)),this.idToken=this.user.pipe(ur(Vt=>Vt?(0,Dn.D)(Vt.getIdToken()):yt(null))),this.idTokenResult=this.user.pipe(ur(Vt=>Vt?(0,Dn.D)(Vt.getIdTokenResult()):yt(null))),this.credential=(0,ZP.T)(dt,fe,this.authState.pipe(gi(Vt=>!Vt))).pipe((0,Tt.U)(Vt=>Vt?.user?Vt:null),(0,XT.R)(l.outsideAngular),(0,rD.Q)(l.insideAngular))}return(0,Qs.pX)(this,Fe,u,{spy:{apply:($e,dt,Rt)=>{($e.startsWith("signIn")||$e.startsWith("createUser"))&&Rt.then(At=>fe.next(At))}}})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Qs.Dh),y.LFG(Qs.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Br.HU),y.LFG(eM,8),y.LFG(tM,8),y.LFG(nM,8),y.LFG(rM,8),y.LFG(iM,8),y.LFG(sM,8),y.LFG(IS,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qN=(()=>{class n{constructor(){GN.Z.registerVersion("angularfire",Br.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[bS]}),n})();function aM(n,e){return function KN(n,e=Mv.z){return new Bi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function CS(n,e){return aM(n,e).pipe((0,Tt.U)(t=>({payload:t,type:"query"})))}function hD(n,e){return CS(n,e).pipe(Jo(void 0),sm(),(0,Tt.U)(([t,r])=>{const s=r.payload.docChanges(),u=s.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,g)=>{const w=s.find(S=>S.doc.ref.isEqual(l.ref)),C=t?.payload.docs.find(S=>S.ref.isEqual(l.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(l.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:l}})}),u}))}function uM(n,e,t){return hD(n,t).pipe(wc((r,s)=>function YN(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function QN(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return TS(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return TS(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return TS(n,e.oldIndex,1)}return n}(n,r))}),n}(r,s.map(u=>u.payload),e),[]),function Rv(n,e=go.y){return n=n??Pv,(0,Xr.e)((t,r)=>{let s,u=!0;t.subscribe((0,Jr.x)(r,l=>{const g=e(l);(u||!n(s,g))&&(u=!1,s=g,r.next(l))}))})}(),(0,Tt.U)(r=>r.map(s=>({type:s.type,payload:s}))))}function TS(n,e,t,...r){const s=n.slice();return s.splice(e,t,...r),s}function cM(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lM{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=hD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Tt.U)(r=>r.filter(s=>e.indexOf(s.type)>-1)))),t.pipe(Jo(void 0),sm(),gi(([r,s])=>s.length>0||!r),(0,Tt.U)(([r,s])=>s),Br.iC)}auditTrail(e){return this.stateChanges(e).pipe(wc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cM(e);return uM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Br.iC)}valueChanges(e={}){return CS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Br.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Br.iC)}add(e){return this.ref.add(e)}doc(e){return new dM(this.ref.doc(e),this.afs)}}class dM{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:s,query:u}=hM(r,t);return new lM(s,u,this.afs)}snapshotChanges(){return function ZN(n,e){return aM(n,e).pipe(Jo(void 0),sm(),(0,Tt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Br.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Tt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Dn.D)(this.ref.get(e)).pipe(Br.iC)}}class JN{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?hD(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),gi(t=>t.length>0),Br.iC):hD(this.query,this.afs.schedulers.outsideAngular).pipe(Br.iC)}auditTrail(e){return this.stateChanges(e).pipe(wc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cM(e);return uM(this.query,t,this.afs.schedulers.outsideAngular).pipe(Br.iC)}valueChanges(e={}){return CS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Tt.U)(r=>r.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Br.iC)}get(e){return(0,Dn.D)(this.query.get(e)).pipe(Br.iC)}}const XN=new y.OlP("angularfire2.enableFirestorePersistence"),eO=new y.OlP("angularfire2.firestore.persistenceSettings"),tO=new y.OlP("angularfire2.firestore.settings"),nO=new y.OlP("angularfire2.firestore.use-emulator");function hM(n,e=(t=>t)){return{query:e(n),ref:n}}let rO=(()=>{class n{constructor(t,r,s,u,l,g,w,C,S,O,z,J,fe,Fe,$e,dt,Rt){this.schedulers=w;const At=(0,Qs.on)(t,g,r),Vt=S;O&&oM(At,g,z,fe,Fe,$e,J,dt),[this.firestore,this.persistenceEnabled$]=(0,Qs.cc)(`${At.name}.firestore`,"AngularFirestore",At.name,()=>{const rn=g.runOutsideAngular(()=>At.firestore());if(u&&rn.settings(u),Vt&&rn.useEmulator(...Vt),s&&!Oi(l)){const _n=()=>{try{return(0,Dn.D)(rn.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Ns){return typeof console<"u"&&console.warn(Ns),yt(!1)}};return[rn,g.runOutsideAngular(_n)]}return[rn,yt(!1)]},[u,Vt,s])}collection(t,r){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=hM(s,r),g=this.schedulers.ngZone.run(()=>u);return new lM(g,l,this)}collectionGroup(t,r){const s=r||(l=>l),u=this.firestore.collectionGroup(t);return new JN(s(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>r);return new dM(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Qs.Dh),y.LFG(Qs.xv,8),y.LFG(XN,8),y.LFG(tO,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Br.HU),y.LFG(eO,8),y.LFG(nO,8),y.LFG(bS,8),y.LFG(eM,8),y.LFG(tM,8),y.LFG(nM,8),y.LFG(rM,8),y.LFG(iM,8),y.LFG(sM,8),y.LFG(IS,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),iO=(()=>{var n;class e{constructor(r){this.firestore=r,this.room=this.getDataChange("room"),this.game=this.getDataChange("game"),this.roles=this.getDataChange("roles")}getDataChange(r){return this.firestore.collection(r).snapshotChanges().pipe((0,Tt.U)(s=>s.map(u=>{const l=u.payload.doc.data();return{id:u.payload.doc.id,...l}})))}addData(r,s){this.firestore.collection(r).add(s)}addNewData(r,s,u){this.firestore.doc(r+`/${s}`).set(u)}deleteAllData(r){this.firestore.doc(r).delete()}deleteData(r,s){this.firestore.doc(r+`/${s}`).delete()}getAllData(r){return new Promise(s=>{this.firestore.collection(r).valueChanges({idField:"id"}).subscribe(u=>s(u))})}updateData(r,s,u){this.firestore.doc(r+`/${s}`).update(u)}getRoom(){return this.room}getGame(){return this.game}getRoles(){return this.roles}}return(n=e).\u0275fac=function(r){return new(r||n)(y.LFG(rO))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),e})();class fD{}class SS{}class Pd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const s=t.slice(0,r),u=s.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(s,u),this.headers.has(u)?this.headers.get(u).push(l):this.headers.set(u,[l])}})}:()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{let s;if(s="string"==typeof r?[r]:"number"==typeof r?[r.toString()]:r.map(u=>u.toString()),s.length>0){const u=t.toLowerCase();this.headers.set(u,s),this.maybeSetNormalizedName(t,u)}})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Pd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Pd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Pd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const s=("a"===e.op?this.headers.get(t):void 0)||[];s.push(...r),this.headers.set(t,s);break;case"d":const u=e.value;if(u){let l=this.headers.get(t);if(!l)return;l=l.filter(g=>-1===u.indexOf(g)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class sO{encodeKey(e){return fM(e)}encodeValue(e){return fM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const aO=/%(\d[a-f0-9])/gi,uO={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fM(n){return encodeURIComponent(n).replace(aO,(e,t)=>uO[t]??e)}function pD(n){return`${n}`}class Tf{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new sO,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function oO(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(s=>{const u=s.indexOf("="),[l,g]=-1==u?[e.decodeKey(s),""]:[e.decodeKey(s.slice(0,u)),e.decodeValue(s.slice(u+1))],w=t.get(l)||[];w.push(g),t.set(l,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],s=Array.isArray(r)?r.map(pD):[pD(r)];this.map.set(t,s)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const s=e[r];Array.isArray(s)?s.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:s,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Tf({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(pD(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const s=r.indexOf(pD(e.value));-1!==s&&r.splice(s,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class cO{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function pM(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function gM(n){return typeof Blob<"u"&&n instanceof Blob}function mM(n){return typeof FormData<"u"&&n instanceof FormData}class O0{constructor(e,t,r,s){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function lO(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||s?(this.body=void 0!==r?r:null,u=s):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Pd),this.context||(this.context=new cO),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const g=t.indexOf("?");this.urlWithParams=t+(-1===g?"?":g<t.length-1?"&":"")+l}}else this.params=new Tf,this.urlWithParams=t}serializeBody(){return null===this.body?null:pM(this.body)||gM(this.body)||mM(this.body)||function dO(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Tf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mM(this.body)?null:gM(this.body)?this.body.type||null:pM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Tf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,l=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,g=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,C=e.params||this.params;const S=e.context??this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((O,z)=>O.set(z,e.setHeaders[z]),w)),e.setParams&&(C=Object.keys(e.setParams).reduce((O,z)=>O.set(z,e.setParams[z]),C)),new O0(t,r,u,{params:C,headers:w,context:S,reportProgress:g,responseType:s,withCredentials:l})}}var Ei=(()=>((Ei=Ei||{})[Ei.Sent=0]="Sent",Ei[Ei.UploadProgress=1]="UploadProgress",Ei[Ei.ResponseHeader=2]="ResponseHeader",Ei[Ei.DownloadProgress=3]="DownloadProgress",Ei[Ei.Response=4]="Response",Ei[Ei.User=5]="User",Ei))();class AS{constructor(e,t=200,r="OK"){this.headers=e.headers||new Pd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class xS extends AS{constructor(e={}){super(e),this.type=Ei.ResponseHeader}clone(e={}){return new xS({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class gD extends AS{constructor(e={}){super(e),this.type=Ei.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new gD({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class yM extends AS{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function MS(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let vM=(()=>{class n{constructor(t){this.handler=t}request(t,r,s={}){let u;if(t instanceof O0)u=t;else{let w,C;w=s.headers instanceof Pd?s.headers:new Pd(s.headers),s.params&&(C=s.params instanceof Tf?s.params:new Tf({fromObject:s.params})),u=new O0(t,r,void 0!==s.body?s.body:null,{headers:w,context:s.context,params:C,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const l=yt(u).pipe(As(w=>this.handler.handle(w)));if(t instanceof O0||"events"===s.observe)return l;const g=l.pipe(gi(w=>w instanceof gD));switch(s.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return g.pipe((0,Tt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return g.pipe((0,Tt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return g.pipe((0,Tt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return g.pipe((0,Tt.U)(w=>w.body))}case"response":return g;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Tf).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,MS(s,r))}post(t,r,s={}){return this.request("POST",t,MS(s,r))}put(t,r,s={}){return this.request("PUT",t,MS(s,r))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(fD))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function _M(n,e){return e(n)}function hO(n,e){return(t,r)=>e.intercept(t,{handle:s=>n(s,r)})}const pO=new y.OlP("HTTP_INTERCEPTORS"),k0=new y.OlP("HTTP_INTERCEPTOR_FNS");function gO(){let n=null;return(e,t)=>(null===n&&(n=((0,y.f3M)(pO,{optional:!0})??[]).reduceRight(hO,_M)),n(e,t))}let wM=(()=>{class n extends fD{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=Array.from(new Set(this.injector.get(k0)));this.chain=r.reduceRight((s,u)=>function fO(n,e,t){return(r,s)=>t.runInContext(()=>e(r,u=>n(u,s)))}(s,u,this.injector),_M)}return this.chain(t,r=>this.backend.handle(r))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(SS),y.LFG(y.lqb))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const _O=/^\)\]\}',?\n/;let IM=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Bi.y(r=>{const s=this.xhrFactory.build();if(s.open(t.method,t.urlWithParams),t.withCredentials&&(s.withCredentials=!0),t.headers.forEach((J,fe)=>s.setRequestHeader(J,fe.join(","))),t.headers.has("Accept")||s.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const J=t.detectContentTypeHeader();null!==J&&s.setRequestHeader("Content-Type",J)}if(t.responseType){const J=t.responseType.toLowerCase();s.responseType="json"!==J?J:"text"}const u=t.serializeBody();let l=null;const g=()=>{if(null!==l)return l;const J=s.statusText||"OK",fe=new Pd(s.getAllResponseHeaders()),Fe=function wO(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(s)||t.url;return l=new xS({headers:fe,status:s.status,statusText:J,url:Fe}),l},w=()=>{let{headers:J,status:fe,statusText:Fe,url:$e}=g(),dt=null;204!==fe&&(dt=typeof s.response>"u"?s.responseText:s.response),0===fe&&(fe=dt?200:0);let Rt=fe>=200&&fe<300;if("json"===t.responseType&&"string"==typeof dt){const At=dt;dt=dt.replace(_O,"");try{dt=""!==dt?JSON.parse(dt):null}catch(Vt){dt=At,Rt&&(Rt=!1,dt={error:Vt,text:dt})}}Rt?(r.next(new gD({body:dt,headers:J,status:fe,statusText:Fe,url:$e||void 0})),r.complete()):r.error(new yM({error:dt,headers:J,status:fe,statusText:Fe,url:$e||void 0}))},C=J=>{const{url:fe}=g(),Fe=new yM({error:J,status:s.status||0,statusText:s.statusText||"Unknown Error",url:fe||void 0});r.error(Fe)};let S=!1;const O=J=>{S||(r.next(g()),S=!0);let fe={type:Ei.DownloadProgress,loaded:J.loaded};J.lengthComputable&&(fe.total=J.total),"text"===t.responseType&&s.responseText&&(fe.partialText=s.responseText),r.next(fe)},z=J=>{let fe={type:Ei.UploadProgress,loaded:J.loaded};J.lengthComputable&&(fe.total=J.total),r.next(fe)};return s.addEventListener("load",w),s.addEventListener("error",C),s.addEventListener("timeout",C),s.addEventListener("abort",C),t.reportProgress&&(s.addEventListener("progress",O),null!==u&&s.upload&&s.upload.addEventListener("progress",z)),s.send(u),r.next({type:Ei.Sent}),()=>{s.removeEventListener("error",C),s.removeEventListener("abort",C),s.removeEventListener("load",w),s.removeEventListener("timeout",C),t.reportProgress&&(s.removeEventListener("progress",O),null!==u&&s.upload&&s.upload.removeEventListener("progress",z)),s.readyState!==s.DONE&&s.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ho))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const RS=new y.OlP("XSRF_ENABLED"),DM=new y.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),bM=new y.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class CM{}let DO=(()=>{class n{constructor(t,r,s){this.doc=t,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ts(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(ce),y.LFG(y.Lbi),y.LFG(DM))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function bO(n,e){const t=n.url.toLowerCase();if(!(0,y.f3M)(RS)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,y.f3M)(CM).getToken(),s=(0,y.f3M)(bM);return null!=r&&!n.headers.has(s)&&(n=n.clone({headers:n.headers.set(s,r)})),e(n)}var oi=(()=>((oi=oi||{})[oi.Interceptors=0]="Interceptors",oi[oi.LegacyInterceptors=1]="LegacyInterceptors",oi[oi.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",oi[oi.NoXsrfProtection=3]="NoXsrfProtection",oi[oi.JsonpSupport=4]="JsonpSupport",oi[oi.RequestsMadeViaParent=5]="RequestsMadeViaParent",oi))();function Vy(n,e){return{\u0275kind:n,\u0275providers:e}}function CO(...n){const e=[vM,IM,wM,{provide:fD,useExisting:wM},{provide:SS,useExisting:IM},{provide:k0,useValue:bO,multi:!0},{provide:RS,useValue:!0},{provide:CM,useClass:DO}];for(const t of n)e.push(...t.\u0275providers);return(0,y.MR2)(e)}const TM=new y.OlP("LEGACY_INTERCEPTOR_FN");let SO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[CO(Vy(oi.LegacyInterceptors,[{provide:TM,useFactory:gO},{provide:k0,useExisting:TM,multi:!0}]))]}),n})();function AO(n,e){if(1&n&&(y.TgZ(0,"strong",6),y._uU(1),y.qZA()),2&n){const t=y.oxw();y.xp6(1),y.Oqu(t.alert)}}function xO(n,e){if(1&n&&(y.TgZ(0,"h2"),y._uU(1),y.qZA()),2&n){const t=y.oxw();y.xp6(1),y.AsE("",t.went+1,"/",t.inRoom.length,"")}}const MO=function(n){return{"background-color":n}};function RO(n,e){if(1&n){const t=y.EpF();y.TgZ(0,"div",7),y.NdJ("click",function(){y.CHM(t);const s=y.oxw();return y.KtG(s.ready())}),y._uU(1),y.qZA()}if(2&n){const t=y.oxw();y.Q6J("ngStyle",y.VKq(2,MO,t.button.color)),y.xp6(1),y.hij(" ",t.button.title," ")}}function PO(n,e){if(1&n){const t=y.EpF();y.TgZ(0,"span",8),y.NdJ("click",function(){y.CHM(t);const s=y.oxw();return y.KtG(s.startGame())}),y._uU(1,"Ti\xea\u0301p tu\u0323c"),y.qZA()}}let NO=(()=>{var n;class e{constructor(r,s){this.crud=r,this.http=s,this.title="spy",this.id="",this.button={title:"S\u0102\u0303N S\u0102\u0300NG",color:"rgb(54, 162, 235)"},this.leader=!1,this.inRoom=[],this.ip="",this.me={},this.went=0,this.roles=[],this.alert="",this.unsub=[]}ngOnInit(){this.getIPAddress(),this.getRoom()}getRoles(){this.unsub[1]=this.crud.getRoles().subscribe(r=>{this.roles=r})}getIPAddress(){this.http.get("http://api.ipify.org/?format=json").subscribe(r=>{this.ip=r.ip})}getRoom(){this.unsub[0]=this.crud.getRoom().subscribe(r=>{let s=!1,u=-1;this.went=0;for(let g of r)g.id==this.ip&&(s=!0,this.me=g),g.status&&!g.leader&&this.went++;console.log(s),s||(this.crud.addNewData("room",this.ip,{leader:!1,status:!1,role:""}),this.getRoom());let l=!1;for(let g of r)if(1==g.leader){l=!0;break}r.length>0&&(l||(u=this.randomLeader(r),this.crud.updateData("room",r[0].id,{leader:!0})),this.me.leader?(this.leader=!0,console.log("s",this.me.status),this.me.status?(this.button.title="K\xca\u0301T THU\u0301C",this.button.color="rgb(255, 99, 132)"):(this.button.title="B\u0102\u0301T \u0110\xc2\u0300U",this.button.color="rgb(54, 162, 235)")):(this.leader=!1,this.me.status?(this.button.title="HU\u0309Y",this.button.color="rgb(255, 99, 132)"):(this.button.title="S\u0102\u0303N SA\u0300NG",this.button.color="rgb(54, 162, 235)"))),this.me.leader&&this.getRoles(),this.inRoom=r})}ngOnDestroy(){for(let r of this.unsub)r.unsubscribe();this.crud.deleteData("room",this.id)}getRandomInt(r,s){return r=Math.ceil(r),s=Math.floor(s),Math.floor(Math.random()*(s-r)+r)}randomLeader(r){return this.getRandomInt(0,r.length)}ready(){this.me.leader?this.me.status?(this.button.title="B\u0102\u0301T \u0110\xc2\u0300U",this.button.color="rgb(54, 162, 235)",this.cancel()):(this.button.title="K\xca\u0301T THU\u0301C",this.button.color="rgb(255, 99, 132)",this.startGame(),this.crud.updateData("room",this.ip,{status:!0})):this.me.status?(this.button.title="S\u0102\u0303N SA\u0300NG",this.button.color="rgb(54, 162, 235)",this.crud.updateData("room",this.ip,{status:!1})):(this.button.title="HU\u0309Y",this.button.color="rgb(255, 99, 132)",this.crud.updateData("room",this.ip,{status:!0}))}cancel(){for(let r of this.inRoom)r.id!=this.ip?this.crud.deleteData("room",r.id):this.crud.updateData("room",r.id,{status:!1,role:""})}resetGame(){for(let r of this.inRoom)this.crud.updateData("room",r.id,{status:!1,role:""})}startGame(){let r=!0;for(let s of this.inRoom)if(0==s.status){r=!1;break}if(r=!0,r){let s=this.getRandomInt(0,this.roles.length),u=this.roles[s],l=this.getRandomInt(0,this.inRoom.length),g=this.inRoom[l].id;for(let w of this.inRoom)this.crud.updateData("room",w.id,w.id!=g?{role:u.role}:{role:u.spy+" (GIA\u0301N \u0110I\xca\u0323P)"})}else this.createAlert("Co\u0301 ng\u01b0\u01a1\u0300i ch\u01b0a s\u0103\u0303n sa\u0300ng")}createAlert(r){this.alert=r,setTimeout(()=>{this.alert=""},3e3)}}return(n=e).\u0275fac=function(r){return new(r||n)(y.Y36(iO),y.Y36(vM))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-root"]],decls:7,vars:5,consts:[[1,"main"],["style","color: rgb(255, 99, 132);",4,"ngIf"],[4,"ngIf"],[1,"role"],["class","button",3,"ngStyle","click",4,"ngIf"],[3,"click",4,"ngIf"],[2,"color","rgb(255, 99, 132)"],[1,"button",3,"ngStyle","click"],[3,"click"]],template:function(r,s){1&r&&(y.TgZ(0,"div",0),y.YNc(1,AO,2,1,"strong",1),y.YNc(2,xO,2,2,"h2",2),y.TgZ(3,"h1",3),y._uU(4),y.qZA(),y.YNc(5,RO,2,4,"div",4),y.YNc(6,PO,2,0,"span",5),y.qZA()),2&r&&(y.xp6(1),y.Q6J("ngIf",""!=s.alert),y.xp6(1),y.Q6J("ngIf",""!=s.me.role||1==s.me.leader),y.xp6(2),y.Oqu(s.me.role),y.xp6(1),y.Q6J("ngIf",""!=s.me.role||1==s.me.leader),y.xp6(1),y.Q6J("ngIf",1==s.me.leader&&1==s.me.status))},dependencies:[ws,Es],styles:[".main[_ngcontent-%COMP%]{padding-top:100px;display:flex;justify-content:center;align-items:center;flex-direction:column}.main[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:3rem}.main[_ngcontent-%COMP%]   .role[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:100px}.main[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{padding:20px 40px;background-color:#36a2eb;font-weight:600;cursor:pointer;margin-bottom:20px}"]}),e})();const OO_firebase={apiKey:"AIzaSyD0MVQqtj7_aLD0ikx6madgMd7_pThjx6k",authDomain:"spyy-78ecc.firebaseapp.com",projectId:"spyy-78ecc",storageBucket:"spyy-78ecc.appspot.com",messagingSenderId:"163846304138",appId:"1:163846304138:web:614c449ebf53fbb9919873",measurementId:"G-NC8YRLKLPX"};let kO=(()=>{var n;class e{}return(n=e).\u0275fac=function(r){return new(r||n)},n.\u0275mod=y.oAB({type:n,bootstrap:[NO]}),n.\u0275inj=y.cJS({imports:[Ca,yp,SO,Qs.hO.initializeApp(OO_firebase),qN]}),e})();El().bootstrapModule(kO).catch(n=>console.error(n))},9751:(bt,Ne,U)=>{U.d(Ne,{y:()=>Ce});var y=U(2961),te=U(727),F=U(8822),le=U(9635),ue=U(2416),ce=U(576),Ee=U(2806);let Ce=(()=>{class Q{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const Je=new Q;return Je.source=this,Je.operator=Me,Je}subscribe(Me,Je,ht){const _e=function W(Q){return Q&&Q instanceof y.Lv||function G(Q){return Q&&(0,ce.m)(Q.next)&&(0,ce.m)(Q.error)&&(0,ce.m)(Q.complete)}(Q)&&(0,te.Nn)(Q)}(Me)?Me:new y.Hp(Me,Je,ht);return(0,Ee.x)(()=>{const{operator:Oe,source:Ue}=this;_e.add(Oe?Oe.call(_e,Ue):Ue?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Me){try{return this._subscribe(Me)}catch(Je){Me.error(Je)}}forEach(Me,Je){return new(Je=ye(Je))((ht,_e)=>{const Oe=new y.Hp({next:Ue=>{try{Me(Ue)}catch(qe){_e(qe),Oe.unsubscribe()}},error:_e,complete:ht});this.subscribe(Oe)})}_subscribe(Me){var Je;return null===(Je=this.source)||void 0===Je?void 0:Je.subscribe(Me)}[F.L](){return this}pipe(...Me){return(0,le.U)(Me)(this)}toPromise(Me){return new(Me=ye(Me))((Je,ht)=>{let _e;this.subscribe(Oe=>_e=Oe,Oe=>ht(Oe),()=>Je(_e))})}}return Q.create=We=>new Q(We),Q})();function ye(Q){var We;return null!==(We=Q??ue.v.Promise)&&void 0!==We?We:Promise}},7579:(bt,Ne,U)=>{U.d(Ne,{x:()=>Ee});var y=U(9751),te=U(727);const le=(0,U(3888).d)(ye=>function(){ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ue=U(8737),ce=U(2806);let Ee=(()=>{class ye extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const Q=new Ce(this,this);return Q.operator=W,Q}_throwIfClosed(){if(this.closed)throw new le}next(W){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(W)}})}error(W){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:Q}=this;for(;Q.length;)Q.shift().error(W)}})}complete(){(0,ce.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:Q,isStopped:We,observers:Me}=this;return Q||We?te.Lc:(this.currentObservers=null,Me.push(W),new te.w0(()=>{this.currentObservers=null,(0,ue.P)(Me,W)}))}_checkFinalizedStatuses(W){const{hasError:Q,thrownError:We,isStopped:Me}=this;Q?W.error(We):Me&&W.complete()}asObservable(){const W=new y.y;return W.source=this,W}}return ye.create=(G,W)=>new Ce(G,W),ye})();class Ce extends Ee{constructor(G,W){super(),this.destination=G,this.source=W}next(G){var W,Q;null===(Q=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===Q||Q.call(W,G)}error(G){var W,Q;null===(Q=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===Q||Q.call(W,G)}complete(){var G,W;null===(W=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===W||W.call(G)}_subscribe(G){var W,Q;return null!==(Q=null===(W=this.source)||void 0===W?void 0:W.subscribe(G))&&void 0!==Q?Q:te.Lc}}},2961:(bt,Ne,U)=>{U.d(Ne,{Hp:()=>ht,Lv:()=>Q});var y=U(576),te=U(727),F=U(2416),le=U(7849);function ue(){}const ce=ye("C",void 0,void 0);function ye(Ve,Te,Se){return{kind:Ve,value:Te,error:Se}}var G=U(3410),W=U(2806);class Q extends te.w0{constructor(Te){super(),this.isStopped=!1,Te?(this.destination=Te,(0,te.Nn)(Te)&&Te.add(this)):this.destination=qe}static create(Te,Se,Ke){return new ht(Te,Se,Ke)}next(Te){this.isStopped?Ue(function Ce(Ve){return ye("N",Ve,void 0)}(Te),this):this._next(Te)}error(Te){this.isStopped?Ue(function Ee(Ve){return ye("E",void 0,Ve)}(Te),this):(this.isStopped=!0,this._error(Te))}complete(){this.isStopped?Ue(ce,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Te){this.destination.next(Te)}_error(Te){try{this.destination.error(Te)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function Me(Ve,Te){return We.call(Ve,Te)}class Je{constructor(Te){this.partialObserver=Te}next(Te){const{partialObserver:Se}=this;if(Se.next)try{Se.next(Te)}catch(Ke){_e(Ke)}}error(Te){const{partialObserver:Se}=this;if(Se.error)try{Se.error(Te)}catch(Ke){_e(Ke)}else _e(Te)}complete(){const{partialObserver:Te}=this;if(Te.complete)try{Te.complete()}catch(Se){_e(Se)}}}class ht extends Q{constructor(Te,Se,Ke){let Le;if(super(),(0,y.m)(Te)||!Te)Le={next:Te??void 0,error:Se??void 0,complete:Ke??void 0};else{let ct;this&&F.v.useDeprecatedNextContext?(ct=Object.create(Te),ct.unsubscribe=()=>this.unsubscribe(),Le={next:Te.next&&Me(Te.next,ct),error:Te.error&&Me(Te.error,ct),complete:Te.complete&&Me(Te.complete,ct)}):Le=Te}this.destination=new Je(Le)}}function _e(Ve){F.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Ve):(0,le.h)(Ve)}function Ue(Ve,Te){const{onStoppedNotification:Se}=F.v;Se&&G.z.setTimeout(()=>Se(Ve,Te))}const qe={closed:!0,next:ue,error:function Oe(Ve){throw Ve},complete:ue}},727:(bt,Ne,U)=>{U.d(Ne,{Lc:()=>ce,w0:()=>ue,Nn:()=>Ee});var y=U(576);const F=(0,U(3888).d)(ye=>function(W){ye(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((Q,We)=>`${We+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var le=U(8737);class ue{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Me of W)Me.remove(this);else W.remove(this);const{initialTeardown:Q}=this;if((0,y.m)(Q))try{Q()}catch(Me){G=Me instanceof F?Me.errors:[Me]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const Me of We)try{Ce(Me)}catch(Je){G=G??[],Je instanceof F?G=[...G,...Je.errors]:G.push(Je)}}if(G)throw new F(G)}}add(G){var W;if(G&&G!==this)if(this.closed)Ce(G);else{if(G instanceof ue){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push(G)}}_hasParent(G){const{_parentage:W}=this;return W===G||Array.isArray(W)&&W.includes(G)}_addParent(G){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push(G),W):W?[W,G]:G}_removeParent(G){const{_parentage:W}=this;W===G?this._parentage=null:Array.isArray(W)&&(0,le.P)(W,G)}remove(G){const{_finalizers:W}=this;W&&(0,le.P)(W,G),G instanceof ue&&G._removeParent(this)}}ue.EMPTY=(()=>{const ye=new ue;return ye.closed=!0,ye})();const ce=ue.EMPTY;function Ee(ye){return ye instanceof ue||ye&&"closed"in ye&&(0,y.m)(ye.remove)&&(0,y.m)(ye.add)&&(0,y.m)(ye.unsubscribe)}function Ce(ye){(0,y.m)(ye)?ye():ye.unsubscribe()}},2416:(bt,Ne,U)=>{U.d(Ne,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(bt,Ne,U)=>{U.d(Ne,{E:()=>te});const te=new(U(9751).y)(ue=>ue.complete())},8996:(bt,Ne,U)=>{U.d(Ne,{D:()=>Te});var y=U(8421),te=U(5363),F=U(9468),ce=U(9751),Ce=U(2202),ye=U(576),G=U(9672);function Q(Se,Ke){if(!Se)throw new Error("Iterable cannot be null");return new ce.y(Le=>{(0,G.f)(Le,Ke,()=>{const ct=Se[Symbol.asyncIterator]();(0,G.f)(Le,Ke,()=>{ct.next().then(oe=>{oe.done?Le.complete():Le.next(oe.value)})},0,!0)})})}var We=U(3670),Me=U(8239),Je=U(1144),ht=U(6495),_e=U(2206),Oe=U(4532),Ue=U(3260);function Te(Se,Ke){return Ke?function Ve(Se,Ke){if(null!=Se){if((0,We.c)(Se))return function le(Se,Ke){return(0,y.Xf)(Se).pipe((0,F.R)(Ke),(0,te.Q)(Ke))}(Se,Ke);if((0,Je.z)(Se))return function Ee(Se,Ke){return new ce.y(Le=>{let ct=0;return Ke.schedule(function(){ct===Se.length?Le.complete():(Le.next(Se[ct++]),Le.closed||this.schedule())})})}(Se,Ke);if((0,Me.t)(Se))return function ue(Se,Ke){return(0,y.Xf)(Se).pipe((0,F.R)(Ke),(0,te.Q)(Ke))}(Se,Ke);if((0,_e.D)(Se))return Q(Se,Ke);if((0,ht.T)(Se))return function W(Se,Ke){return new ce.y(Le=>{let ct;return(0,G.f)(Le,Ke,()=>{ct=Se[Ce.h](),(0,G.f)(Le,Ke,()=>{let oe,Pt;try{({value:oe,done:Pt}=ct.next())}catch(it){return void Le.error(it)}Pt?Le.complete():Le.next(oe)},0,!0)}),()=>(0,ye.m)(ct?.return)&&ct.return()})}(Se,Ke);if((0,Ue.L)(Se))return function qe(Se,Ke){return Q((0,Ue.Q)(Se),Ke)}(Se,Ke)}throw(0,Oe.z)(Se)}(Se,Ke):(0,y.Xf)(Se)}},8421:(bt,Ne,U)=>{U.d(Ne,{Xf:()=>We});var y=U(7582),te=U(1144),F=U(8239),le=U(9751),ue=U(3670),ce=U(2206),Ee=U(4532),Ce=U(6495),ye=U(3260),G=U(576),W=U(7849),Q=U(8822);function We(Ve){if(Ve instanceof le.y)return Ve;if(null!=Ve){if((0,ue.c)(Ve))return function Me(Ve){return new le.y(Te=>{const Se=Ve[Q.L]();if((0,G.m)(Se.subscribe))return Se.subscribe(Te);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ve);if((0,te.z)(Ve))return function Je(Ve){return new le.y(Te=>{for(let Se=0;Se<Ve.length&&!Te.closed;Se++)Te.next(Ve[Se]);Te.complete()})}(Ve);if((0,F.t)(Ve))return function ht(Ve){return new le.y(Te=>{Ve.then(Se=>{Te.closed||(Te.next(Se),Te.complete())},Se=>Te.error(Se)).then(null,W.h)})}(Ve);if((0,ce.D)(Ve))return Oe(Ve);if((0,Ce.T)(Ve))return function _e(Ve){return new le.y(Te=>{for(const Se of Ve)if(Te.next(Se),Te.closed)return;Te.complete()})}(Ve);if((0,ye.L)(Ve))return function Ue(Ve){return Oe((0,ye.Q)(Ve))}(Ve)}throw(0,Ee.z)(Ve)}function Oe(Ve){return new le.y(Te=>{(function qe(Ve,Te){var Se,Ke,Le,ct;return(0,y.mG)(this,void 0,void 0,function*(){try{for(Se=(0,y.KL)(Ve);!(Ke=yield Se.next()).done;)if(Te.next(Ke.value),Te.closed)return}catch(oe){Le={error:oe}}finally{try{Ke&&!Ke.done&&(ct=Se.return)&&(yield ct.call(Se))}finally{if(Le)throw Le.error}}Te.complete()})})(Ve,Te).catch(Se=>Te.error(Se))})}},6451:(bt,Ne,U)=>{U.d(Ne,{T:()=>ce});var y=U(8189),te=U(8421),F=U(515),le=U(7669),ue=U(8996);function ce(...Ee){const Ce=(0,le.yG)(Ee),ye=(0,le._6)(Ee,1/0),G=Ee;return G.length?1===G.length?(0,te.Xf)(G[0]):(0,y.J)(ye)((0,ue.D)(G,Ce)):F.E}},5403:(bt,Ne,U)=>{U.d(Ne,{x:()=>te});var y=U(2961);function te(le,ue,ce,Ee,Ce){return new F(le,ue,ce,Ee,Ce)}class F extends y.Lv{constructor(ue,ce,Ee,Ce,ye,G){super(ue),this.onFinalize=ye,this.shouldUnsubscribe=G,this._next=ce?function(W){try{ce(W)}catch(Q){ue.error(Q)}}:super._next,this._error=Ce?function(W){try{Ce(W)}catch(Q){ue.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(W){ue.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ue;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ce}=this;super.unsubscribe(),!ce&&(null===(ue=this.onFinalize)||void 0===ue||ue.call(this))}}}},4004:(bt,Ne,U)=>{U.d(Ne,{U:()=>F});var y=U(4482),te=U(5403);function F(le,ue){return(0,y.e)((ce,Ee)=>{let Ce=0;ce.subscribe((0,te.x)(Ee,ye=>{Ee.next(le.call(ue,ye,Ce++))}))})}},8189:(bt,Ne,U)=>{U.d(Ne,{J:()=>F});var y=U(5577),te=U(4671);function F(le=1/0){return(0,y.z)(te.y,le)}},5577:(bt,Ne,U)=>{U.d(Ne,{z:()=>Ce});var y=U(4004),te=U(8421),F=U(4482),le=U(9672),ue=U(5403),Ee=U(576);function Ce(ye,G,W=1/0){return(0,Ee.m)(G)?Ce((Q,We)=>(0,y.U)((Me,Je)=>G(Q,Me,We,Je))((0,te.Xf)(ye(Q,We))),W):("number"==typeof G&&(W=G),(0,F.e)((Q,We)=>function ce(ye,G,W,Q,We,Me,Je,ht){const _e=[];let Oe=0,Ue=0,qe=!1;const Ve=()=>{qe&&!_e.length&&!Oe&&G.complete()},Te=Ke=>Oe<Q?Se(Ke):_e.push(Ke),Se=Ke=>{Me&&G.next(Ke),Oe++;let Le=!1;(0,te.Xf)(W(Ke,Ue++)).subscribe((0,ue.x)(G,ct=>{We?.(ct),Me?Te(ct):G.next(ct)},()=>{Le=!0},void 0,()=>{if(Le)try{for(Oe--;_e.length&&Oe<Q;){const ct=_e.shift();Je?(0,le.f)(G,Je,()=>Se(ct)):Se(ct)}Ve()}catch(ct){G.error(ct)}}))};return ye.subscribe((0,ue.x)(G,Te,()=>{qe=!0,Ve()})),()=>{ht?.()}}(Q,We,ye,W)))}},5363:(bt,Ne,U)=>{U.d(Ne,{Q:()=>le});var y=U(9672),te=U(4482),F=U(5403);function le(ue,ce=0){return(0,te.e)((Ee,Ce)=>{Ee.subscribe((0,F.x)(Ce,ye=>(0,y.f)(Ce,ue,()=>Ce.next(ye),ce),()=>(0,y.f)(Ce,ue,()=>Ce.complete(),ce),ye=>(0,y.f)(Ce,ue,()=>Ce.error(ye),ce)))})}},3099:(bt,Ne,U)=>{U.d(Ne,{B:()=>ue});var y=U(8421),te=U(7579),F=U(2961),le=U(4482);function ue(Ee={}){const{connector:Ce=(()=>new te.x),resetOnError:ye=!0,resetOnComplete:G=!0,resetOnRefCountZero:W=!0}=Ee;return Q=>{let We,Me,Je,ht=0,_e=!1,Oe=!1;const Ue=()=>{Me?.unsubscribe(),Me=void 0},qe=()=>{Ue(),We=Je=void 0,_e=Oe=!1},Ve=()=>{const Te=We;qe(),Te?.unsubscribe()};return(0,le.e)((Te,Se)=>{ht++,!Oe&&!_e&&Ue();const Ke=Je=Je??Ce();Se.add(()=>{ht--,0===ht&&!Oe&&!_e&&(Me=ce(Ve,W))}),Ke.subscribe(Se),!We&&ht>0&&(We=new F.Hp({next:Le=>Ke.next(Le),error:Le=>{Oe=!0,Ue(),Me=ce(qe,ye,Le),Ke.error(Le)},complete:()=>{_e=!0,Ue(),Me=ce(qe,G),Ke.complete()}}),(0,y.Xf)(Te).subscribe(We))})(Q)}}function ce(Ee,Ce,...ye){if(!0===Ce)return void Ee();if(!1===Ce)return;const G=new F.Hp({next:()=>{G.unsubscribe(),Ee()}});return(0,y.Xf)(Ce(...ye)).subscribe(G)}},9468:(bt,Ne,U)=>{U.d(Ne,{R:()=>te});var y=U(4482);function te(F,le=0){return(0,y.e)((ue,ce)=>{ce.add(F.schedule(()=>ue.subscribe(ce),le))})}},8505:(bt,Ne,U)=>{U.d(Ne,{b:()=>ue});var y=U(576),te=U(4482),F=U(5403),le=U(4671);function ue(ce,Ee,Ce){const ye=(0,y.m)(ce)||Ee||Ce?{next:ce,error:Ee,complete:Ce}:ce;return ye?(0,te.e)((G,W)=>{var Q;null===(Q=ye.subscribe)||void 0===Q||Q.call(ye);let We=!0;G.subscribe((0,F.x)(W,Me=>{var Je;null===(Je=ye.next)||void 0===Je||Je.call(ye,Me),W.next(Me)},()=>{var Me;We=!1,null===(Me=ye.complete)||void 0===Me||Me.call(ye),W.complete()},Me=>{var Je;We=!1,null===(Je=ye.error)||void 0===Je||Je.call(ye,Me),W.error(Me)},()=>{var Me,Je;We&&(null===(Me=ye.unsubscribe)||void 0===Me||Me.call(ye)),null===(Je=ye.finalize)||void 0===Je||Je.call(ye)}))}):le.y}},4408:(bt,Ne,U)=>{U.d(Ne,{o:()=>ue});var y=U(727);class te extends y.w0{constructor(Ee,Ce){super()}schedule(Ee,Ce=0){return this}}const F={setInterval(ce,Ee,...Ce){const{delegate:ye}=F;return ye?.setInterval?ye.setInterval(ce,Ee,...Ce):setInterval(ce,Ee,...Ce)},clearInterval(ce){const{delegate:Ee}=F;return(Ee?.clearInterval||clearInterval)(ce)},delegate:void 0};var le=U(8737);class ue extends te{constructor(Ee,Ce){super(Ee,Ce),this.scheduler=Ee,this.work=Ce,this.pending=!1}schedule(Ee,Ce=0){var ye;if(this.closed)return this;this.state=Ee;const G=this.id,W=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(W,G,Ce)),this.pending=!0,this.delay=Ce,this.id=null!==(ye=this.id)&&void 0!==ye?ye:this.requestAsyncId(W,this.id,Ce),this}requestAsyncId(Ee,Ce,ye=0){return F.setInterval(Ee.flush.bind(Ee,this),ye)}recycleAsyncId(Ee,Ce,ye=0){if(null!=ye&&this.delay===ye&&!1===this.pending)return Ce;null!=Ce&&F.clearInterval(Ce)}execute(Ee,Ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ye=this._execute(Ee,Ce);if(ye)return ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,Ce){let G,ye=!1;try{this.work(Ee)}catch(W){ye=!0,G=W||new Error("Scheduled action threw falsy error")}if(ye)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:Ce}=this,{actions:ye}=Ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(ye,this),null!=Ee&&(this.id=this.recycleAsyncId(Ce,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(bt,Ne,U)=>{U.d(Ne,{v:()=>F});var y=U(6063);class te{constructor(ue,ce=te.now){this.schedulerActionCtor=ue,this.now=ce}schedule(ue,ce=0,Ee){return new this.schedulerActionCtor(this,ue).schedule(Ee,ce)}}te.now=y.l.now;class F extends te{constructor(ue,ce=te.now){super(ue,ce),this.actions=[],this._active=!1}flush(ue){const{actions:ce}=this;if(this._active)return void ce.push(ue);let Ee;this._active=!0;do{if(Ee=ue.execute(ue.state,ue.delay))break}while(ue=ce.shift());if(this._active=!1,Ee){for(;ue=ce.shift();)ue.unsubscribe();throw Ee}}}},4986:(bt,Ne,U)=>{U.d(Ne,{z:()=>F});var y=U(4408);const F=new(U(7565).v)(y.o)},6063:(bt,Ne,U)=>{U.d(Ne,{l:()=>y});const y={now:()=>(y.delegate||Date).now(),delegate:void 0}},3410:(bt,Ne,U)=>{U.d(Ne,{z:()=>y});const y={setTimeout(te,F,...le){const{delegate:ue}=y;return ue?.setTimeout?ue.setTimeout(te,F,...le):setTimeout(te,F,...le)},clearTimeout(te){const{delegate:F}=y;return(F?.clearTimeout||clearTimeout)(te)},delegate:void 0}},2202:(bt,Ne,U)=>{U.d(Ne,{h:()=>te});const te=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(bt,Ne,U)=>{U.d(Ne,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(bt,Ne,U)=>{U.d(Ne,{_6:()=>ce,jO:()=>le,yG:()=>ue});var y=U(576);function F(Ee){return Ee[Ee.length-1]}function le(Ee){return(0,y.m)(F(Ee))?Ee.pop():void 0}function ue(Ee){return function te(Ee){return Ee&&(0,y.m)(Ee.schedule)}(F(Ee))?Ee.pop():void 0}function ce(Ee,Ce){return"number"==typeof F(Ee)?Ee.pop():Ce}},8737:(bt,Ne,U)=>{function y(te,F){if(te){const le=te.indexOf(F);0<=le&&te.splice(le,1)}}U.d(Ne,{P:()=>y})},3888:(bt,Ne,U)=>{function y(te){const le=te(ue=>{Error.call(ue),ue.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}U.d(Ne,{d:()=>y})},2806:(bt,Ne,U)=>{U.d(Ne,{O:()=>le,x:()=>F});var y=U(2416);let te=null;function F(ue){if(y.v.useDeprecatedSynchronousErrorHandling){const ce=!te;if(ce&&(te={errorThrown:!1,error:null}),ue(),ce){const{errorThrown:Ee,error:Ce}=te;if(te=null,Ee)throw Ce}}else ue()}function le(ue){y.v.useDeprecatedSynchronousErrorHandling&&te&&(te.errorThrown=!0,te.error=ue)}},9672:(bt,Ne,U)=>{function y(te,F,le,ue=0,ce=!1){const Ee=F.schedule(function(){le(),ce?te.add(this.schedule(null,ue)):this.unsubscribe()},ue);if(te.add(Ee),!ce)return Ee}U.d(Ne,{f:()=>y})},4671:(bt,Ne,U)=>{function y(te){return te}U.d(Ne,{y:()=>y})},1144:(bt,Ne,U)=>{U.d(Ne,{z:()=>y});const y=te=>te&&"number"==typeof te.length&&"function"!=typeof te},2206:(bt,Ne,U)=>{U.d(Ne,{D:()=>te});var y=U(576);function te(F){return Symbol.asyncIterator&&(0,y.m)(F?.[Symbol.asyncIterator])}},576:(bt,Ne,U)=>{function y(te){return"function"==typeof te}U.d(Ne,{m:()=>y})},3670:(bt,Ne,U)=>{U.d(Ne,{c:()=>F});var y=U(8822),te=U(576);function F(le){return(0,te.m)(le[y.L])}},6495:(bt,Ne,U)=>{U.d(Ne,{T:()=>F});var y=U(2202),te=U(576);function F(le){return(0,te.m)(le?.[y.h])}},8239:(bt,Ne,U)=>{U.d(Ne,{t:()=>te});var y=U(576);function te(F){return(0,y.m)(F?.then)}},3260:(bt,Ne,U)=>{U.d(Ne,{L:()=>le,Q:()=>F});var y=U(7582),te=U(576);function F(ue){return(0,y.FC)(this,arguments,function*(){const Ee=ue.getReader();try{for(;;){const{value:Ce,done:ye}=yield(0,y.qq)(Ee.read());if(ye)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(Ce)}}finally{Ee.releaseLock()}})}function le(ue){return(0,te.m)(ue?.getReader)}},4482:(bt,Ne,U)=>{U.d(Ne,{A:()=>te,e:()=>F});var y=U(576);function te(le){return(0,y.m)(le?.lift)}function F(le){return ue=>{if(te(ue))return ue.lift(function(ce){try{return le(ce,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(bt,Ne,U)=>{U.d(Ne,{U:()=>F,z:()=>te});var y=U(4671);function te(...le){return F(le)}function F(le){return 0===le.length?y.y:1===le.length?le[0]:function(ce){return le.reduce((Ee,Ce)=>Ce(Ee),ce)}}},7849:(bt,Ne,U)=>{U.d(Ne,{h:()=>F});var y=U(2416),te=U(3410);function F(le){te.z.setTimeout(()=>{const{onUnhandledError:ue}=y.v;if(!ue)throw le;ue(le)})}},4532:(bt,Ne,U)=>{function y(te){return new TypeError(`You provided ${null!==te&&"object"==typeof te?"an invalid object":`'${te}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Ne,{z:()=>y})},4650:(bt,Ne,U)=>{U.d(Ne,{$8M:()=>ba,$WT:()=>ir,$Z:()=>dw,AFp:()=>dI,AaK:()=>Ce,AsE:()=>Om,CHM:()=>tu,CRH:()=>ny,CZH:()=>lg,CqO:()=>kw,D6c:()=>vC,EJc:()=>tC,EpF:()=>n_,F4k:()=>r_,FYo:()=>mv,FiY:()=>mu,GfV:()=>G0,JOm:()=>Mt,KtG:()=>nu,LFG:()=>dn,Lbi:()=>hg,Lck:()=>zm,MMx:()=>Zi,MR2:()=>mD,NdJ:()=>rd,OlP:()=>cn,Oqu:()=>Nm,P3R:()=>gh,PXZ:()=>Bu,Q6J:()=>Tp,QGY:()=>Cm,Qsj:()=>bD,R0b:()=>io,RDi:()=>$g,Rgc:()=>pd,SBq:()=>Eh,Sil:()=>sC,Suo:()=>Jp,TTD:()=>ma,TgZ:()=>nd,VKq:()=>Zm,X6Q:()=>Id,XFs:()=>wt,Xpm:()=>Wr,Xts:()=>ov,Y36:()=>Th,YKP:()=>Bn,YNc:()=>e_,Yjl:()=>qt,Yz7:()=>gt,Z0I:()=>Pn,ZZ4:()=>Dy,_UZ:()=>Dm,_Vd:()=>wh,_c5:()=>by,_uU:()=>Qw,aQg:()=>g0,c2e:()=>hI,cJS:()=>It,cg1:()=>I_,dDg:()=>t0,dqk:()=>ln,eFA:()=>tl,eJc:()=>Qi,eoX:()=>n0,f3M:()=>On,g9A:()=>gf,h0i:()=>ld,hGG:()=>PI,hij:()=>$c,iGM:()=>z_,ifc:()=>Ie,ip1:()=>cg,jDz:()=>AE,kL8:()=>D_,lG2:()=>xt,lqb:()=>Yl,lri:()=>EI,n5z:()=>lc,oAB:()=>ie,oxw:()=>Lw,q4F:()=>W0,qLn:()=>lp,qZA:()=>Bc,rWj:()=>e0,sBO:()=>lC,s_b:()=>ey,soG:()=>fg,tb:()=>wd,tp0:()=>Tt,uIk:()=>Im,vHH:()=>_e,vpe:()=>Co,wAp:()=>Ot,xp6:()=>rw,z2F:()=>gg,zSh:()=>Nc,zs3:()=>Dh});var y=U(7579),te=U(727),F=U(9751),le=U(6451),ue=U(3099);function ce(i){for(let o in i)if(i[o]===ce)return o;throw Error("Could not find renamed property on target object.")}function Ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(Ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const o=i.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function ye(i,o){return null==i||""===i?null===o?"":o:null==o||""===o?i:i+" "+o}const G=ce({__forward_ref__:ce});function W(i){return i.__forward_ref__=W,i.toString=function(){return Ce(this())},i}function Q(i){return We(i)?i():i}function We(i){return"function"==typeof i&&i.hasOwnProperty(G)&&i.__forward_ref__===W}function Me(i){return i&&!!i.\u0275providers}const ht="https://g.co/ng/security#xss";class _e extends Error{constructor(o,a){super(Oe(o,a)),this.code=o}}function Oe(i,o){return`NG0${Math.abs(i)}${o?": "+o.trim():""}`}function Ue(i){return"string"==typeof i?i:null==i?"":String(i)}function Ke(i,o){throw new _e(-201,!1)}function we(i,o){null==i&&function de(i,o,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${o} <=Actual]`))}(o,i,null,"!=")}function gt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function It(i){return{providers:i.providers||[],imports:i.imports||[]}}function Yt(i){return Cn(i,Vn)||Cn(i,ui)}function Pn(i){return null!==Yt(i)}function Cn(i,o){return i.hasOwnProperty(o)?i[o]:null}function pr(i){return i&&(i.hasOwnProperty(Hr)||i.hasOwnProperty(kr))?i[Hr]:null}const Vn=ce({\u0275prov:ce}),Hr=ce({\u0275inj:ce}),ui=ce({ngInjectableDef:ce}),kr=ce({ngInjectorDef:ce});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Lr;function Ar(i){const o=Lr;return Lr=i,o}function zr(i,o,a){const c=Yt(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&wt.Optional?null:void 0!==o?o:void Ke(Ce(i))}const ln=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ci={},xr="__NG_DI_FLAG__",gr="ngTempTokenPath",mr="ngTokenPath",Nn=/\n/gm,li="\u0275",wn="__source";let ks;function sn(i){const o=ks;return ks=i,o}function es(i,o=wt.Default){if(void 0===ks)throw new _e(-203,!1);return null===ks?zr(i,void 0,o):ks.get(i,o&wt.Optional?null:void 0,o)}function dn(i,o=wt.Default){return(function ju(){return Lr}()||es)(Q(i),o)}function On(i,o=wt.Default){return dn(i,Kn(o))}function Kn(i){return typeof i>"u"||"number"==typeof i?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function Ni(i){const o=[];for(let a=0;a<i.length;a++){const c=Q(i[a]);if(Array.isArray(c)){if(0===c.length)throw new _e(900,!1);let d,p=wt.Default;for(let v=0;v<c.length;v++){const I=c[v],b=Ii(I);"number"==typeof b?-1===b?d=I.token:p|=b:d=I}o.push(dn(d,p))}else o.push(dn(c))}return o}function xn(i,o){return i[xr]=o,i.prototype[xr]=o,i}function Ii(i){return i[xr]}function V(i){return{toString:i}.toString()}var Y=(()=>((Y=Y||{})[Y.OnPush=0]="OnPush",Y[Y.Default=1]="Default",Y))(),Ie=(()=>{return(i=Ie||(Ie={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ie;var i})();const ne={},He=[],Nt=ce({\u0275cmp:ce}),on=ce({\u0275dir:ce}),kn=ce({\u0275pipe:ce}),An=ce({\u0275mod:ce}),pn=ce({\u0275fac:ce}),tn=ce({__NG_ELEMENT_ID__:ce});let yr=0;function Wr(i){return V(()=>{const o=pa(i),a={...o,decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===Y.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&i.dependencies||null,getStandaloneInjector:null,data:i.data||{},encapsulation:i.encapsulation||Ie.Emulated,id:"c"+yr++,styles:i.styles||He,_:null,schemas:i.schemas||null,tView:null};al(a);const c=i.dependencies;return a.directiveDefs=ts(c,!1),a.pipeDefs=ts(c,!0),a})}function Ls(i){return Et(i)||Qt(i)}function ge(i){return null!==i}function ie(i){return V(()=>({type:i.type,bootstrap:i.bootstrap||He,declarations:i.declarations||He,imports:i.imports||He,exports:i.exports||He,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function mt(i,o){if(null==i)return ne;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),a[d]=c,o&&(o[d]=p)}return a}function xt(i){return V(()=>{const o=pa(i);return al(o),o})}function qt(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function Et(i){return i[Nt]||null}function Qt(i){return i[on]||null}function nn(i){return i[kn]||null}function ir(i){const o=Et(i)||Qt(i)||nn(i);return null!==o&&o.standalone}function er(i,o){const a=i[An]||null;if(!a&&!0===o)throw new Error(`Type ${Ce(i)} does not have '\u0275mod' property.`);return a}function pa(i){const o={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:o,exportAs:i.exportAs||null,standalone:!0===i.standalone,selectors:i.selectors||He,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:mt(i.inputs,o),outputs:mt(i.outputs)}}function al(i){i.features?.forEach(o=>o(i))}function ts(i,o){if(!i)return null;const a=o?nn:Ls;return()=>("function"==typeof i?i():i).map(c=>a(c)).filter(ge)}const qr=0,Xe=1,jt=2,En=3,Kr=4,an=5,Zn=6,To=7,Ln=8,So=9,ws=10,Ht=11,Ao=12,Fs=13,ns=14,Us=15,jn=16,uo=17,rs=18,bi=19,Es=20,vr=21,In=22,xo=1,Wa=2,co=7,Is=8,Bs=9,sr=10;function _r(i){return Array.isArray(i)&&"object"==typeof i[xo]}function Yr(i){return Array.isArray(i)&&!0===i[xo]}function Ci(i){return 0!=(4&i.flags)}function is(i){return i.componentOffset>-1}function qa(i){return 1==(1&i.flags)}function Ti(i){return!!i.template}function Vs(i){return 0!=(256&i[jt])}function ki(i,o){return i.hasOwnProperty(pn)?i[pn]:null}class os{constructor(o,a,c){this.previousValue=o,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function ma(){return $s}function $s(i){return i.type.prototype.ngOnChanges&&(i.setInput=Xa),Ja}function Ja(){const i=dl(this),o=i?.current;if(o){const a=i.previous;if(a===ne)i.previous=o;else for(let c in o)a[c]=o[c];i.current=null,this.ngOnChanges(o)}}function Xa(i,o,a,c){const d=this.declaredInputs[a],p=dl(i)||function ho(i,o){return i[bs]=o}(i,{previous:ne,current:null}),v=p.current||(p.current={}),I=p.previous,b=I[d];v[d]=new os(b&&b.currentValue,o,I===ne),i[c]=o}ma.ngInherit=!0;const bs="__ngSimpleChanges__";function dl(i){return i[bs]||null}const Mr=function(i,o,a){};function M(i){for(;Array.isArray(i);)i=i[qr];return i}function $(i,o){return M(o[i.index])}function rt(i,o){return i.data[o]}function zt(i,o){const a=o[i];return _r(a)?a:a[qr]}function $n(i){return 64==(64&i[jt])}function wr(i,o){return null==o?null:i[o]}function as(i){i[rs]=0}function Mo(i,o){i[an]+=o;let a=i,c=i[En];for(;null!==c&&(1===o&&1===a[an]||-1===o&&0===a[an]);)c[an]+=o,a=c,c=c[En]}const Bt={lFrame:fl(null),bindingsEnabled:!0};function Gu(){return Bt.bindingsEnabled}function ve(){return Bt.lFrame.lView}function Gt(){return Bt.lFrame.tView}function tu(i){return Bt.lFrame.contextLView=i,i[Ln]}function nu(i){return Bt.lFrame.contextLView=null,i}function Er(){let i=Ro();for(;null!==i&&64===i.type;)i=i.parent;return i}function Ro(){return Bt.lFrame.currentTNode}function fi(i,o){const a=Bt.lFrame;a.currentTNode=i,a.isParent=o}function Vd(){return Bt.lFrame.isParent}function Po(){return Bt.lFrame.bindingIndex++}function Ku(i,o){const a=Bt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ar(o)}function ar(i){Bt.lFrame.currentDirectiveIndex=i}function hl(){return Bt.lFrame.currentQueryIndex}function Zu(i){Bt.lFrame.currentQueryIndex=i}function $d(i){const o=i[Xe];return 2===o.type?o.declTNode:1===o.type?i[Zn]:null}function Yu(i,o,a){if(a&wt.SkipSelf){let d=o,p=i;for(;!(d=d.parent,null!==d||a&wt.Host||(d=$d(p),null===d||(p=p[Us],10&d.type))););if(null===d)return!1;o=d,i=p}const c=Bt.lFrame=su();return c.currentTNode=o,c.lView=i,!0}function Qu(i){const o=su(),a=i[Xe];Bt.lFrame=o,o.currentTNode=a.firstChild,o.lView=i,o.tView=a,o.contextLView=i,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function su(){const i=Bt.lFrame,o=null===i?null:i.child;return null===o?fl(i):o}function fl(i){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=o),o}function ou(){const i=Bt.lFrame;return Bt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Hd=ou;function Ju(){const i=ou();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function Fr(){return Bt.lFrame.selectedIndex}function zs(i){Bt.lFrame.selectedIndex=i}function Fn(){const i=Bt.lFrame;return rt(i.tView,i.selectedIndex)}function tc(i,o){for(let a=o.directiveStart,c=o.directiveEnd;a<c;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:I,ngAfterViewInit:b,ngAfterViewChecked:x,ngOnDestroy:P}=p;v&&(i.contentHooks??(i.contentHooks=[])).push(-a,v),I&&((i.contentHooks??(i.contentHooks=[])).push(a,I),(i.contentCheckHooks??(i.contentCheckHooks=[])).push(a,I)),b&&(i.viewHooks??(i.viewHooks=[])).push(-a,b),x&&((i.viewHooks??(i.viewHooks=[])).push(a,x),(i.viewCheckHooks??(i.viewCheckHooks=[])).push(a,x)),null!=P&&(i.destroyHooks??(i.destroyHooks=[])).push(a,P)}}function pl(i,o,a){ml(i,o,3,a)}function gl(i,o,a,c){(3&i[jt])===a&&ml(i,o,a,c)}function Gd(i,o){let a=i[jt];(3&a)===o&&(a&=2047,a+=1,i[jt]=a)}function ml(i,o,a,c){const p=c??-1,v=o.length-1;let I=0;for(let b=void 0!==c?65535&i[rs]:0;b<v;b++)if("number"==typeof o[b+1]){if(I=o[b],null!=c&&I>=c)break}else o[b]<0&&(i[rs]+=65536),(I<p||-1==p)&&(_a(i,a,o,b),i[rs]=(4294901760&i[rs])+b+2),b++}function _a(i,o,a,c){const d=a[c]<0,p=a[c+1],I=i[d?-a[c]:a[c]];if(d){if(i[jt]>>11<i[rs]>>16&&(3&i[jt])===o){i[jt]+=2048,Mr(4,I,p);try{p.call(I)}finally{Mr(5,I,p)}}}else{Mr(4,I,p);try{p.call(I)}finally{Mr(5,I,p)}}}const wa=-1;class Gs{constructor(o,a,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Ea(i,o,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const p=a[c++],v=a[c++],I=a[c++];i.setAttribute(o,v,I,p)}else{const p=d,v=a[++c];Lo(p)?i.setProperty(o,p,v):i.setAttribute(o,p,v),c++}}return c}function yl(i){return 3===i||4===i||6===i}function Lo(i){return 64===i.charCodeAt(0)}function Fo(i,o){if(null!==o&&0!==o.length)if(null===i||0===i.length)i=o.slice();else{let a=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?a=d:0===a||ic(i,a,d,null,-1===a||2===a?o[++c]:null)}}return i}function ic(i,o,a,c,d){let p=0,v=i.length;if(-1===o)v=-1;else for(;p<i.length;){const I=i[p++];if("number"==typeof I){if(I===o){v=-1;break}if(I>o){v=p-1;break}}}for(;p<i.length;){const I=i[p];if("number"==typeof I)break;if(I===a){if(null===c)return void(null!==d&&(i[p+1]=d));if(c===i[p+1])return void(i[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(i.splice(v,0,o),p=v+1),i.splice(p++,0,a),null!==c&&i.splice(p++,0,c),null!==d&&i.splice(p++,0,d)}function Uo(i){return i!==wa}function fo(i){return 32767&i}function Bo(i,o){let a=function Wd(i){return i>>16}(i),c=o;for(;a>0;)c=c[Us],a--;return c}let sc=!0;function uu(i){const o=sc;return sc=i,o}const oc=255,qd=5;let Vo=0;const us={};function vl(i,o){const a=Da(i,o);if(-1!==a)return a;const c=o[Xe];c.firstCreatePass&&(i.injectorIndex=o.length,Ia(c.data,i),Ia(o,null),Ia(c.blueprint,null));const d=Kd(i,o),p=i.injectorIndex;if(Uo(d)){const v=fo(d),I=Bo(d,o),b=I[Xe].data;for(let x=0;x<8;x++)o[p+x]=I[v+x]|b[v+x]}return o[p+8]=d,p}function Ia(i,o){i.push(0,0,0,0,0,0,0,0,o)}function Da(i,o){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===o[i.injectorIndex+8]?-1:i.injectorIndex}function Kd(i,o){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=o;for(;null!==d;){if(c=du(d),null===c)return wa;if(a++,d=d[Us],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return wa}function Tn(i,o,a){!function Ws(i,o,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(tn)&&(c=a[tn]),null==c&&(c=a[tn]=Vo++);const d=c&oc;o.data[i+(d>>qd)]|=1<<d}(i,o,a)}function ac(i,o,a){if(a&wt.Optional||void 0!==i)return i;Ke()}function _l(i,o,a,c){if(a&wt.Optional&&void 0===c&&(c=null),!(a&(wt.Self|wt.Host))){const d=i[So],p=Ar(void 0);try{return d?d.get(o,c,a&wt.Optional):zr(o,c,a&wt.Optional)}finally{Ar(p)}}return ac(c,0,a)}function uc(i,o,a,c=wt.Default,d){if(null!==i){if(1024&o[jt]){const v=function El(i,o,a,c,d){let p=i,v=o;for(;null!==p&&null!==v&&1024&v[jt]&&!(256&v[jt]);){const I=cc(p,v,a,c|wt.Self,us);if(I!==us)return I;let b=p.parent;if(!b){const x=v[vr];if(x){const P=x.get(a,us,c);if(P!==us)return P}b=du(v),v=v[Us]}p=b}return d}(i,o,a,c,us);if(v!==us)return v}const p=cc(i,o,a,c,us);if(p!==us)return p}return _l(o,a,c,d)}function cc(i,o,a,c,d){const p=function wl(i){if("string"==typeof i)return i.charCodeAt(0)||0;const o=i.hasOwnProperty(tn)?i[tn]:void 0;return"number"==typeof o?o>=0?o&oc:Nf:o}(a);if("function"==typeof p){if(!Yu(o,i,c))return c&wt.Host?ac(d,0,c):_l(o,a,c,d);try{const v=p(c);if(null!=v||c&wt.Optional)return v;Ke()}finally{Hd()}}else if("number"==typeof p){let v=null,I=Da(i,o),b=wa,x=c&wt.Host?o[jn][Zn]:null;for((-1===I||c&wt.SkipSelf)&&(b=-1===I?Kd(i,o):o[I+8],b!==wa&&lu(c,!1)?(v=o[Xe],I=fo(b),o=Bo(b,o)):I=-1);-1!==I;){const P=o[Xe];if(cu(p,I,P.data)){const B=Ir(I,o,a,v,c,x);if(B!==us)return B}b=o[I+8],b!==wa&&lu(c,o[Xe].data[I+8]===x)&&cu(p,I,o)?(v=P,I=fo(b),o=Bo(b,o)):I=-1}}return d}function Ir(i,o,a,c,d,p){const v=o[Xe],I=v.data[i+8],P=jo(I,v,a,null==c?is(I)&&sc:c!=v&&0!=(3&I.type),d&wt.Host&&p===I);return null!==P?tr(o,v,P,I):us}function jo(i,o,a,c,d){const p=i.providerIndexes,v=o.data,I=1048575&p,b=i.directiveStart,P=p>>20,Z=d?I+P:i.directiveEnd;for(let re=c?I:I+P;re<Z;re++){const De=v[re];if(re<b&&a===De||re>=b&&De.type===a)return re}if(d){const re=v[b];if(re&&Ti(re)&&re.type===a)return b}return null}function tr(i,o,a,c){let d=i[a];const p=o.data;if(function kg(i){return i instanceof Gs}(d)){const v=d;v.resolving&&function Ve(i,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${i}`:"";throw new _e(-200,`Circular dependency in DI detected for ${i}${a}`)}(function qe(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():Ue(i)}(p[a]));const I=uu(v.canSeeViewProviders);v.resolving=!0;const b=v.injectImpl?Ar(v.injectImpl):null;Yu(i,c,wt.Default);try{d=i[a]=v.factory(void 0,p,i,c),o.firstCreatePass&&a>=c.directiveStart&&function Og(i,o,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=$s(o);(a.preOrderHooks??(a.preOrderHooks=[])).push(i,v),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,v)}d&&(a.preOrderHooks??(a.preOrderHooks=[])).push(0-i,d),p&&((a.preOrderHooks??(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks??(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],o)}finally{null!==b&&Ar(b),uu(I),v.resolving=!1,Hd()}}return d}function cu(i,o,a){return!!(a[o+(i>>qd)]&1<<i)}function lu(i,o){return!(i&wt.Self||i&wt.Host&&o)}class qs{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,c){return uc(this._tNode,this._lView,o,Kn(c),a)}}function Nf(){return new qs(Er(),ve())}function lc(i){return V(()=>{const o=i.prototype.constructor,a=o[pn]||$o(o),c=Object.prototype;let d=Object.getPrototypeOf(i.prototype).constructor;for(;d&&d!==c;){const p=d[pn]||$o(d);if(p&&p!==a)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function $o(i){return We(i)?()=>{const o=$o(Q(i));return o&&o()}:ki(i)}function du(i){const o=i[Xe],a=o.type;return 2===a?o.declTNode:1===a?i[Zn]:null}function ba(i){return function Zd(i,o){if("class"===o)return i.classes;if("style"===o)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const p=a[d];if(yl(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(p===o)return a[d+1];d+=2}}}return null}(Er(),i)}const Ca="__parameters__";function zo(i,o,a){return V(()=>{const c=function Ho(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return I.annotation=v,I;function I(b,x,P){const B=b.hasOwnProperty(Ca)?b[Ca]:Object.defineProperty(b,Ca,{value:[]})[Ca];for(;B.length<=P;)B.push(null);return(B[P]=B[P]||[]).push(v),b}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class cn{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=gt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ss(i,o){i.forEach(a=>Array.isArray(a)?Ss(a,o):o(a))}function Uf(i,o,a){o>=i.length?i.push(a):i.splice(o,0,a)}function Wo(i,o){return o>=i.length-1?i.pop():i.splice(o,1)[0]}const mu=xn(zo("Optional"),8),Tt=xn(zo("SkipSelf"),4);var Mt=(()=>((Mt=Mt||{})[Mt.Important=1]="Important",Mt[Mt.DashCase=2]="DashCase",Mt))();const eh=new Map;let fs=0;const X="__ngContext__";function ae(i,o){_r(o)?(i[X]=o[Es],function nh(i){eh.set(i[Es],i)}(o)):i[X]=o}let ps;function yo(i,o){return ps(i,o)}function kl(i){const o=i[En];return Yr(o)?o[En]:o}function Ll(i){return zf(i[Fs])}function na(i){return zf(i[Kr])}function zf(i){for(;null!==i&&!Yr(i);)i=i[Kr];return i}function ra(i,o,a,c,d){if(null!=c){let p,v=!1;Yr(c)?p=c:_r(c)&&(v=!0,c=c[qr]);const I=M(c);0===i&&null!==a?null==d?Ul(o,a,I):xa(o,a,I,d||null,!0):1===i&&null!==a?xa(o,a,I,d||null,!0):2===i?function Kf(i,o,a){const c=ia(i,o);c&&function Bl(i,o,a,c){i.removeChild(o,a,c)}(i,c,o,a)}(o,I,v):3===i&&o.destroyNode(I),null!=p&&function Hl(i,o,a,c,d){const p=a[co];p!==M(a)&&ra(o,i,c,p,d);for(let I=sr;I<a.length;I++){const b=a[I];$l(b[Xe],b,i,o,c,p)}}(o,i,p,a,d)}}function Wf(i,o,a){return i.createElement(o,a)}function Bg(i,o){const a=i[Bs],c=a.indexOf(o),d=o[En];512&o[jt]&&(o[jt]&=-513,Mo(d,-1)),a.splice(c,1)}function Fl(i,o){if(i.length<=sr)return;const a=sr+o,c=i[a];if(c){const d=c[uo];null!==d&&d!==i&&Bg(d,c),o>0&&(i[a-1][Kr]=c[Kr]);const p=Wo(i,sr+o);!function Gy(i,o){$l(i,o,o[Ht],2,null,null),o[qr]=null,o[Zn]=null}(c[Xe],c);const v=p[bi];null!==v&&v.detachView(p[Xe]),c[En]=null,c[Kr]=null,c[jt]&=-65}return c}function sh(i,o){if(!(128&o[jt])){const a=o[Ht];a.destroyNode&&$l(i,o,a,3,null,null),function L0(i){let o=i[Fs];if(!o)return Aa(i[Xe],i);for(;o;){let a=null;if(_r(o))a=o[Fs];else{const c=o[sr];c&&(a=c)}if(!a){for(;o&&!o[Kr]&&o!==i;)_r(o)&&Aa(o[Xe],o),o=o[En];null===o&&(o=i),_r(o)&&Aa(o[Xe],o),a=o&&o[Kr]}o=a}}(o)}}function Aa(i,o){if(!(128&o[jt])){o[jt]&=-65,o[jt]|=128,function Du(i,o){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=o[a[c]];if(!(d instanceof Gs)){const p=a[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const I=d[p[v]],b=p[v+1];Mr(4,I,b);try{b.call(I)}finally{Mr(5,I,b)}}else{Mr(4,d,p);try{p.call(d)}finally{Mr(5,d,p)}}}}}(i,o),function qy(i,o){const a=i.cleanup,c=o[To];let d=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const v=a[p+3];v>=0?c[d=v]():c[d=-v].unsubscribe(),p+=2}else{const v=c[d=a[p+1]];a[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)(0,c[p])();o[To]=null}}(i,o),1===o[Xe].type&&o[Ht].destroy();const a=o[uo];if(null!==a&&Yr(o[En])){a!==o[En]&&Bg(a,o);const c=o[bi];null!==c&&c.detachView(i)}!function E(i){eh.delete(i[Es])}(o)}}function Tc(i,o,a){return function Ky(i,o,a){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return a[qr];{const{componentOffset:d}=c;if(d>-1){const{encapsulation:p}=i.data[c.directiveStart+d];if(p===Ie.None||p===Ie.Emulated)return null}return $(c,a)}}(i,o.parent,a)}function xa(i,o,a,c,d){i.insertBefore(o,a,c,d)}function Ul(i,o,a){i.appendChild(o,a)}function Vg(i,o,a,c,d){null!==c?xa(i,o,a,c,d):Ul(i,o,a)}function ia(i,o){return i.parentNode(o)}let qf,Wl,Ac,bu=function Vl(i,o,a){return 40&i.type?$(i,a):null};function Cu(i,o,a,c){const d=Tc(i,c,o),p=o[Ht],I=function ah(i,o,a){return bu(i,o,a)}(c.parent||o[Zn],c,o);if(null!=d)if(Array.isArray(a))for(let b=0;b<a.length;b++)Vg(p,d,a[b],I,!1);else Vg(p,d,a,I,!1);void 0!==qf&&qf(p,c,o,a,d)}function ch(i,o){if(null!==o){const a=o.type;if(3&a)return $(o,i);if(4&a)return Zs(-1,i[o.index]);if(8&a){const c=o.child;if(null!==c)return ch(i,c);{const d=i[o.index];return Yr(d)?Zs(-1,d):M(d)}}if(32&a)return yo(o,i)()||M(i[o.index]);{const c=lh(i,o);return null!==c?Array.isArray(c)?c[0]:ch(kl(i[jn]),c):ch(i,o.next)}}return null}function lh(i,o){return null!==o?i[jn][Zn].projection[o.projection]:null}function Zs(i,o){const a=sr+i+1;if(a<o.length){const c=o[a],d=c[Xe].firstChild;if(null!==d)return ch(c,d)}return o[co]}function jl(i,o,a,c,d,p,v){for(;null!=a;){const I=c[a.index],b=a.type;if(v&&0===o&&(I&&ae(M(I),c),a.flags|=2),32!=(32&a.flags))if(8&b)jl(i,o,a.child,c,d,p,!1),ra(o,i,d,I,p);else if(32&b){const x=yo(a,c);let P;for(;P=x();)ra(o,i,d,P,p);ra(o,i,d,I,p)}else 16&b?Yf(i,o,c,a,d,p):ra(o,i,d,I,p);a=v?a.projectionNext:a.next}}function $l(i,o,a,c,d,p){jl(a,c,i.firstChild,o,d,p,!1)}function Yf(i,o,a,c,d,p){const v=a[jn],b=v[Zn].projection[c.projection];if(Array.isArray(b))for(let x=0;x<b.length;x++)ra(o,i,d,b[x],p);else jl(i,o,b,v[En],d,p,!0)}function xs(i,o,a){""===a?i.removeAttribute(o,"class"):i.setAttribute(o,"class",a)}function zl(i,o,a){const{mergedAttrs:c,classes:d,styles:p}=a;null!==c&&Ea(i,o,c),null!==d&&xs(i,o,d),null!==p&&function Qf(i,o,a){i.setAttribute(o,"style",a)}(i,o,p)}function $g(i){Wl=i}function ep(i){return function Xf(){if(void 0===Ac&&(Ac=null,ln.trustedTypes))try{Ac=ln.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Ac}()?.createScriptURL(i)||i}class zg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${ht})`}}function ti(i){return i instanceof zg?i.changingThisBreaksApplicationSecurity:i}function Hi(i,o){const a=function xc(i){return i instanceof zg&&i.getTypeName()||null}(i);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${ht})`)}return a===o}const op=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var zn=(()=>((zn=zn||{})[zn.NONE=0]="NONE",zn[zn.HTML=1]="HTML",zn[zn.STYLE=2]="STYLE",zn[zn.SCRIPT=3]="SCRIPT",zn[zn.URL=4]="URL",zn[zn.RESOURCE_URL=5]="RESOURCE_URL",zn))();function fh(i){const o=ap();return o?o.sanitize(zn.URL,i)||"":Hi(i,"URL")?ti(i):function Mc(i){return(i=String(i)).match(op)?i:"unsafe:"+i}(Ue(i))}function Kl(i){const o=ap();if(o)return ep(o.sanitize(zn.RESOURCE_URL,i)||"");if(Hi(i,"ResourceURL"))return ep(ti(i));throw new _e(904,!1)}function gh(i,o,a){return function rv(i,o){return"src"===o&&("embed"===i||"frame"===i||"iframe"===i||"media"===i||"script"===i)||"href"===o&&("base"===i||"link"===i)?Kl:fh}(o,a)(i)}function ap(){const i=ve();return i&&i[Ao]}const ov=new cn("ENVIRONMENT_INITIALIZER"),Zl=new cn("INJECTOR",-1),mh=new cn("INJECTOR_DEF_TYPES");class F0{get(o,a=ci){if(a===ci){const c=new Error(`NullInjectorError: No provider for ${Ce(o)}!`);throw c.name="NullInjectorError",c}return a}}function mD(i){return{\u0275providers:i}}function up(...i){return{\u0275providers:yh(0,i),\u0275fromNgModule:!0}}function yh(i,...o){const a=[],c=new Set;let d;return Ss(o,p=>{const v=p;av(v,a,[],c)&&(d||(d=[]),d.push(v))}),void 0!==d&&U0(d,a),a}function U0(i,o){for(let a=0;a<i.length;a++){const{providers:d}=i[a];uv(d,p=>{o.push(p)})}}function av(i,o,a,c){if(!(i=Q(i)))return!1;let d=null,p=pr(i);const v=!p&&Et(i);if(p||v){if(v&&!v.standalone)return!1;d=i}else{const b=i.ngModule;if(p=pr(b),!p)return!1;d=b}const I=c.has(d);if(v){if(I)return!1;if(c.add(d),v.dependencies){const b="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of b)av(x,o,a,c)}}else{if(!p)return!1;{if(null!=p.imports&&!I){let x;c.add(d);try{Ss(p.imports,P=>{av(P,o,a,c)&&(x||(x=[]),x.push(P))})}finally{}void 0!==x&&U0(x,o)}if(!I){const x=ki(d)||(()=>new d);o.push({provide:d,useFactory:x,deps:He},{provide:mh,useValue:d,multi:!0},{provide:ov,useValue:()=>dn(d),multi:!0})}const b=p.providers;null==b||I||uv(b,P=>{o.push(P)})}}return d!==i&&void 0!==i.providers}function uv(i,o){for(let a of i)Me(a)&&(a=a.\u0275providers),Array.isArray(a)?uv(a,o):o(a)}const yD=ce({provide:String,useValue:ce});function cv(i){return null!==i&&"object"==typeof i&&yD in i}function xu(i){return"function"==typeof i}const Nc=new cn("Set Injector scope."),Qg={},_D={};let lv;function Jg(){return void 0===lv&&(lv=new F0),lv}class Yl{}class V0 extends Yl{get destroyed(){return this._destroyed}constructor(o,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,_h(o,v=>this.processProvider(v)),this.records.set(Zl,vh(void 0,this)),d.has("environment")&&this.records.set(Yl,vh(void 0,this));const p=this.records.get(Nc);null!=p&&"string"==typeof p.value&&this.scopes.add(p.value),this.injectorDefTypes=new Set(this.get(mh.multi,He,wt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const a=sn(this),c=Ar(void 0);try{return o()}finally{sn(a),Ar(c)}}get(o,a=ci,c=wt.Default){this.assertNotDestroyed(),c=Kn(c);const d=sn(this),p=Ar(void 0);try{if(!(c&wt.SkipSelf)){let I=this.records.get(o);if(void 0===I){const b=function pv(i){return"function"==typeof i||"object"==typeof i&&i instanceof cn}(o)&&Yt(o);I=b&&this.injectableDefInScope(b)?vh(dv(o),Qg):null,this.records.set(o,I)}if(null!=I)return this.hydrate(o,I)}return(c&wt.Self?Jg():this.parent).get(o,a=c&wt.Optional&&a===ci?null:a)}catch(v){if("NullInjectorError"===v.name){if((v[gr]=v[gr]||[]).unshift(Ce(o)),d)throw v;return function Gr(i,o,a,c){const d=i[gr];throw o[wn]&&d.unshift(o[wn]),i.message=function j(i,o,a,c=null){i=i&&"\n"===i.charAt(0)&&i.charAt(1)==li?i.slice(2):i;let d=Ce(o);if(Array.isArray(o))d=o.map(Ce).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let I=o[v];p.push(v+":"+("string"==typeof I?JSON.stringify(I):Ce(I)))}d=`{${p.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Nn,"\n  ")}`}("\n"+i.message,d,a,c),i[mr]=d,i[gr]=null,i}(v,o,"R3InjectorError",this.source)}throw v}finally{Ar(p),sn(d)}}resolveInjectorInitializers(){const o=sn(this),a=Ar(void 0);try{const c=this.get(ov.multi,He,wt.Self);for(const d of c)d()}finally{sn(o),Ar(a)}}toString(){const o=[],a=this.records;for(const c of a.keys())o.push(Ce(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(o){let a=xu(o=Q(o))?o:Q(o&&o.provide);const c=function ED(i){return cv(i)?vh(void 0,i.useValue):vh(function hv(i,o,a){let c;if(xu(i)){const d=Q(i);return ki(d)||dv(d)}if(cv(i))c=()=>Q(i.useValue);else if(function B0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Ni(i.deps||[]));else if(function vD(i){return!(!i||!i.useExisting)}(i))c=()=>dn(Q(i.useExisting));else{const d=Q(i&&(i.useClass||i.provide));if(!function fv(i){return!!i.deps}(i))return ki(d)||dv(d);c=()=>new d(...Ni(i.deps))}return c}(i),Qg)}(o);if(xu(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=vh(void 0,Qg,!0),d.factory=()=>Ni(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,c)}hydrate(o,a){return a.value===Qg&&(a.value=_D,a.value=a.factory()),"object"==typeof a.value&&a.value&&function j0(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=Q(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function dv(i){const o=Yt(i),a=null!==o?o.factory:ki(i);if(null!==a)return a;if(i instanceof cn)throw new _e(204,!1);if(i instanceof Function)return function wD(i){const o=i.length;if(o>0)throw function hc(i,o){const a=[];for(let c=0;c<i;c++)a.push(o);return a}(o,"?"),new _e(204,!1);const a=function qn(i){return i&&(i[Vn]||i[ui])||null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new _e(204,!1)}function vh(i,o,a=!1){return{factory:i,value:o,multi:a?[]:void 0}}function _h(i,o){for(const a of i)Array.isArray(a)?_h(a,o):a&&Me(a)?_h(a.\u0275providers,o):o(a)}class ID{}class $0{}class z0{resolveComponentFactory(o){throw function DD(i){const o=Error(`No component factory found for ${Ce(i)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=i,o}(o)}}let wh=(()=>{class i{}return i.NULL=new z0,i})();function Xg(){return Mu(Er(),ve())}function Mu(i,o){return new Eh($(i,o))}let Eh=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Xg,i})();function cp(i){return i instanceof Eh?i.nativeElement:i}class mv{}let bD=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function CD(){const i=ve(),a=zt(Er().index,i);return(_r(a)?a:i)[Ht]}(),i})(),TD=(()=>{class i{}return i.\u0275prov=gt({token:i,providedIn:"root",factory:()=>null}),i})();class G0{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const W0=new G0("15.2.9"),em={},yv="ngOriginalError";function vv(i){return i[yv]}class lp{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&vv(o);for(;a&&vv(a);)a=vv(a);return a||null}}function Ra(i){return i instanceof Function?i():i}function J0(i,o,a){let c=i.length;for(;;){const d=i.indexOf(o,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||i.charCodeAt(d+p)<=32)return d}a=d+1}}const _v="ng-template";function wv(i,o,a){let c=0,d=!0;for(;c<i.length;){let p=i[c++];if("string"==typeof p&&d){const v=i[c++];if(a&&"class"===p&&-1!==J0(v.toLowerCase(),o,0))return!0}else{if(1===p){for(;c<i.length&&"string"==typeof(p=i[c++]);)if(p.toLowerCase()===o)return!0;return!1}"number"==typeof p&&(d=!1)}}return!1}function Ev(i){return 4===i.type&&i.value!==_v}function Ih(i,o,a){return o===(4!==i.type||a?i.value:_v)}function Iv(i,o,a){let c=4;const d=i.attrs||[],p=function ew(i){for(let o=0;o<i.length;o++)if(yl(i[o]))return o;return i.length}(d);let v=!1;for(let I=0;I<o.length;I++){const b=o[I];if("number"!=typeof b){if(!v)if(4&c){if(c=2|1&c,""!==b&&!Ih(i,b,a)||""===b&&1===o.length){if(sa(c))return!1;v=!0}}else{const x=8&c?b:o[++I];if(8&c&&null!==i.attrs){if(!wv(i.attrs,x,a)){if(sa(c))return!1;v=!0}continue}const B=X0(8&c?"class":b,d,Ev(i),a);if(-1===B){if(sa(c))return!1;v=!0;continue}if(""!==x){let Z;Z=B>p?"":d[B+1].toLowerCase();const re=8&c?Z:null;if(re&&-1!==J0(re,x,0)||2&c&&x!==Z){if(sa(c))return!1;v=!0}}}}else{if(!v&&!sa(c)&&!sa(b))return!1;if(v&&sa(b))continue;v=!1,c=b|1&c}}return sa(c)||v}function sa(i){return 0==(1&i)}function X0(i,o,a,c){if(null===o)return-1;let d=0;if(c||!a){let p=!1;for(;d<o.length;){const v=o[d];if(v===i)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let I=o[++d];for(;"string"==typeof I;)I=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function tw(i,o){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===o)return a;a++}return-1}(o,i)}function hp(i,o,a=!1){for(let c=0;c<o.length;c++)if(Iv(i,o[c],a))return!0;return!1}function nw(i,o){return i?":not("+o.trim()+")":o}function OD(i){let o=i[0],a=1,c=2,d="",p=!1;for(;a<i.length;){let v=i[a];if("string"==typeof v)if(2&c){const I=i[++a];d+="["+v+(I.length>0?'="'+I+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!sa(v)&&(o+=nw(p,d),d=""),c=v,p=p||!sa(c);a++}return""!==d&&(o+=nw(p,d)),o}const Wt={};function rw(i){iw(Gt(),ve(),Fr()+i,!1)}function iw(i,o,a,c){if(!c)if(3==(3&o[jt])){const p=i.preOrderCheckHooks;null!==p&&pl(o,p,a)}else{const p=i.preOrderHooks;null!==p&&gl(o,p,0,a)}zs(a)}function ow(i,o=null,a=null,c){const d=bv(i,o,a,c);return d.resolveInjectorInitializers(),d}function bv(i,o=null,a=null,c,d=new Set){const p=[a||He,up(i)];return c=c||("object"==typeof i?void 0:Ce(i)),new V0(p,o||Jg(),c||null,d)}let Dh=(()=>{class i{static create(a,c){if(Array.isArray(a))return ow({name:""},c,a,"");{const d=a.name??"";return ow({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=ci,i.NULL=new F0,i.\u0275prov=gt({token:i,providedIn:"any",factory:()=>dn(Zl)}),i.__NG_ELEMENT_ID__=-1,i})();function Th(i,o=wt.Default){const a=ve();return null===a?dn(i,o):uc(Er(),a,Q(i),o)}function dw(){throw new Error("invalid")}function hw(i,o){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const p=a[c+1];if(-1!==p){const v=i.data[p];Zu(a[c]),v.contentQueries(2,o[p],p)}}}function im(i,o,a,c,d,p,v,I,b,x,P){const B=o.blueprint.slice();return B[qr]=d,B[jt]=76|c,(null!==P||i&&1024&i[jt])&&(B[jt]|=1024),as(B),B[En]=B[Us]=i,B[Ln]=a,B[ws]=v||i&&i[ws],B[Ht]=I||i&&i[Ht],B[Ao]=b||i&&i[Ao]||null,B[So]=x||i&&i[So]||null,B[Zn]=p,B[Es]=function th(){return fs++}(),B[vr]=P,B[jn]=2==o.type?i[jn]:B,B}function mp(i,o,a,c,d){let p=i.data[o];if(null===p)p=function xv(i,o,a,c,d){const p=Ro(),v=Vd(),b=i.data[o]=function Oc(i,o,a,c,d,p){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,a,o,c,d);return null===i.firstChild&&(i.firstChild=b),null!==p&&(v?null==p.child&&null!==b.parent&&(p.child=b):null===p.next&&(p.next=b,b.prev=p)),b}(i,o,a,c,d),function jd(){return Bt.lFrame.inI18n}()&&(p.flags|=32);else if(64&p.type){p.type=a,p.value=c,p.attrs=d;const v=function Wu(){const i=Bt.lFrame,o=i.currentTNode;return i.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return fi(p,!0),p}function yp(i,o,a,c){if(0===a)return-1;const d=o.length;for(let p=0;p<a;p++)o.push(c),i.blueprint.push(c),i.data.push(null);return d}function Mv(i,o,a){Qu(o);try{const c=i.viewQuery;null!==c&&wp(1,c,a);const d=i.template;null!==d&&sm(i,o,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&hw(i,o),i.staticViewQueries&&wp(2,i.viewQuery,a);const p=i.components;null!==p&&function fw(i,o){for(let a=0;a<o.length;a++)Lv(i,o[a])}(o,p)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{o[jt]&=-5,Ju()}}function Br(i,o,a,c){const d=o[jt];if(128!=(128&d)){Qu(o);try{as(o),function Ts(i){return Bt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&sm(i,o,a,2,c);const v=3==(3&d);if(v){const x=i.preOrderCheckHooks;null!==x&&pl(o,x,null)}else{const x=i.preOrderHooks;null!==x&&gl(o,x,0,null),Gd(o,0)}if(function sb(i){for(let o=Ll(i);null!==o;o=na(o)){if(!o[Wa])continue;const a=o[Bs];for(let c=0;c<a.length;c++){const d=a[c];512&d[jt]||Mo(d[En],1),d[jt]|=512}}}(o),function ib(i){for(let o=Ll(i);null!==o;o=na(o))for(let a=sr;a<o.length;a++){const c=o[a],d=c[Xe];$n(c)&&Br(d,c,d.template,c[Ln])}}(o),null!==i.contentQueries&&hw(i,o),v){const x=i.contentCheckHooks;null!==x&&pl(o,x)}else{const x=i.contentHooks;null!==x&&gl(o,x,1),Gd(o,1)}!function QD(i,o){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)zs(~d);else{const p=d,v=a[++c],I=a[++c];Ku(v,p),I(2,o[p])}}}finally{zs(-1)}}(i,o);const I=i.components;null!==I&&function JD(i,o){for(let a=0;a<o.length;a++)Sh(i,o[a])}(o,I);const b=i.viewQuery;if(null!==b&&wp(2,b,c),v){const x=i.viewCheckHooks;null!==x&&pl(o,x)}else{const x=i.viewHooks;null!==x&&gl(o,x,2),Gd(o,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),o[jt]&=-41,512&o[jt]&&(o[jt]&=-513,Mo(o[En],-1))}finally{Ju()}}}function sm(i,o,a,c,d){const p=Fr(),v=2&c;try{zs(-1),v&&o.length>In&&iw(i,o,In,!1),Mr(v?2:0,d),a(c,d)}finally{zs(p),Mr(v?3:1,d)}}function Rv(i,o,a){if(Ci(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=i.data[p];v.contentQueries&&v.contentQueries(1,a[p],p)}}}function Pv(i,o,a){Gu()&&(function nb(i,o,a,c){const d=a.directiveStart,p=a.directiveEnd;is(a)&&function zi(i,o,a){const c=$(o,i),d=XD(a),p=i[ws],v=pm(i,im(i,d,null,a.onPush?32:16,c,o,p,p.createRenderer(c,a),null,null,null));i[o.index]=v}(o,a,i.data[d+a.componentOffset]),i.firstCreatePass||vl(a,o),ae(c,o);const v=a.initialInputs;for(let I=d;I<p;I++){const b=i.data[I],x=tr(o,i,I,a);ae(x,o),null!==v&&dm(0,I-d,x,b,0,v),Ti(b)&&(zt(a.index,o)[Ln]=tr(o,i,I,a))}}(i,o,a,$(a,o)),64==(64&a.flags)&&Ai(i,o,a))}function Qs(i,o,a=$){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],I=-1===v?a(o,i):i[v];i[d++]=I}}}function XD(i){const o=i.tView;return null===o||o.incompleteFirstPass?i.tView=Nv(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):o}function Nv(i,o,a,c,d,p,v,I,b,x){const P=In+c,B=P+d,Z=function be(i,o){const a=[];for(let c=0;c<o;c++)a.push(c<i?null:Wt);return a}(P,B),re="function"==typeof x?x():x;return Z[Xe]={type:i,blueprint:Z,template:a,queries:null,viewQuery:I,declTNode:o,data:Z.slice().fill(null,P),bindingStartIndex:P,expandoStartIndex:B,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:b,consts:re,incompleteFirstPass:!1}}function vp(i,o,a,c){const d=gm(o);null===a?d.push(c):(d.push(a),i.firstCreatePass&&Fv(i).push(c,d.length-1))}function yn(i,o,a,c){for(let d in i)if(i.hasOwnProperty(d)){a=null===a?{}:a;const p=i[d];null===c?pw(a,o,d,p):c.hasOwnProperty(d)&&pw(a,o,c[d],p)}return a}function pw(i,o,a,c){i.hasOwnProperty(a)?i[a].push(o,c):i[a]=[o,c]}function Ov(i,o,a,c){if(Gu()){const d=null===c?null:{"":-1},p=function mi(i,o){const a=i.directiveRegistry;let c=null,d=null;if(a)for(let p=0;p<a.length;p++){const v=a[p];if(hp(o,v.selectors,!1))if(c||(c=[]),Ti(v))if(null!==v.findHostDirectiveDefs){const I=[];d=d||new Map,v.findHostDirectiveDefs(v,I,d),c.unshift(...I,v),Pa(i,o,I.length)}else c.unshift(v),Pa(i,o,0);else d=d||new Map,v.findHostDirectiveDefs?.(v,c,d),c.push(v)}return null===c?null:[c,d]}(i,a);let v,I;null===p?v=I=null:[v,I]=p,null!==v&&cm(i,o,a,v,d,I),d&&function rb(i,o,a){if(o){const c=i.localNames=[];for(let d=0;d<o.length;d+=2){const p=a[o[d+1]];if(null==p)throw new _e(-301,!1);c.push(o[d],p)}}}(a,c,d)}a.mergedAttrs=Fo(a.mergedAttrs,a.attrs)}function cm(i,o,a,c,d,p){for(let x=0;x<c.length;x++)Tn(vl(a,o),i,c[x].type);!function kv(i,o,a){i.flags|=1,i.directiveStart=o,i.directiveEnd=o+a,i.providerIndexes=o}(a,i.data.length,c.length);for(let x=0;x<c.length;x++){const P=c[x];P.providersResolver&&P.providersResolver(P)}let v=!1,I=!1,b=yp(i,o,c.length,null);for(let x=0;x<c.length;x++){const P=c[x];a.mergedAttrs=Fo(a.mergedAttrs,P.hostAttrs),mw(i,a,o,b,P),gw(b,P,d),null!==P.contentQueries&&(a.flags|=4),(null!==P.hostBindings||null!==P.hostAttrs||0!==P.hostVars)&&(a.flags|=64);const B=P.type.prototype;!v&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks??(i.preOrderHooks=[])).push(a.index),v=!0),!I&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks??(i.preOrderCheckHooks=[])).push(a.index),I=!0),b++}!function oa(i,o,a){const d=o.directiveEnd,p=i.data,v=o.attrs,I=[];let b=null,x=null;for(let P=o.directiveStart;P<d;P++){const B=p[P],Z=a?a.get(B):null,De=Z?Z.outputs:null;b=yn(B.inputs,P,b,Z?Z.inputs:null),x=yn(B.outputs,P,x,De);const Ge=null===b||null===v||Ev(o)?null:Oa(b,P,v);I.push(Ge)}null!==b&&(b.hasOwnProperty("class")&&(o.flags|=8),b.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=I,o.inputs=b,o.outputs=x}(i,a,p)}function Ai(i,o,a){const c=a.directiveStart,d=a.directiveEnd,p=a.index,v=function Ng(){return Bt.lFrame.currentDirectiveIndex}();try{zs(p);for(let I=c;I<d;I++){const b=i.data[I],x=o[I];ar(I),(null!==b.hostBindings||0!==b.hostVars||null!==b.hostAttrs)&&lm(b,x)}}finally{zs(-1),ar(v)}}function lm(i,o){null!==i.hostBindings&&i.hostBindings(1,o)}function Pa(i,o,a){o.componentOffset=a,(i.components??(i.components=[])).push(o.index)}function gw(i,o,a){if(a){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)a[o.exportAs[c]]=i;Ti(o)&&(a[""]=i)}}function mw(i,o,a,c,d){i.data[c]=d;const p=d.factory||(d.factory=ki(d.type)),v=new Gs(p,Ti(d),Th);i.blueprint[c]=v,a[c]=v,function eb(i,o,a,c,d){const p=d.hostBindings;if(p){let v=i.hostBindingOpCodes;null===v&&(v=i.hostBindingOpCodes=[]);const I=~o.index;(function tb(i){let o=i.length;for(;o>0;){const a=i[--o];if("number"==typeof a&&a<0)return a}return 0})(v)!=I&&v.push(I),v.push(a,c,p)}}(i,o,c,yp(i,a,d.hostVars,Wt),d)}function Na(i,o,a,c,d,p){const v=$(i,o);!function Jl(i,o,a,c,d,p,v){if(null==p)i.removeAttribute(o,d,a);else{const I=null==v?Ue(p):v(p,c||"",d);i.setAttribute(o,d,I,a)}}(o[Ht],v,p,i.value,a,c,d)}function dm(i,o,a,c,d,p){const v=p[o];if(null!==v){const I=c.setInput;for(let b=0;b<v.length;){const x=v[b++],P=v[b++],B=v[b++];null!==I?c.setInput(a,B,x,P):a[P]=B}}}function Oa(i,o,a){let c=null,d=0;for(;d<a.length;){const p=a[d];if(0!==p)if(5!==p){if("number"==typeof p)break;if(i.hasOwnProperty(p)){null===c&&(c=[]);const v=i[p];for(let I=0;I<v.length;I+=2)if(v[I]===o){c.push(p,v[I+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return c}function hm(i,o,a,c){return[i,!0,!1,o,null,0,c,a,null,null]}function Sh(i,o){const a=zt(o,i);if($n(a)){const c=a[Xe];48&a[jt]?Br(c,a,c.template,a[Ln]):a[an]>0&&fm(a)}}function fm(i){for(let c=Ll(i);null!==c;c=na(c))for(let d=sr;d<c.length;d++){const p=c[d];if($n(p))if(512&p[jt]){const v=p[Xe];Br(v,p,v.template,p[Ln])}else p[an]>0&&fm(p)}const a=i[Xe].components;if(null!==a)for(let c=0;c<a.length;c++){const d=zt(a[c],i);$n(d)&&d[an]>0&&fm(d)}}function Lv(i,o){const a=zt(o,i),c=a[Xe];(function yw(i,o){for(let a=o.length;a<i.blueprint.length;a++)o.push(i.blueprint[a])})(c,a),Mv(c,a,a[Ln])}function pm(i,o){return i[Fs]?i[ns][Kr]=o:i[Fs]=o,i[ns]=o,o}function _p(i){for(;i;){i[jt]|=32;const o=kl(i);if(Vs(i)&&!o)return i;i=o}return null}function Ah(i,o,a,c=!0){const d=o[ws];d.begin&&d.begin();try{Br(i,o,i.template,a)}catch(v){throw c&&xh(o,v),v}finally{d.end&&d.end()}}function wp(i,o,a){Zu(0),o(i,a)}function gm(i){return i[To]||(i[To]=[])}function Fv(i){return i.cleanup||(i.cleanup=[])}function xh(i,o){const a=i[So],c=a?a.get(lp,null):null;c&&c.handleError(o)}function Uv(i,o,a,c,d){for(let p=0;p<a.length;){const v=a[p++],I=a[p++],b=o[v],x=i.data[v];null!==x.setInput?x.setInput(b,d,c,I):b[I]=d}}function Js(i,o,a){const c=function K(i,o){return M(o[i])}(o,i);!function Gf(i,o,a){i.setValue(o,a)}(i[Ht],c,a)}function mm(i,o,a){let c=a?i.styles:null,d=a?i.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const I=o[v];"number"==typeof I?p=I:1==p?d=ye(d,I):2==p&&(c=ye(c,I+": "+o[++v]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function ym(i,o,a,c,d=!1){for(;null!==a;){const p=o[a.index];if(null!==p&&c.push(M(p)),Yr(p))for(let I=sr;I<p.length;I++){const b=p[I],x=b[Xe].firstChild;null!==x&&ym(b[Xe],b,x,c)}const v=a.type;if(8&v)ym(i,o,a.child,c);else if(32&v){const I=yo(a,o);let b;for(;b=I();)c.push(b)}else if(16&v){const I=lh(o,a);if(Array.isArray(I))c.push(...I);else{const b=kl(o[jn]);ym(b[Xe],b,I,c,!0)}}a=d?a.projectionNext:a.next}return c}class kc{get rootNodes(){const o=this._lView,a=o[Xe];return ym(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Ln]}set context(o){this._lView[Ln]=o}get destroyed(){return 128==(128&this._lView[jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[En];if(Yr(o)){const a=o[Is],c=a?a.indexOf(this):-1;c>-1&&(Fl(o,c),Wo(a,c))}this._attachedToViewContainer=!1}sh(this._lView[Xe],this._lView)}onDestroy(o){vp(this._lView[Xe],this._lView,null,o)}markForCheck(){_p(this._cdRefInjectingView||this._lView)}detach(){this._lView[jt]&=-65}reattach(){this._lView[jt]|=64}detectChanges(){Ah(this._lView[Xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ih(i,o){$l(i,o,o[Ht],2,null,null)}(this._lView[Xe],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=o}}class Bv extends kc{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;Ah(o[Xe],o,o[Ln],!1)}checkNoChanges(){}get context(){return null}}class Ew extends wh{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=Et(o);return new Lc(a,this.ngModule)}}function Vv(i){const o=[];for(let a in i)i.hasOwnProperty(a)&&o.push({propName:i[a],templateName:a});return o}class Dw{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,c){c=Kn(c);const d=this.injector.get(o,em,c);return d!==em||a===em?d:this.parentInjector.get(o,a,c)}}class Lc extends $0{get inputs(){return Vv(this.componentDef.inputs)}get outputs(){return Vv(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function kD(i){return i.map(OD).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,c,d){let p=(d=d||this.ngModule)instanceof Yl?d:d?.injector;p&&null!==this.componentDef.getStandaloneInjector&&(p=this.componentDef.getStandaloneInjector(p)||p);const v=p?new Dw(o,p):o,I=v.get(mv,null);if(null===I)throw new _e(407,!1);const b=v.get(TD,null),x=I.createRenderer(null,this.componentDef),P=this.componentDef.selectors[0][0]||"div",B=c?function om(i,o,a){return i.selectRootElement(o,a===Ie.ShadowDom)}(x,c,this.componentDef.encapsulation):Wf(x,P,function Iw(i){const o=i.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(P)),Z=this.componentDef.onPush?288:272,re=Nv(0,null,null,1,0,null,null,null,null,null),De=im(null,re,null,Z,null,null,I,x,b,v,null);let Ge,tt;Qu(De);try{const _t=this.componentDef;let kt,je=null;_t.findHostDirectiveDefs?(kt=[],je=new Map,_t.findHostDirectiveDefs(_t,kt,je),kt.push(_t)):kt=[_t];const Zt=function $v(i,o){const a=i[Xe],c=In;return i[c]=o,mp(a,c,2,"#host",null)}(De,B),Xn=function Hv(i,o,a,c,d,p,v,I){const b=d[Xe];!function Cw(i,o,a,c){for(const d of i)o.mergedAttrs=Fo(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(mm(o,o.mergedAttrs,!0),null!==a&&zl(c,a,o))}(c,i,o,v);const x=p.createRenderer(o,a),P=im(d,XD(a),null,a.onPush?32:16,d[i.index],i,p,x,I||null,null,null);return b.firstCreatePass&&Pa(b,i,c.length-1),pm(d,P),d[i.index]=P}(Zt,B,_t,kt,De,I,x);tt=rt(re,In),B&&function ob(i,o,a,c){if(c)Ea(i,a,["ng-version",W0.full]);else{const{attrs:d,classes:p}=function LD(i){const o=[],a=[];let c=1,d=2;for(;c<i.length;){let p=i[c];if("string"==typeof p)2===d?""!==p&&o.push(p,i[++c]):8===d&&a.push(p);else{if(!sa(d))break;d=p}c++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Ea(i,a,d),p&&p.length>0&&xs(i,a,p.join(" "))}}(x,_t,B,c),void 0!==a&&function Sw(i,o,a){const c=i.projection=[];for(let d=0;d<o.length;d++){const p=a[d];c.push(null!=p?Array.from(p):null)}}(tt,this.ngContentSelectors,a),Ge=function Tw(i,o,a,c,d,p){const v=Er(),I=d[Xe],b=$(v,d);cm(I,d,v,a,null,c);for(let P=0;P<a.length;P++)ae(tr(d,I,v.directiveStart+P,v),d);Ai(I,d,v),b&&ae(b,d);const x=tr(d,I,v.directiveStart+v.componentOffset,v);if(i[Ln]=d[Ln]=x,null!==p)for(const P of p)P(x,o);return Rv(I,v,i),x}(Xn,_t,kt,je,De,[Aw]),Mv(re,De,null)}finally{Ju()}return new jv(this.componentType,Ge,Mu(tt,De),De,tt)}}class jv extends ID{constructor(o,a,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Bv(d),this.componentType=o}setInput(o,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[o])){const p=this._rootLView;Uv(p[Xe],p,d,o,a),_p(zt(this._tNode.index,p))}}get injector(){return new qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Aw(){const i=Er();tc(ve()[Xe],i)}function Fc(i){return!!wm(i)&&(Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i)}function wm(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function vi(i,o,a){return!Object.is(i[o],a)&&(i[o]=a,!0)}function Im(i,o,a,c){const d=ve();return vi(d,Po(),o)&&(Gt(),Na(Fn(),d,i,o,a,c)),Im}function Ru(i,o,a,c,d,p){const I=function Uc(i,o,a,c){const d=vi(i,o,a);return vi(i,o+1,c)||d}(i,function Li(){return Bt.lFrame.bindingIndex}(),a,d);return function Fi(i){const o=Bt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+i,a}(2),I?o+Ue(a)+c+Ue(d)+p:Wt}function e_(i,o,a,c,d,p,v,I){const b=ve(),x=Gt(),P=i+In,B=x.firstCreatePass?function Xv(i,o,a,c,d,p,v,I,b){const x=o.consts,P=mp(o,i,4,v||null,wr(x,I));Ov(o,a,P,wr(x,b)),tc(o,P);const B=P.tView=Nv(2,P,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,P),B.queries=o.queries.embeddedTView(P)),P}(P,x,b,o,a,c,d,p,v):x.data[P];fi(B,!1);const Z=b[Ht].createComment("");Cu(x,b,Z,B),ae(Z,b),pm(b,b[P]=hm(Z,b,Z,B)),qa(B)&&Pv(x,b,B),null!=v&&Qs(b,B,I)}function Tp(i,o,a){const c=ve();return vi(c,Po(),o)&&function ms(i,o,a,c,d,p,v,I){const b=$(o,a);let P,x=o.inputs;!I&&null!=x&&(P=x[c])?(Uv(i,a,P,c,d),is(o)&&function Jt(i,o){const a=zt(o,i);16&a[jt]||(a[jt]|=32)}(a,o.index)):3&o.type&&(c=function st(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=v?v(d,o.value||"",c):d,p.setProperty(b,c,d))}(Gt(),Fn(),c,i,o,c[Ht],a,!1),Tp}function Sp(i,o,a,c,d){const v=d?"class":"style";Uv(i,a,o.inputs[v],v,c)}function nd(i,o,a,c){const d=ve(),p=Gt(),v=In+i,I=d[Ht],b=p.firstCreatePass?function t_(i,o,a,c,d,p){const v=o.consts,b=mp(o,i,2,c,wr(v,d));return Ov(o,a,b,wr(v,p)),null!==b.attrs&&mm(b,b.attrs,!1),null!==b.mergedAttrs&&mm(b,b.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,b),b}(v,p,d,o,a,c):p.data[v],x=d[v]=Wf(I,o,function zd(){return Bt.lFrame.currentNamespace}()),P=qa(b);return fi(b,!0),zl(I,x,b),32!=(32&b.flags)&&Cu(p,d,x,b),0===function Fd(){return Bt.lFrame.elementDepthCount}()&&ae(x,d),function zu(){Bt.lFrame.elementDepthCount++}(),P&&(Pv(p,d,b),Rv(p,b,d)),null!==c&&Qs(d,b),nd}function Bc(){let i=Er();Vd()?function qu(){Bt.lFrame.isParent=!1}():(i=i.parent,fi(i,!1));const o=i;!function Ud(){Bt.lFrame.elementDepthCount--}();const a=Gt();return a.firstCreatePass&&(tc(a,i),Ci(i)&&a.queries.elementEnd(i)),null!=o.classesWithoutHost&&function au(i){return 0!=(8&i.flags)}(o)&&Sp(a,o,ve(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Oo(i){return 0!=(16&i.flags)}(o)&&Sp(a,o,ve(),o.stylesWithoutHost,!1),Bc}function Dm(i,o,a,c){return nd(i,o,a,c),Bc(),Dm}function n_(){return ve()}function Cm(i){return!!i&&"function"==typeof i.then}function r_(i){return!!i&&"function"==typeof i.subscribe}const kw=r_;function rd(i,o,a,c){const d=ve(),p=Gt(),v=Er();return function Fh(i,o,a,c,d,p,v){const I=qa(c),x=i.firstCreatePass&&Fv(i),P=o[Ln],B=gm(o);let Z=!0;if(3&c.type||v){const Ge=$(c,o),tt=v?v(Ge):Ge,_t=B.length,kt=v?Zt=>v(M(Zt[c.index])):c.index;let je=null;if(!v&&I&&(je=function Tm(i,o,a,c){const d=i.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===a&&d[p+1]===c){const I=o[To],b=d[p+2];return I.length>b?I[b]:null}"string"==typeof v&&(p+=2)}return null}(i,o,d,c.index)),null!==je)(je.__ngLastListenerFn__||je).__ngNextListenerFn__=p,je.__ngLastListenerFn__=p,Z=!1;else{p=Sm(c,o,P,p,!1);const Zt=a.listen(tt,d,p);B.push(p,Zt),x&&x.push(d,kt,_t,_t+1)}}else p=Sm(c,o,P,p,!1);const re=c.outputs;let De;if(Z&&null!==re&&(De=re[d])){const Ge=De.length;if(Ge)for(let tt=0;tt<Ge;tt+=2){const Xn=o[De[tt]][De[tt+1]].subscribe(p),dr=B.length;B.push(p,Xn),x&&x.push(d,c.index,dr,-(dr+1))}}}(p,d,d[Ht],v,i,o,c),rd}function Vc(i,o,a,c){try{return Mr(6,o,a),!1!==a(c)}catch(d){return xh(i,d),!1}finally{Mr(7,o,a)}}function Sm(i,o,a,c,d){return function p(v){if(v===Function)return c;_p(i.componentOffset>-1?zt(i.index,o):o);let b=Vc(o,a,c,v),x=p.__ngNextListenerFn__;for(;x;)b=Vc(o,a,x,v)&&b,x=x.__ngNextListenerFn__;return d&&!1===b&&(v.preventDefault(),v.returnValue=!1),b}}function Lw(i=1){return function Af(i){return(Bt.lFrame.contextLView=function Xu(i,o){for(;i>0;)o=o[Us],i--;return o}(i,Bt.lFrame.contextLView))[Ln]}(i)}function Qw(i,o=""){const a=ve(),c=Gt(),d=i+In,p=c.firstCreatePass?mp(c,d,1,o,null):c.data[d],v=a[d]=function Cc(i,o){return i.createText(o)}(a[Ht],o);Cu(c,a,v,p),fi(p,!1)}function Nm(i){return $c("",i,""),Nm}function $c(i,o,a){const c=ve(),d=function td(i,o,a,c){return vi(i,Po(),a)?o+Ue(a)+c:Wt}(c,i,o,a);return d!==Wt&&Js(c,Fr(),d),$c}function Om(i,o,a,c,d){const p=ve(),v=Ru(p,i,o,a,c,d);return v!==Wt&&Js(p,Fr(),v),Om}const Hc=void 0;var Db=["en",[["a","p"],["AM","PM"],Hc],[["AM","PM"],Hc,Hc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hc,"{1} 'at' {0}",Hc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Wh(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let qh={};function I_(i){const o=function bb(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=oE(o);if(a)return a;const c=o.split("-")[0];if(a=oE(c),a)return a;if("en"===c)return Db;throw new _e(701,!1)}function D_(i){return I_(i)[Ot.PluralCase]}function oE(i){return i in qh||(qh[i]=ln.ng&&ln.ng.common&&ln.ng.common.locales&&ln.ng.common.locales[i]),qh[i]}var Ot=(()=>((Ot=Ot||{})[Ot.LocaleId=0]="LocaleId",Ot[Ot.DayPeriodsFormat=1]="DayPeriodsFormat",Ot[Ot.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ot[Ot.DaysFormat=3]="DaysFormat",Ot[Ot.DaysStandalone=4]="DaysStandalone",Ot[Ot.MonthsFormat=5]="MonthsFormat",Ot[Ot.MonthsStandalone=6]="MonthsStandalone",Ot[Ot.Eras=7]="Eras",Ot[Ot.FirstDayOfWeek=8]="FirstDayOfWeek",Ot[Ot.WeekendRange=9]="WeekendRange",Ot[Ot.DateFormat=10]="DateFormat",Ot[Ot.TimeFormat=11]="TimeFormat",Ot[Ot.DateTimeFormat=12]="DateTimeFormat",Ot[Ot.NumberSymbols=13]="NumberSymbols",Ot[Ot.NumberFormats=14]="NumberFormats",Ot[Ot.CurrencyCode=15]="CurrencyCode",Ot[Ot.CurrencySymbol=16]="CurrencySymbol",Ot[Ot.CurrencyName=17]="CurrencyName",Ot[Ot.Currencies=18]="Currencies",Ot[Ot.Directionality=19]="Directionality",Ot[Ot.PluralCase=20]="PluralCase",Ot[Ot.ExtraData=21]="ExtraData",Ot))();const cr="en-US";let Tr=cr;class ld{}class Bn{}function zm(i,o){return new Wn(i,o??null)}class Wn extends ld{constructor(o,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Ew(this);const c=er(o);this._bootstrapComponents=Ra(c.bootstrap),this._r3Injector=bv(o,a,[{provide:ld,useValue:this},{provide:wh,useValue:this.componentFactoryResolver}],Ce(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Gm extends Bn{constructor(o){super(),this.moduleType=o}create(o){return new Wn(this.moduleType,o)}}class rf extends ld{constructor(o,a,c){super(),this.componentFactoryResolver=new Ew(this),this.instance=null;const d=new V0([...o,{provide:ld,useValue:this},{provide:wh,useValue:this.componentFactoryResolver}],a||Jg(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function Zi(i,o,a=null){return new rf(i,o,a).injector}let SE=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=yh(0,a.type),d=c.length>0?Zi([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=gt({token:i,providedIn:"environment",factory:()=>new i(dn(Yl))}),i})();function AE(i){i.getStandaloneInjector=o=>o.get(SE).getOrCreateStandaloneInjector(i)}function Zm(i,o,a,c){return function NE(i,o,a,c,d,p){const v=o+a;return vi(i,v,d)?function Xs(i,o,a){return i[o]=a}(i,v+1,p?c.call(p,d):c(d)):function af(i,o){const a=i[o];return a===Wt?void 0:a}(i,v+1)}(ve(),function or(){const i=Bt.lFrame;let o=i.bindingRootIndex;return-1===o&&(o=i.bindingRootIndex=i.tView.bindingStartIndex),o}(),i,o,a,c)}function Zc(i){return o=>{setTimeout(i,void 0,o)}}const Co=class Rn extends y.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,c){let d=o,p=a||(()=>null),v=c;if(o&&"object"==typeof o){const b=o;d=b.next?.bind(b),p=b.error?.bind(b),v=b.complete?.bind(b)}this.__isAsync&&(p=Zc(p),d&&(d=Zc(d)),v&&(v=Zc(v)));const I=super.subscribe({next:d,error:p,complete:v});return o instanceof te.w0&&o.add(I),I}};function B_(){return this._results[Symbol.iterator]()}class Jm{get changes(){return this._changes||(this._changes=new Co)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=Jm.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=B_)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const c=this;c.dirty=!1;const d=function cs(i){return i.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function bl(i,o,a){if(i.length!==o.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],p=o[c];if(a&&(d=a(d),p=a(p)),p!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let pd=(()=>{class i{}return i.__NG_ELEMENT_ID__=jE,i})();const BE=pd,VE=class extends BE{constructor(o,a,c){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(o,a){const c=this._declarationTContainer.tView,d=im(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,a||null);d[uo]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[bi];return null!==v&&(d[bi]=v.createEmbeddedView(c)),Mv(c,d,o),new kc(d)}};function jE(){return Xm(Er(),ve())}function Xm(i,o){return 4&i.type?new VE(o,i,Mu(i,o)):null}let ey=(()=>{class i{}return i.__NG_ELEMENT_ID__=Wb,i})();function Wb(){return zE(Er(),ve())}const $E=ey,HE=class extends $E{constructor(o,a,c){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=c}get element(){return Mu(this._hostTNode,this._hostLView)}get injector(){return new qs(this._hostTNode,this._hostLView)}get parentInjector(){const o=Kd(this._hostTNode,this._hostLView);if(Uo(o)){const a=Bo(o,this._hostLView),c=fo(o);return new qs(a[Xe].data[c+8],a)}return new qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=V_(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-sr}createEmbeddedView(o,a,c){let d,p;"number"==typeof c?d=c:null!=c&&(d=c.index,p=c.injector);const v=o.createEmbeddedView(a||{},p);return this.insert(v,d),v}createComponent(o,a,c,d,p){const v=o&&!function dc(i){return"function"==typeof i}(o);let I;if(v)I=a;else{const B=a||{};I=B.index,c=B.injector,d=B.projectableNodes,p=B.environmentInjector||B.ngModuleRef}const b=v?o:new Lc(Et(o)),x=c||this.parentInjector;if(!p&&null==b.ngModule){const Z=(v?x:this.parentInjector).get(Yl,null);Z&&(p=Z)}const P=b.create(x,d,void 0,p);return this.insert(P.hostView,I),P}insert(o,a){const c=o._lView,d=c[Xe];if(function fn(i){return Yr(i[En])}(c)){const P=this.indexOf(o);if(-1!==P)this.detach(P);else{const B=c[En],Z=new HE(B,B[Zn],B[En]);Z.detach(Z.indexOf(o))}}const p=this._adjustIndex(a),v=this._lContainer;!function Iu(i,o,a,c){const d=sr+c,p=a.length;c>0&&(a[d-1][Kr]=o),c<p-sr?(o[Kr]=a[d],Uf(a,sr+c,o)):(a.push(o),o[Kr]=null),o[En]=a;const v=o[uo];null!==v&&a!==v&&function Wy(i,o){const a=i[Bs];o[jn]!==o[En][En][jn]&&(i[Wa]=!0),null===a?i[Bs]=[o]:a.push(o)}(v,o);const I=o[bi];null!==I&&I.insertView(i),o[jt]|=64}(d,c,v,p);const I=Zs(p,v),b=c[Ht],x=ia(b,v[co]);return null!==x&&function Ug(i,o,a,c,d,p){c[qr]=d,c[Zn]=o,$l(i,c,a,1,d,p)}(d,v[Zn],b,c,x,I),o.attachToViewContainerRef(),Uf(j_(v),p,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=V_(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),c=Fl(this._lContainer,a);c&&(Wo(j_(this._lContainer),a),sh(c[Xe],c))}detach(o){const a=this._adjustIndex(o,-1),c=Fl(this._lContainer,a);return c&&null!=Wo(j_(this._lContainer),a)?new kc(c):null}_adjustIndex(o,a=0){return o??this.length+a}};function V_(i){return i[Is]}function j_(i){return i[Is]||(i[Is]=[])}function zE(i,o){let a;const c=o[i.index];if(Yr(c))a=c;else{let d;if(8&i.type)d=M(c);else{const p=o[Ht];d=p.createComment("");const v=$(i,o);xa(p,ia(p,v),d,function jg(i,o){return i.nextSibling(o)}(p,v),!1)}o[i.index]=a=hm(c,o,d,i),pm(o,a)}return new HE(a,i,o)}class $_{constructor(o){this.queryList=o,this.matches=null}clone(){return new $_(this.queryList)}setDirty(){this.queryList.setDirty()}}class Qp{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const c=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let p=0;p<c;p++){const v=a.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Qp(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==lf(o,a).matches&&this.queries[a].setDirty()}}class Yc{constructor(o,a,c=null){this.predicate=o,this.flags=a,this.read=c}}class gd{constructor(o=[]){this.queries=o}elementStart(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==a?a.push(p):a=[p])}return null!==a?new gd(a):null}template(o,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class cf{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new cf(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,a,ty(a,p)),this.matchTNodeWithReadOption(o,a,jo(a,o,p,!1,!1))}else c===pd?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,jo(a,o,c,!1,!1))}matchTNodeWithReadOption(o,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Eh||d===ey||d===pd&&4&a.type)this.addMatch(a.index,-2);else{const p=jo(a,o,d,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,c)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function ty(i,o){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===o)return a[c+1];return null}function WE(i,o,a,c){return-1===a?function GE(i,o){return 11&i.type?Mu(i,o):4&i.type?Xm(i,o):null}(o,i):-2===a?function Fu(i,o,a){return a===Eh?Mu(o,i):a===pd?Xm(o,i):a===ey?zE(o,i):void 0}(i,o,c):tr(i,i[Xe],a,o)}function H_(i,o,a,c){const d=o[bi].queries[c];if(null===d.matches){const p=i.data,v=a.matches,I=[];for(let b=0;b<v.length;b+=2){const x=v[b];I.push(x<0?null:WE(o,p[x],v[b+1],a.metadata.read))}d.matches=I}return d.matches}function Qc(i,o,a,c){const d=i.queries.getByIndex(a),p=d.matches;if(null!==p){const v=H_(i,o,d,a);for(let I=0;I<p.length;I+=2){const b=p[I];if(b>0)c.push(v[I/2]);else{const x=p[I+1],P=o[-b];for(let B=sr;B<P.length;B++){const Z=P[B];Z[uo]===Z[En]&&Qc(Z[Xe],Z,x,c)}if(null!==P[Bs]){const B=P[Bs];for(let Z=0;Z<B.length;Z++){const re=B[Z];Qc(re[Xe],re,x,c)}}}}}return c}function z_(i){const o=ve(),a=Gt(),c=hl();Zu(c+1);const d=lf(a,c);if(i.dirty&&function Yn(i){return 4==(4&i[jt])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const p=d.crossesNgTemplate?Qc(a,o,c,[]):H_(a,o,d,c);i.reset(p,cp),i.notifyOnChanges()}return!0}return!1}function Jp(i,o,a,c){const d=Gt();if(d.firstCreatePass){const p=Er();(function ry(i,o,a){null===i.queries&&(i.queries=new gd),i.queries.track(new cf(o,a))})(d,new Yc(o,a,c),p.index),function iy(i,o){const a=i.contentQueries||(i.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,o)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Yi(i,o,a){const c=new Jm(4==(4&a));vp(i,o,c,c.destroy),null===o[bi]&&(o[bi]=new Qp),o[bi].queries.push(new $_(c))}(d,ve(),a)}function ny(){return function md(i,o){return i[bi].queries[o].queryList}(ve(),hl())}function lf(i,o){return i.queries.getByIndex(o)}function Qi(i){return!!er(i)}function ug(...i){}const cg=new cn("Application Initializer");let lg=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ug,this.reject=ug,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Cm(p))a.push(p);else if(kw(p)){const v=new Promise((I,b)=>{p.subscribe({complete:I,error:b})});a.push(v)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(dn(cg,8))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const dI=new cn("AppId",{providedIn:"root",factory:function Z_(){return`${dg()}${dg()}${dg()}`}});function dg(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gf=new cn("Platform Initializer"),hg=new cn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let hI=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const fg=new cn("LocaleId",{providedIn:"root",factory:()=>On(fg,wt.Optional|wt.SkipSelf)||function fI(){return typeof $localize<"u"&&$localize.locale||cr}()}),tC=new cn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class iC{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let sC=(()=>{class i{compileModuleSync(a){return new Gm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),p=Ra(er(a).declarations).reduce((v,I)=>{const b=Et(I);return b&&v.push(new Lc(b)),v},[]);return new iC(c,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const mI=(()=>Promise.resolve(0))();function _d(i){typeof Zone>"u"?mI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class io{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Co(!1),this.onMicrotaskEmpty=new Co(!1),this.onStable=new Co(!1),this.onError=new Co(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Ha(){let i=ln.requestAnimationFrame,o=ln.cancelAnimationFrame;if(typeof Zone<"u"&&i&&o){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function _I(i){const o=()=>{!function vI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(ln,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,J_(i),i.isCheckStableRunning=!0,dy(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),J_(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,p,v,I)=>{try{return wI(i),a.invokeTask(d,p,v,I)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&o(),yf(i)}},onInvoke:(a,c,d,p,v,I,b)=>{try{return wI(i),a.invoke(d,p,v,I,b)}finally{i.shouldCoalesceRunChangeDetection&&o(),yf(i)}},onHasTask:(a,c,d,p)=>{a.hasTask(d,p),c===d&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,J_(i),dy(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,c,d,p)=>(a.handleError(d,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!io.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(io.isInAngularZone())throw new _e(909,!1)}run(o,a,c){return this._inner.run(o,a,c)}runTask(o,a,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,pg,ug,ug);try{return p.runTask(v,a,c)}finally{p.cancelTask(v)}}runGuarded(o,a,c){return this._inner.runGuarded(o,a,c)}runOutsideAngular(o){return this._outer.run(o)}}const pg={};function dy(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function J_(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function wI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function yf(i){i._nesting--,dy(i)}class X_{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Co,this.onMicrotaskEmpty=new Co,this.onStable=new Co,this.onError=new Co}run(o,a,c){return o.apply(a,c)}runGuarded(o,a,c){return o.apply(a,c)}runOutsideAngular(o){return o()}runTask(o,a,c,d){return o.apply(a,c)}}const EI=new cn(""),e0=new cn("");let hy,t0=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,hy||(function aC(i){hy=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{io.assertNotInAngularZone(),_d(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())_d(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(dn(io),dn(n0),dn(e0))},i.\u0275prov=gt({token:i,factory:i.\u0275fac}),i})(),n0=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return hy?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Uu=!1;let el=null;const II=new cn("AllowMultipleToken"),za=new cn("PlatformDestroyListeners"),wd=new cn("appBootstrapListener");class Bu{constructor(o,a){this.name=o,this.token=a}}function tl(i,o,a=[]){const c=`Platform: ${o}`,d=new cn(c);return(p=[])=>{let v=py();if(!v||v.injector.get(II,!1)){const I=[...a,...p,{provide:d,useValue:!0}];i?i(I):function CI(i){if(el&&!el.get(II,!1))throw new _e(400,!1);el=i;const o=i.get(gy);(function r0(i){const o=i.get(gf,null);o&&o.forEach(a=>a())})(i)}(function nl(i=[],o){return Dh.create({name:o,providers:[{provide:Nc,useValue:"platform"},{provide:za,useValue:new Set([()=>el=null])},...i]})}(I,c))}return function Ed(i){const o=py();if(!o)throw new _e(401,!1);return o}()}}function py(){return el?.get(gy)??null}let gy=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function o0(i,o){let a;return a="noop"===i?new X_:("zone.js"===i?void 0:i)||new io(o),a}(c?.ngZone,function my(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),p=[{provide:io,useValue:d}];return d.run(()=>{const v=Dh.create({providers:p,parent:this.injector,name:a.moduleType.name}),I=a.create(v),b=I.injector.get(lp,null);if(!b)throw new _e(402,!1);return d.runOutsideAngular(()=>{const x=d.onError.subscribe({next:P=>{b.handleError(P)}});I.onDestroy(()=>{mg(this._modules,I),x.unsubscribe()})}),function a0(i,o,a){try{const c=a();return Cm(c)?c.catch(d=>{throw o.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>i.handleError(c)),c}}(b,d,()=>{const x=I.injector.get(lg);return x.runInitializers(),x.donePromise.then(()=>(function no(i){we(i,"Expected localeId to be defined"),"string"==typeof i&&(Tr=i.toLowerCase().replace(/_/g,"-"))}(I.injector.get(fg,cr)||cr),this._moduleDoBootstrap(I),I))})})}bootstrapModule(a,c=[]){const d=TI({},c);return function DI(i,o,a){const c=new Gm(a);return Promise.resolve(c)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(a){const c=a.injector.get(gg);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new _e(-403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(za,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(dn(Dh))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function TI(i,o){return Array.isArray(o)?o.reduce(TI,i):{...i,...o}}let gg=(()=>{class i{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const p=new F.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),v=new F.y(I=>{let b;this._zone.runOutsideAngular(()=>{b=this._zone.onStable.subscribe(()=>{io.assertNotInAngularZone(),_d(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{io.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{b.unsubscribe(),x.unsubscribe()}});this.isStable=(0,le.T)(p,v.pipe((0,ue.B)()))}bootstrap(a,c){const d=a instanceof $0;if(!this._injector.get(lg).done){!d&&ir(a);throw new _e(405,Uu)}let v;v=d?a:this._injector.get(wh).resolveComponentFactory(a),this.componentTypes.push(v.componentType);const I=function bI(i){return i.isBoundToModule}(v)?void 0:this._injector.get(ld),x=v.create(Dh.NULL,[],c||v.selector,I),P=x.location.nativeElement,B=x.injector.get(EI,null);return B?.registerApplication(P),x.onDestroy(()=>{this.detachView(x.hostView),mg(this.components,x),B?.unregisterApplication(P)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;mg(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const c=this._injector.get(wd,[]);c.push(...this._bootstrapListeners),c.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>mg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new _e(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(dn(io),dn(Yl),dn(lp))},i.\u0275prov=gt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function mg(i,o){const a=i.indexOf(o);a>-1&&i.splice(a,1)}function Id(){return!1}let lC=(()=>{class i{}return i.__NG_ELEMENT_ID__=_g,i})();function _g(i){return function Dd(i,o,a){if(is(i)&&!a){const c=zt(i.index,o);return new kc(c,c)}return 47&i.type?new kc(o[jn],o):null}(Er(),ve(),16==(16&i))}class Pi{constructor(){}supports(o){return Fc(o)}create(o){return new Ey(o)}}const xI=(i,o)=>o;class Ey{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||xI}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,c=this._removalsHead,d=0,p=null;for(;a||c;){const v=!c||a&&a.currentIndex<Cd(c,d,p)?a:c,I=Cd(v,d,p),b=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(a=a._next,null==v.previousIndex)d++;else{p||(p=[]);const x=I-d,P=b-d;if(x!=P){for(let Z=0;Z<x;Z++){const re=Z<p.length?p[Z]:p[Z]=0,De=re+Z;P<=De&&De<x&&(p[Z]=re+1)}p[v.previousIndex]=P-x}}I!==b&&o(v,I,b)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Fc(o))throw new _e(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,a=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let I=0;I<this.length;I++)p=o[I],v=this._trackByFn(I,p),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,p,v,I)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,v,I),c=!0),a=a._next}else d=0,function Kv(i,o){if(Array.isArray(i))for(let a=0;a<i.length;a++)o(i[a]);else{const a=i[Symbol.iterator]();let c;for(;!(c=a.next()).done;)o(c.value)}}(o,I=>{v=this._trackByFn(d,I),null!==a&&Object.is(a.trackById,v)?(c&&(a=this._verifyReinsertion(a,I,v,d)),Object.is(a.item,I)||this._addIdentityChange(a,I)):(a=this._mismatch(a,I,v,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,p,d)):o=this._addAfter(new Iy(a,c),p,d),o}_verifyReinsertion(o,a,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,a,c),this._addToMoves(o,c),o}_moveAfter(o,a,c){return this._unlink(o),this._insertAfter(o,a,c),this._addToMoves(o,c),o}_addAfter(o,a,c){return this._insertAfter(o,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,c){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new Vu),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,c=o._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Vu),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Iy{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MI{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const a=o._prevDup,c=o._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Vu{constructor(){this.map=new Map}put(o){const a=o.trackById;let c=this.map.get(a);c||(c=new MI,this.map.set(a,c)),c.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cd(i,o,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+o+d}class f0{constructor(){}supports(o){return o instanceof Map||wm(o)}create(){return new Td}}class Td{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||wm(o)))throw new _e(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const c=o._prev;return a._next=o,a._prev=c,o._prev=a,c&&(c._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new gC(o);return this._records.set(o,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(c=>a(o[c],c))}}class gC{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Sd(){return new Dy([new Pi])}let Dy=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||Sd()),deps:[[i,new Tt,new mu]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new _e(901,!1)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:Sd}),i})();function p0(){return new g0([new f0])}let g0=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||p0()),deps:[[i,new Tt,new mu]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new _e(901,!1)}}return i.\u0275prov=gt({token:i,providedIn:"root",factory:p0}),i})();const by=tl(null,"core",[]);let PI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(dn(gg))},i.\u0275mod=ie({type:i}),i.\u0275inj=It({}),i})();function vC(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},6101:(bt,Ne,U)=>{U.d(Ne,{Z:()=>Je});var y=U(2090),te=U(4859),F=U(7212);U(1877);class ue{constructor(_e,Oe){this._delegate=_e,this.firebase=Oe,(0,F._addComponent)(_e,new te.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(_e,Oe=F._DEFAULT_ENTRY_NAME){var Ue;this._delegate.checkDestroyed();const qe=this._delegate.container.getProvider(_e);return!qe.isInitialized()&&"EXPLICIT"===(null===(Ue=qe.getComponent())||void 0===Ue?void 0:Ue.instantiationMode)&&qe.initialize(),qe.getImmediate({identifier:Oe})}_removeServiceInstance(_e,Oe=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(Oe)}_addComponent(_e){(0,F._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,F._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});function ye(){const ht=function Ce(ht){const _e={},Oe={__esModule:!0,initializeApp:function Ve(Le,ct={}){const oe=F.initializeApp(Le,ct);if((0,y.r3)(_e,oe.name))return _e[oe.name];const Pt=new ht(oe,Oe);return _e[oe.name]=Pt,Pt},app:qe,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Se(Le){const ct=Le.name,oe=ct.replace("-compat","");if(F._registerComponent(Le)&&"PUBLIC"===Le.type){const Pt=(it=qe())=>{if("function"!=typeof it[oe])throw Ee.create("invalid-app-argument",{appName:ct});return it[oe]()};void 0!==Le.serviceProps&&(0,y.ZB)(Pt,Le.serviceProps),Oe[oe]=Pt,ht.prototype[oe]=function(...it){return this._getService.bind(this,ct).apply(this,Le.multipleInstances?it:[])}}return"PUBLIC"===Le.type?Oe[oe]:null},removeApp:function Ue(Le){delete _e[Le]},useAsService:function Ke(Le,ct){return"serverAuth"===ct?null:ct},modularAPIs:F}};function qe(Le){if(!(0,y.r3)(_e,Le=Le||F._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Le});return _e[Le]}return Oe.default=Oe,Object.defineProperty(Oe,"apps",{get:function Te(){return Object.keys(_e).map(Le=>_e[Le])}}),qe.App=ht,Oe}(ue);return ht.INTERNAL=Object.assign(Object.assign({},ht.INTERNAL),{createFirebaseNamespace:ye,extendNamespace:function _e(Oe){(0,y.ZB)(ht,Oe)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),ht}const G=ye();(0,y.jU)()&&void 0!==self.firebase&&self;const Je=G},7212:(bt,Ne,U)=>{U.r(Ne),U.d(Ne,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>ks,_DEFAULT_ENTRY_NAME:()=>zr,_addComponent:()=>at,_addOrOverwriteComponent:()=>Lt,_apps:()=>ln,_clearComponents:()=>mr,_components:()=>hn,_getProvider:()=>xr,_registerComponent:()=>ci,_removeServiceInstance:()=>gr,deleteApp:()=>di,getApp:()=>es,getApps:()=>dn,initializeApp:()=>sn,onLog:()=>Ni,registerVersion:()=>Kn,setLogLevel:()=>xn});var y=U(5861),te=U(4859),F=U(1877),le=U(2090);const ue=(ge,ie)=>ie.some(Be=>ge instanceof Be);let ce,Ee;const G=new WeakMap,W=new WeakMap,Q=new WeakMap,We=new WeakMap,Me=new WeakMap;let _e={get(ge,ie,Be){if(ge instanceof IDBTransaction){if("done"===ie)return W.get(ge);if("objectStoreNames"===ie)return ge.objectStoreNames||Q.get(ge);if("store"===ie)return Be.objectStoreNames[1]?void 0:Be.objectStore(Be.objectStoreNames[0])}return Ve(ge[ie])},set:(ge,ie,Be)=>(ge[ie]=Be,!0),has:(ge,ie)=>ge instanceof IDBTransaction&&("done"===ie||"store"===ie)||ie in ge};function qe(ge){return"function"==typeof ge?function Ue(ge){return ge!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ge)?function(...ie){return ge.apply(Te(this),ie),Ve(G.get(this))}:function(...ie){return Ve(ge.apply(Te(this),ie))}:function(ie,...Be){const mt=ge.call(Te(this),ie,...Be);return Q.set(mt,ie.sort?ie.sort():[ie]),Ve(mt)}}(ge):(ge instanceof IDBTransaction&&function ht(ge){if(W.has(ge))return;const ie=new Promise((Be,mt)=>{const xt=()=>{ge.removeEventListener("complete",qt),ge.removeEventListener("error",Et),ge.removeEventListener("abort",Et)},qt=()=>{Be(),xt()},Et=()=>{mt(ge.error||new DOMException("AbortError","AbortError")),xt()};ge.addEventListener("complete",qt),ge.addEventListener("error",Et),ge.addEventListener("abort",Et)});W.set(ge,ie)}(ge),ue(ge,function Ce(){return ce||(ce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ge,_e):ge)}function Ve(ge){if(ge instanceof IDBRequest)return function Je(ge){const ie=new Promise((Be,mt)=>{const xt=()=>{ge.removeEventListener("success",qt),ge.removeEventListener("error",Et)},qt=()=>{Be(Ve(ge.result)),xt()},Et=()=>{mt(ge.error),xt()};ge.addEventListener("success",qt),ge.addEventListener("error",Et)});return ie.then(Be=>{Be instanceof IDBCursor&&G.set(Be,ge)}).catch(()=>{}),Me.set(ie,ge),ie}(ge);if(We.has(ge))return We.get(ge);const ie=qe(ge);return ie!==ge&&(We.set(ge,ie),Me.set(ie,ge)),ie}const Te=ge=>Me.get(ge),Le=["get","getKey","getAll","getAllKeys","count"],ct=["put","add","delete","clear"],oe=new Map;function Pt(ge,ie){if(!(ge instanceof IDBDatabase)||ie in ge||"string"!=typeof ie)return;if(oe.get(ie))return oe.get(ie);const Be=ie.replace(/FromIndex$/,""),mt=ie!==Be,xt=ct.includes(Be);if(!(Be in(mt?IDBIndex:IDBObjectStore).prototype)||!xt&&!Le.includes(Be))return;const qt=function(){var Et=(0,y.Z)(function*(Qt,...nn){const ir=this.transaction(Qt,xt?"readwrite":"readonly");let er=ir.store;return mt&&(er=er.index(nn.shift())),(yield Promise.all([er[Be](...nn),xt&&ir.done]))[0]});return function(nn){return Et.apply(this,arguments)}}();return oe.set(ie,qt),qt}!function Oe(ge){_e=ge(_e)}(ge=>({...ge,get:(ie,Be,mt)=>Pt(ie,Be)||ge.get(ie,Be,mt),has:(ie,Be)=>!!Pt(ie,Be)||ge.has(ie,Be)}));const ai=new F.Yd("@firebase/app"),zr="[DEFAULT]",Xi={"@firebase/app":"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,hn=new Map;function at(ge,ie){try{ge.container.addComponent(ie)}catch(Be){ai.debug(`Component ${ie.name} failed to register with FirebaseApp ${ge.name}`,Be)}}function Lt(ge,ie){ge.container.addOrOverwriteComponent(ie)}function ci(ge){const ie=ge.name;if(hn.has(ie))return ai.debug(`There were multiple attempts to register component ${ie}.`),!1;hn.set(ie,ge);for(const Be of ln.values())at(Be,ge);return!0}function xr(ge,ie){const Be=ge.container.getProvider("heartbeat").getImmediate({optional:!0});return Be&&Be.triggerHeartbeat(),ge.container.getProvider(ie)}function gr(ge,ie,Be=zr){xr(ge,ie).clearInstance(Be)}function mr(){hn.clear()}const li=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class wn{constructor(ie,Be,mt){this._isDeleted=!1,this._options=Object.assign({},ie),this._config=Object.assign({},Be),this._name=Be.name,this._automaticDataCollectionEnabled=Be.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new te.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ie){this.checkDestroyed(),this._automaticDataCollectionEnabled=ie}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ie){this._isDeleted=ie}checkDestroyed(){if(this.isDeleted)throw li.create("app-deleted",{appName:this._name})}}const ks="9.23.0";function sn(ge,ie={}){let Be=ge;"object"!=typeof ie&&(ie={name:ie});const mt=Object.assign({name:zr,automaticDataCollectionEnabled:!1},ie),xt=mt.name;if("string"!=typeof xt||!xt)throw li.create("bad-app-name",{appName:String(xt)});if(Be||(Be=(0,le.aH)()),!Be)throw li.create("no-options");const qt=ln.get(xt);if(qt){if((0,le.vZ)(Be,qt.options)&&(0,le.vZ)(mt,qt.config))return qt;throw li.create("duplicate-app",{appName:xt})}const Et=new te.H0(xt);for(const nn of hn.values())Et.addComponent(nn);const Qt=new wn(Be,mt,Et);return ln.set(xt,Qt),Qt}function es(ge=zr){const ie=ln.get(ge);if(!ie&&ge===zr&&(0,le.aH)())return sn();if(!ie)throw li.create("no-app",{appName:ge});return ie}function dn(){return Array.from(ln.values())}function di(ge){return On.apply(this,arguments)}function On(){return(On=(0,y.Z)(function*(ge){const ie=ge.name;ln.has(ie)&&(ln.delete(ie),yield Promise.all(ge.container.getProviders().map(Be=>Be.delete())),ge.isDeleted=!0)})).apply(this,arguments)}function Kn(ge,ie,Be){var mt;let xt=null!==(mt=Xi[ge])&&void 0!==mt?mt:ge;Be&&(xt+=`-${Be}`);const qt=xt.match(/\s|\//),Et=ie.match(/\s|\//);if(qt||Et){const Qt=[`Unable to register library "${xt}" with version "${ie}":`];return qt&&Qt.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),qt&&Et&&Qt.push("and"),Et&&Qt.push(`version name "${ie}" contains illegal characters (whitespace or "/")`),void ai.warn(Qt.join(" "))}ci(new te.wA(`${xt}-version`,()=>({library:xt,version:ie}),"VERSION"))}function Ni(ge,ie){if(null!==ge&&"function"!=typeof ge)throw li.create("invalid-log-argument");(0,F.Am)(ge,ie)}function xn(ge){(0,F.Ub)(ge)}},8140:(bt,Ne,U)=>{U.d(Ne,{C6:()=>y.getApps,Mq:()=>y.getApp});var y=U(7212)},1274:(bt,Ne,U)=>{U.d(Ne,{Z:()=>y.Z});var y=U(6101)},8463:(bt,Ne,U)=>{U.r(Ne);var y=U(5861),te=U(6101),F=U(2090),le=U(7212),ue=U(7582),ce=U(1877);U(4859);const ye={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};function Me(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ht=Me,_e=new F.LL("auth","Firebase",Me()),Ue=new ce.Yd("@firebase/auth");function Ve(m,...h){Ue.logLevel<=ce.in.ERROR&&Ue.error(`Auth (${le.SDK_VERSION}): ${m}`,...h)}function Te(m,...h){throw ct(m,...h)}function Se(m,...h){return ct(m,...h)}function Ke(m,h,f){const _=Object.assign(Object.assign({},ht()),{[h]:f});return new F.LL("auth","Firebase",_).create(h,{appName:m.name})}function Le(m,h,f){if(!(h instanceof f))throw f.name!==h.constructor.name&&Te(m,"argument-error"),Ke(m,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ct(m,...h){if("string"!=typeof m){const f=h[0],_=[...h.slice(1)];return _[0]&&(_[0].appName=m.name),m._errorFactory.create(f,..._)}return _e.create(m,...h)}function oe(m,h,...f){if(!m)throw ct(h,...f)}function Pt(m){const h="INTERNAL ASSERTION FAILED: "+m;throw Ve(h),new Error(h)}function it(m,h){m||Pt(h)}function Xt(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.href)||""}function Os(){var m;return typeof self<"u"&&(null===(m=self.location)||void 0===m?void 0:m.protocol)||null}class Ji{constructor(h,f){this.shortDelay=h,this.longDelay=f,it(f>h,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function ai(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function ft(){return"http:"===Os()||"https:"===Os()}()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function he(m,h){it(m.emulator,"Emulator should always be set here");const{url:f}=m.emulator;return h?`${f}${h.startsWith("/")?h.slice(1):h}`:f}class me{static initialize(h,f,_){this.fetchImpl=h,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const we={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},de=new Ji(3e4,6e4);function xe(m,h){return m.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:m.tenantId}):h}function Ae(m,h,f,_){return pt.apply(this,arguments)}function pt(){return(pt=(0,y.Z)(function*(m,h,f,_,T={}){return gt(m,T,(0,y.Z)(function*(){let R={},H={};_&&("GET"===h?H=_:R={body:JSON.stringify(_)});const ee=(0,F.xO)(Object.assign({key:m.config.apiKey},H)).slice(1),ke=yield m._getAdditionalHeaders();return ke["Content-Type"]="application/json",m.languageCode&&(ke["X-Firebase-Locale"]=m.languageCode),me.fetch()(Pn(m,m.config.apiHost,f,ee),Object.assign({method:h,headers:ke,referrerPolicy:"no-referrer"},R))}))})).apply(this,arguments)}function gt(m,h,f){return bn.apply(this,arguments)}function bn(){return(bn=(0,y.Z)(function*(m,h,f){m._canInitEmulator=!1;const _=Object.assign(Object.assign({},we),h);try{const T=new Cn(m),R=yield Promise.race([f(),T.promise]);T.clearNetworkTimeout();const H=yield R.json();if("needConfirmation"in H)throw qn(m,"account-exists-with-different-credential",H);if(R.ok&&!("errorMessage"in H))return H;{const ee=R.ok?H.errorMessage:H.error.message,[ke,Ye]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw qn(m,"credential-already-in-use",H);if("EMAIL_EXISTS"===ke)throw qn(m,"email-already-in-use",H);if("USER_DISABLED"===ke)throw qn(m,"user-disabled",H);const ot=_[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ye)throw Ke(m,ot,Ye);Te(m,ot)}}catch(T){if(T instanceof F.ZR)throw T;Te(m,"network-request-failed",{message:String(T)})}})).apply(this,arguments)}function It(m,h,f,_){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,y.Z)(function*(m,h,f,_,T={}){const R=yield Ae(m,h,f,_,T);return"mfaPendingCredential"in R&&Te(m,"multi-factor-auth-required",{_serverResponse:R}),R})).apply(this,arguments)}function Pn(m,h,f,_){const T=`${h}${f}?${_}`;return m.config.emulator?he(m.config,T):`${m.config.apiScheme}://${T}`}class Cn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(Se(this.auth,"network-request-failed")),de.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qn(m,h,f){const _={appName:m.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const T=Se(m,h,_);return T.customData._tokenResponse=f,T}function Vn(){return(Vn=(0,y.Z)(function*(m,h){return Ae(m,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function ui(){return(ui=(0,y.Z)(function*(m,h){return Ae(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function wt(){return(wt=(0,y.Z)(function*(m,h){return Ae(m,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Lr(m){if(m)try{const h=new Date(Number(m));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function zr(){return(zr=(0,y.Z)(function*(m,h=!1){const f=(0,F.m9)(m),_=yield f.getIdToken(h),T=ln(_);oe(T&&T.exp&&T.auth_time&&T.iat,f.auth,"internal-error");const R="object"==typeof T.firebase?T.firebase:void 0,H=R?.sign_in_provider;return{claims:T,token:_,authTime:Lr(Xi(T.auth_time)),issuedAtTime:Lr(Xi(T.iat)),expirationTime:Lr(Xi(T.exp)),signInProvider:H||null,signInSecondFactor:R?.sign_in_second_factor||null}})).apply(this,arguments)}function Xi(m){return 1e3*Number(m)}function ln(m){const[h,f,_]=m.split(".");if(void 0===h||void 0===f||void 0===_)return Ve("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,F.tV)(f);return T?JSON.parse(T):(Ve("Failed to decode base64 JWT payload"),null)}catch(T){return Ve("Caught error parsing JWT payload as JSON",T?.toString()),null}}function at(m,h){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,y.Z)(function*(m,h,f=!1){if(f)return h;try{return yield h}catch(_){throw _ instanceof F.ZR&&function ci({code:m}){return"auth/user-disabled"===m||"auth/user-token-expired"===m}(_)&&m.auth.currentUser===m&&(yield m.auth.signOut()),_}})).apply(this,arguments)}class xr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var f;if(h){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const T=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(h);this.timerId=setTimeout((0,y.Z)(function*(){yield f.iteration()}),_)}iteration(){var h=this;return(0,y.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(f){return void("auth/network-request-failed"===f?.code&&h.schedule(!0))}h.schedule()})()}}class gr{constructor(h,f){this.createdAt=h,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=Lr(this.lastLoginAt),this.creationTime=Lr(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function mr(m){return Nn.apply(this,arguments)}function Nn(){return Nn=(0,y.Z)(function*(m){var h;const f=m.auth,_=yield m.getIdToken(),T=yield at(m,function kr(m,h){return wt.apply(this,arguments)}(f,{idToken:_}));oe(T?.users.length,f,"internal-error");const R=T.users[0];m._notifyReloadListener(R);const H=null!==(h=R.providerUserInfo)&&void 0!==h&&h.length?function sn(m){return m.map(h=>{var{providerId:f}=h,_=(0,ue._T)(h,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}(R.providerUserInfo):[],ee=function ks(m,h){return[...m.filter(_=>!h.some(T=>T.providerId===_.providerId)),...h]}(m.providerData,H),ot=!!m.isAnonymous&&!(m.email&&R.passwordHash||ee?.length),ut={uid:R.localId,displayName:R.displayName||null,photoURL:R.photoUrl||null,email:R.email||null,emailVerified:R.emailVerified||!1,phoneNumber:R.phoneNumber||null,tenantId:R.tenantId||null,providerData:ee,metadata:new gr(R.createdAt,R.lastLoginAt),isAnonymous:ot};Object.assign(m,ut)}),Nn.apply(this,arguments)}function wn(){return(wn=(0,y.Z)(function*(m){const h=(0,F.m9)(m);yield mr(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function dn(){return(dn=(0,y.Z)(function*(m,h){const f=yield gt(m,{},(0,y.Z)(function*(){const _=(0,F.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:R}=m.config,H=Pn(m,T,"/v1/token",`key=${R}`),ee=yield m._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",me.fetch()(H,{method:"POST",headers:ee,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){oe(h.idToken,"internal-error"),oe(typeof h.idToken<"u","internal-error"),oe(typeof h.refreshToken<"u","internal-error");const f="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function hn(m){const h=ln(m);return oe(h,"internal-error"),oe(typeof h.exp<"u","internal-error"),oe(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,f)}getToken(h,f=!1){var _=this;return(0,y.Z)(function*(){return oe(!_.accessToken||_.refreshToken,h,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(h,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,f){var _=this;return(0,y.Z)(function*(){const{accessToken:T,refreshToken:R,expiresIn:H}=yield function es(m,h){return dn.apply(this,arguments)}(h,f);_.updateTokensAndExpiration(T,R,Number(H))})()}updateTokensAndExpiration(h,f,_){this.refreshToken=f||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,f){const{refreshToken:_,accessToken:T,expirationTime:R}=f,H=new di;return _&&(oe("string"==typeof _,"internal-error",{appName:h}),H.refreshToken=_),T&&(oe("string"==typeof T,"internal-error",{appName:h}),H.accessToken=T),R&&(oe("number"==typeof R,"internal-error",{appName:h}),H.expirationTime=R),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new di,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function On(m,h){oe("string"==typeof m||typeof m>"u","internal-error",{appName:h})}class Kn{constructor(h){var{uid:f,auth:_,stsTokenManager:T}=h,R=(0,ue._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=R.displayName||null,this.email=R.email||null,this.emailVerified=R.emailVerified||!1,this.phoneNumber=R.phoneNumber||null,this.photoURL=R.photoURL||null,this.isAnonymous=R.isAnonymous||!1,this.tenantId=R.tenantId||null,this.providerData=R.providerData?[...R.providerData]:[],this.metadata=new gr(R.createdAt||void 0,R.lastLoginAt||void 0)}getIdToken(h){var f=this;return(0,y.Z)(function*(){const _=yield at(f,f.stsTokenManager.getToken(f.auth,h));return oe(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(h){return function Ar(m){return zr.apply(this,arguments)}(this,h)}reload(){return function li(m){return wn.apply(this,arguments)}(this)}_assign(h){this!==h&&(oe(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(f=>Object.assign({},f)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const f=new Kn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return f.metadata._copy(this.metadata),f}_onReload(h){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,f=!1){var _=this;return(0,y.Z)(function*(){let T=!1;h.idToken&&h.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(h),T=!0),f&&(yield mr(_)),yield _.auth._persistUserIfCurrent(_),T&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var h=this;return(0,y.Z)(function*(){const f=yield h.getIdToken();return yield at(h,function pr(m,h){return Vn.apply(this,arguments)}(h.auth,{idToken:f})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,f){var _,T,R,H,ee,ke,Ye,ot;const ut=null!==(_=f.displayName)&&void 0!==_?_:void 0,Un=null!==(T=f.email)&&void 0!==T?T:void 0,wo=null!==(R=f.phoneNumber)&&void 0!==R?R:void 0,ql=null!==(H=f.photoURL)&&void 0!==H?H:void 0,nv=null!==(ee=f.tenantId)&&void 0!==ee?ee:void 0,zn=null!==(ke=f._redirectEventId)&&void 0!==ke?ke:void 0,Kg=null!==(Ye=f.createdAt)&&void 0!==Ye?Ye:void 0,Zg=null!==(ot=f.lastLoginAt)&&void 0!==ot?ot:void 0,{uid:fh,emailVerified:Kl,isAnonymous:gs,providerData:ph,stsTokenManager:Pc}=f;oe(fh&&Pc,h,"internal-error");const rv=di.fromJSON(this.name,Pc);oe("string"==typeof fh,h,"internal-error"),On(ut,h.name),On(Un,h.name),oe("boolean"==typeof Kl,h,"internal-error"),oe("boolean"==typeof gs,h,"internal-error"),On(wo,h.name),On(ql,h.name),On(nv,h.name),On(zn,h.name),On(Kg,h.name),On(Zg,h.name);const gh=new Kn({uid:fh,auth:h,email:Un,emailVerified:Kl,displayName:ut,isAnonymous:gs,photoURL:ql,phoneNumber:wo,tenantId:nv,stsTokenManager:rv,createdAt:Kg,lastLoginAt:Zg});return ph&&Array.isArray(ph)&&(gh.providerData=ph.map(iv=>Object.assign({},iv))),zn&&(gh._redirectEventId=zn),gh}static _fromIdTokenResponse(h,f,_=!1){return(0,y.Z)(function*(){const T=new di;T.updateFromServerResponse(f);const R=new Kn({uid:f.localId,auth:h,stsTokenManager:T,isAnonymous:_});return yield mr(R),R})()}}const Ni=new Map;function xn(m){it(m instanceof Function,"Expected a class definition");let h=Ni.get(m);return h?(it(h instanceof m,"Instance stored in cache mismatched with class"),h):(h=new m,Ni.set(m,h),h)}function j(m,h,f){return`firebase:${m}:${h}:${f}`}function ne(m=(0,F.z$)()){const h=m.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function on(m=(0,F.z$)()){return/android/i.test(m)}function pn(m=(0,F.z$)()){return/iphone|ipad|ipod/i.test(m)||/macintosh/i.test(m)&&/mobile/i.test(m)}function Di(m=(0,F.z$)()){return pn(m)||on(m)||function An(m=(0,F.z$)()){return/webos/i.test(m)}(m)||function kn(m=(0,F.z$)()){return/blackberry/i.test(m)}(m)||/windows phone/i.test(m)||function Nt(m=(0,F.z$)()){return/iemobile/i.test(m)}(m)}function an(m){return(0,F.m9)(m)}class ns{constructor(h,f){this.providerId=h,this.signInMethod=f}toJSON(){return Pt("not implemented")}_getIdTokenResponse(h){return Pt("not implemented")}_linkToIdToken(h,f){return Pt("not implemented")}_getReauthenticationResolver(h){return Pt("not implemented")}}function uo(m,h){return rs.apply(this,arguments)}function rs(){return(rs=(0,y.Z)(function*(m,h){return Ae(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Zr(m,h){return xo.apply(this,arguments)}function xo(){return(xo=(0,y.Z)(function*(m,h){return Ae(m,"POST","/v1/accounts:sendOobCode",xe(m,h))})).apply(this,arguments)}function co(){return(co=(0,y.Z)(function*(m,h){return Zr(m,h)})).apply(this,arguments)}function Yr(){return(Yr=(0,y.Z)(function*(m,h){return Zr(m,h)})).apply(this,arguments)}function hi(m,h){return ul.apply(this,arguments)}function ul(){return(ul=(0,y.Z)(function*(m,h){return It(m,"POST","/v1/accounts:signInWithIdp",xe(m,h))})).apply(this,arguments)}class ss extends ns{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const f=new ss(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(f.idToken=h.idToken),h.accessToken&&(f.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(f.nonce=h.nonce),h.pendingToken&&(f.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(f.accessToken=h.oauthToken,f.secret=h.oauthTokenSecret):Te("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T}=f,R=(0,ue._T)(f,["providerId","signInMethod"]);if(!_||!T)return null;const H=new ss(_,T);return H.idToken=R.idToken||void 0,H.accessToken=R.accessToken||void 0,H.secret=R.secret,H.nonce=R.nonce,H.pendingToken=R.pendingToken||null,H}_getIdTokenResponse(h){return hi(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,hi(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,hi(h,f)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),h.postBody=(0,F.xO)(f)}return h}}function Ka(){return(Ka=(0,y.Z)(function*(m,h){return Ae(m,"POST","/v1/accounts:sendVerificationCode",xe(m,h))})).apply(this,arguments)}function $u(){return($u=(0,y.Z)(function*(m,h){return It(m,"POST","/v1/accounts:signInWithPhoneNumber",xe(m,h))})).apply(this,arguments)}function Za(){return(Za=(0,y.Z)(function*(m,h){const f=yield It(m,"POST","/v1/accounts:signInWithPhoneNumber",xe(m,h));if(f.temporaryProof)throw qn(m,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const cl={USER_NOT_FOUND:"user-not-found"};function js(){return(js=(0,y.Z)(function*(m,h){return It(m,"POST","/v1/accounts:signInWithPhoneNumber",xe(m,Object.assign(Object.assign({},h),{operation:"REAUTH"})),cl)})).apply(this,arguments)}class Si extends ns{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,f){return new Si({verificationId:h,verificationCode:f})}static _fromTokenResponse(h,f){return new Si({phoneNumber:h,temporaryProof:f})}_getIdTokenResponse(h){return function Od(m,h){return $u.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,f){return function Sf(m,h){return Za.apply(this,arguments)}(h,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function ll(m,h){return js.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:f,verificationId:_,verificationCode:T}=this.params;return h&&f?{temporaryProof:h,phoneNumber:f}:{sessionInfo:_,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:f,verificationCode:_,phoneNumber:T,temporaryProof:R}=h;return _||f||T||R?new Si({verificationId:f,verificationCode:_,phoneNumber:T,temporaryProof:R}):null}}class Oi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class ki extends Oi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class os extends ki{static credentialFromJSON(h){const f="string"==typeof h?JSON.parse(h):h;return oe("providerId"in f&&"signInMethod"in f,"argument-error"),ss._fromParams(f)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return oe(h.idToken||h.accessToken,"argument-error"),ss._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return os.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return os.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:T,pendingToken:R,nonce:H,providerId:ee}=h;if(!_&&!T&&!f&&!R||!ee)return null;try{return new os(ee)._credential({idToken:f,accessToken:_,nonce:H,pendingToken:R})}catch{return null}}}let ma=(()=>{class m extends ki{constructor(){super("facebook.com")}static credential(f){return ss._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.FACEBOOK_SIGN_IN_METHOD="facebook.com",m.PROVIDER_ID="facebook.com",m})(),$s=(()=>{class m extends ki{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return ss._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:T}=f;if(!_&&!T)return null;try{return m.credential(_,T)}catch{return null}}}return m.GOOGLE_SIGN_IN_METHOD="google.com",m.PROVIDER_ID="google.com",m})(),Ja=(()=>{class m extends ki{constructor(){super("github.com")}static credential(f){return ss._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return m.credential(f.oauthAccessToken)}catch{return null}}}return m.GITHUB_SIGN_IN_METHOD="github.com",m.PROVIDER_ID="github.com",m})();class bs extends ns{constructor(h,f){super(h,h),this.pendingToken=f}_getIdTokenResponse(h){return hi(h,this.buildRequest())}_linkToIdToken(h,f){const _=this.buildRequest();return _.idToken=f,hi(h,_)}_getReauthenticationResolver(h){const f=this.buildRequest();return f.autoCreate=!1,hi(h,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const f="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:T,pendingToken:R}=f;return _&&T&&R&&_===T?new bs(_,R):null}static _create(h,f){return new bs(h,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}let ya=(()=>{class m extends ki{constructor(){super("twitter.com")}static credential(f,_){return ss._fromParams({providerId:m.PROVIDER_ID,signInMethod:m.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:T}=f;if(!_||!T)return null;try{return m.credential(_,T)}catch{return null}}}return m.TWITTER_SIGN_IN_METHOD="twitter.com",m.PROVIDER_ID="twitter.com",m})();class Rr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,f,_,T=!1){return(0,y.Z)(function*(){const R=yield Kn._fromIdTokenResponse(h,_,T),H=N(_);return new Rr({user:R,providerId:H,_tokenResponse:_,operationType:f})})()}static _forOperation(h,f,_){return(0,y.Z)(function*(){yield h._updateTokensIfNecessary(_,!0);const T=N(_);return new Rr({user:h,providerId:T,_tokenResponse:_,operationType:f})})()}}function N(m){return m.providerId?m.providerId:"phoneNumber"in m?"phone":null}class K extends F.ZR{constructor(h,f,_,T){var R;super(f.code,f.message),this.operationType=_,this.user=T,Object.setPrototypeOf(this,K.prototype),this.customData={appName:h.name,tenantId:null!==(R=h.tenantId)&&void 0!==R?R:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,f,_,T){return new K(h,f,_,T)}}function $(m,h,f,_){return("reauthenticate"===h?f._getReauthenticationResolver(m):f._getIdTokenResponse(m)).catch(R=>{throw"auth/multi-factor-auth-required"===R.code?K._fromErrorAndOperation(m,R,h,_):R})}function Re(m){return new Set(m.map(({providerId:h})=>h).filter(h=>!!h))}function St(){return St=(0,y.Z)(function*(m,h){const f=(0,F.m9)(m);yield $n(!0,f,h);const{providerUserInfo:_}=yield function Hr(m,h){return ui.apply(this,arguments)}(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[h]}),T=Re(_||[]);return f.providerData=f.providerData.filter(R=>T.has(R.providerId)),T.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f}),St.apply(this,arguments)}function zt(m,h){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,y.Z)(function*(m,h,f=!1){const _=yield at(m,h._linkToIdToken(m.auth,yield m.getIdToken()),f);return Rr._forOperation(m,"link",_)})).apply(this,arguments)}function $n(m,h,f){return fn.apply(this,arguments)}function fn(){return(fn=(0,y.Z)(function*(m,h,f){yield mr(h);const T=!1===m?"provider-already-linked":"no-such-provider";oe(Re(h.providerData).has(f)===m,h.auth,T)})).apply(this,arguments)}function wr(m,h){return as.apply(this,arguments)}function as(){return(as=(0,y.Z)(function*(m,h,f=!1){const{auth:_}=m,T="reauthenticate";try{const R=yield at(m,$(_,T,h,m),f);oe(R.idToken,_,"internal-error");const H=ln(R.idToken);oe(H,_,"internal-error");const{sub:ee}=H;return oe(m.uid===ee,_,"user-mismatch"),Rr._forOperation(m,T,R)}catch(R){throw"auth/user-not-found"===R?.code&&Te(_,"user-mismatch"),R}})).apply(this,arguments)}function Mo(m,h){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,y.Z)(function*(m,h,f=!1){const _="signIn",T=yield $(m,_,h),R=yield Rr._fromIdTokenResponse(m,_,T);return f||(yield m._updateCurrentUser(R.user)),R})).apply(this,arguments)}function Fd(m,h){return zu.apply(this,arguments)}function zu(){return(zu=(0,y.Z)(function*(m,h){const f=(0,F.m9)(m);return yield $n(!1,f,h.providerId),zt(f,h)})).apply(this,arguments)}function Ud(m,h){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,y.Z)(function*(m,h){return wr((0,F.m9)(m),h)})).apply(this,arguments)}class tu{constructor(h,f){this.factorId=h,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(h,f){return"phoneInfo"in f?nu._fromServerResponse(h,f):"totpInfo"in f?Er._fromServerResponse(h,f):Te(h,"internal-error")}}class nu extends tu{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,f){return new nu(f)}}class Er extends tu{constructor(h){super("totp",h)}static _fromServerResponse(h,f){return new Er(f)}}function Ro(m,h,f){var _;oe((null===(_=f.url)||void 0===_?void 0:_.length)>0,m,"invalid-continue-uri"),oe(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,m,"invalid-dynamic-link-domain"),h.continueUrl=f.url,h.dynamicLinkDomain=f.dynamicLinkDomain,h.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(oe(f.iOS.bundleId.length>0,m,"missing-ios-bundle-id"),h.iOSBundleId=f.iOS.bundleId),f.android&&(oe(f.android.packageName.length>0,m,"missing-android-pkg-name"),h.androidInstallApp=f.android.installApp,h.androidMinimumVersionCode=f.android.minimumVersion,h.androidPackageName=f.android.packageName)}function su(){return su=(0,y.Z)(function*(m,h){const f=(0,F.m9)(m),T={requestType:"VERIFY_EMAIL",idToken:yield m.getIdToken()};h&&Ro(f.auth,T,h);const{email:R}=yield function Wa(m,h){return co.apply(this,arguments)}(f.auth,T);R!==m.email&&(yield m.reload())}),su.apply(this,arguments)}function ou(){return ou=(0,y.Z)(function*(m,h,f){const _=(0,F.m9)(m),R={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield m.getIdToken(),newEmail:h};f&&Ro(_.auth,R,f);const{email:H}=yield function _r(m,h){return Yr.apply(this,arguments)}(_.auth,R);H!==m.email&&(yield m.reload())}),ou.apply(this,arguments)}function Ju(){return(Ju=(0,y.Z)(function*(m,h){return Ae(m,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Xu(){return Xu=(0,y.Z)(function*(m,{displayName:h,photoURL:f}){if(void 0===h&&void 0===f)return;const _=(0,F.m9)(m),R={idToken:yield _.getIdToken(),displayName:h,photoUrl:f,returnSecureToken:!0},H=yield at(_,function Hd(m,h){return Ju.apply(this,arguments)}(_.auth,R));_.displayName=H.displayName||null,_.photoURL=H.photoUrl||null;const ee=_.providerData.find(({providerId:ke})=>"password"===ke);ee&&(ee.displayName=_.displayName,ee.photoURL=_.photoURL),yield _._updateTokensIfNecessary(H)}),Xu.apply(this,arguments)}function Fn(m,h,f){return ec.apply(this,arguments)}function ec(){return(ec=(0,y.Z)(function*(m,h,f){const{auth:_}=m,R={idToken:yield m.getIdToken(),returnSecureToken:!0};h&&(R.email=h),f&&(R.password=f);const H=yield at(m,uo(_,R));yield m._updateTokensIfNecessary(H,!0)})).apply(this,arguments)}class No{constructor(h,f,_={}){this.isNewUser=h,this.providerId=f,this.profile=_}}class Mf extends No{constructor(h,f,_,T){super(h,f,_),this.username=T}}class zd extends No{constructor(h,f){super(h,"facebook.com",f)}}class Og extends Mf{constructor(h,f){super(h,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class tc extends No{constructor(h,f){super(h,"google.com",f)}}class pl extends Mf{constructor(h,f,_){super(h,"twitter.com",f,_)}}function gl(m){const{user:h,_tokenResponse:f}=m;return h.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function xf(m){var h,f;if(!m)return null;const{providerId:_}=m,T=m.rawUserInfo?JSON.parse(m.rawUserInfo):{},R=m.isNewUser||"identitytoolkit#SignupNewUserResponse"===m.kind;if(!_&&m?.idToken){const H=null===(f=null===(h=ln(m.idToken))||void 0===h?void 0:h.firebase)||void 0===f?void 0:f.sign_in_provider;if(H)return new No(R,"anonymous"!==H&&"custom"!==H?H:null)}if(!_)return null;switch(_){case"facebook.com":return new zd(R,T);case"github.com":return new Og(R,T);case"google.com":return new tc(R,T);case"twitter.com":return new pl(R,T,m.screenName||null);case"custom":case"anonymous":return new No(R,null);default:return new No(R,_,T)}}(f)}class Oo{constructor(h,f,_){this.type=h,this.credential=f,this.auth=_}static _fromIdtoken(h,f){return new Oo("enroll",h,f)}static _fromMfaPendingCredential(h){return new Oo("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var f,_;if(h?.multiFactorSession){if(null!==(f=h.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Oo._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(_=h.multiFactorSession)&&void 0!==_&&_.idToken)return Oo._fromIdtoken(h.multiFactorSession.idToken)}return null}}class ko{constructor(h,f,_){this.session=h,this.hints=f,this.signInResolver=_}static _fromError(h,f){const _=an(h),T=f.customData._serverResponse,R=(T.mfaInfo||[]).map(ee=>tu._fromServerResponse(_,ee));oe(T.mfaPendingCredential,_,"internal-error");const H=Oo._fromMfaPendingCredential(T.mfaPendingCredential);return new ko(H,R,function(){var ee=(0,y.Z)(function*(ke){const Ye=yield ke._process(_,H);delete T.mfaInfo,delete T.mfaPendingCredential;const ot=Object.assign(Object.assign({},T),{idToken:Ye.idToken,refreshToken:Ye.refreshToken});switch(f.operationType){case"signIn":const ut=yield Rr._fromIdTokenResponse(_,f.operationType,ot);return yield _._updateCurrentUser(ut.user),ut;case"reauthenticate":return oe(f.user,_,"internal-error"),Rr._forOperation(f.user,f.operationType,ot);default:Te(_,"internal-error")}});return function(ke){return ee.apply(this,arguments)}}())}resolveSignIn(h){var f=this;return(0,y.Z)(function*(){return f.signInResolver(h)})()}}class Uo{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>tu._fromServerResponse(h.auth,_)))})}static _fromUser(h){return new Uo(h)}getSession(){var h=this;return(0,y.Z)(function*(){return Oo._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,f){var _=this;return(0,y.Z)(function*(){const T=h,R=yield _.getSession(),H=yield at(_.user,T._process(_.user.auth,R,f));return yield _.user._updateTokensIfNecessary(H),_.user.reload()})()}unenroll(h){var f=this;return(0,y.Z)(function*(){const _="string"==typeof h?h:h.uid,T=yield f.user.getIdToken();try{const R=yield at(f.user,function ic(m,h){return Ae(m,"POST","/v2/accounts/mfaEnrollment:withdraw",xe(m,h))}(f.user.auth,{idToken:T,mfaEnrollmentId:_}));f.enrolledFactors=f.enrolledFactors.filter(({uid:H})=>H!==_),yield f.user._updateTokensIfNecessary(R),yield f.user.reload()}catch(R){throw R}})()}}const fo=new WeakMap;class sc{constructor(h,f){this.storageRetriever=h,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,f){return this.storage.setItem(h,JSON.stringify(f)),Promise.resolve()}_get(h){const f=this.storage.getItem(h);return Promise.resolve(f?JSON.parse(f):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vo=(()=>{class m extends sc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function uu(){const m=(0,F.z$)();return ne(m)||pn(m)}()&&function Ls(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Di(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const T=this.storage.getItem(_),R=this.localCache[_];T!==R&&f(_,R,T)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((ee,ke,Ye)=>{this.notifyListeners(ee,Ye)});const T=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(T);if(f.newValue!==ee)null!==f.newValue?this.storage.setItem(T,f.newValue):this.storage.removeItem(T);else if(this.localCache[T]===f.newValue&&!_)return}const R=()=>{const ee=this.storage.getItem(T);!_&&this.localCache[T]===ee||this.notifyListeners(T,ee)},H=this.storage.getItem(T);!function Wr(){return(0,F.w1)()&&10===document.documentMode}()||H===f.newValue||f.newValue===f.oldValue?R():setTimeout(R,10)}notifyListeners(f,_){this.localCache[f]=_;const T=this.listeners[f];if(T)for(const R of Array.from(T))R(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var T=()=>super._set,R=this;return(0,y.Z)(function*(){yield T().call(R,f,_),R.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,T=this;return(0,y.Z)(function*(){const R=yield _().call(T,f);return T.localCache[f]=JSON.stringify(R),R})()}_remove(f){var _=()=>super._remove,T=this;return(0,y.Z)(function*(){yield _().call(T,f),delete T.localCache[f]})()}}return m.type="LOCAL",m})(),Ws=(()=>{class m extends sc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return m.type="SESSION",m})();function Da(m="",h=10){let f="";for(let _=0;_<h;_++)f+=Math.floor(10*Math.random());return m+f}function Tn(){return window}const pu="recaptcha";class Ss{constructor(h,f){this.verificationId=h,this.onConfirmation=f}confirm(h){const f=Si._fromVerification(this.verificationId,h);return this.onConfirmation(f)}}function fc(){return(fc=(0,y.Z)(function*(m,h,f){const _=(0,F.m9)(m);yield $n(!1,_,"phone");const T=yield pc(_.auth,h,(0,F.m9)(f));return new Ss(T,R=>Fd(_,R))})).apply(this,arguments)}function Cl(){return(Cl=(0,y.Z)(function*(m,h,f){const _=(0,F.m9)(m),T=yield pc(_.auth,h,(0,F.m9)(f));return new Ss(T,R=>Ud(_,R))})).apply(this,arguments)}function pc(m,h,f){return pi.apply(this,arguments)}function pi(){return pi=(0,y.Z)(function*(m,h,f){var _;const T=yield f.verify();try{let R;if(oe("string"==typeof T,m,"argument-error"),oe(f.type===pu,m,"argument-error"),R="string"==typeof h?{phoneNumber:h}:h,"session"in R){const H=R.session;if("phoneNumber"in R)return oe("enroll"===H.type,m,"internal-error"),(yield function Ea(m,h){return Ae(m,"POST","/v2/accounts/mfaEnrollment:start",xe(m,h))}(m,{idToken:H.credential,phoneEnrollmentInfo:{phoneNumber:R.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{oe("signin"===H.type,m,"internal-error");const ee=(null===(_=R.multiFactorHint)||void 0===_?void 0:_.uid)||R.multiFactorUid;return oe(ee,m,"missing-multi-factor-info"),(yield function zo(m,h){return Ae(m,"POST","/v2/accounts/mfaSignIn:start",xe(m,h))}(m,{mfaPendingCredential:H.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:H}=yield function Ds(m,h){return Ka.apply(this,arguments)}(m,{phoneNumber:R.phoneNumber,recaptchaToken:T});return H}}finally{f._reset()}}),pi.apply(this,arguments)}function Ui(){return(Ui=(0,y.Z)(function*(m,h){yield zt((0,F.m9)(m),h)})).apply(this,arguments)}let yt=(()=>{class m{constructor(f){this.providerId=m.PROVIDER_ID,this.auth=an(f)}verifyPhoneNumber(f,_){return pc(this.auth,f,(0,F.m9)(_))}static credential(f,_){return Si._fromVerification(f,_)}static credentialFromResult(f){return m.credentialFromTaggedObject(f)}static credentialFromError(f){return m.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:T}=f;return _&&T?Si._fromTokenResponse(_,T):null}}return m.PROVIDER_ID="phone",m.PHONE_SIGN_IN_METHOD="phone",m})();function Qr(m,h){return h?xn(h):(oe(m._popupRedirectResolver,m,"argument-error"),m._popupRedirectResolver)}class Hn extends ns{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return hi(h,this._buildIdpRequest())}_linkToIdToken(h,f){return hi(h,this._buildIdpRequest(f))}_getReauthenticationResolver(h){return hi(h,this._buildIdpRequest())}_buildIdpRequest(h){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(f.idToken=h),f}}function Qd(m){return Mo(m.auth,new Hn(m),m.bypassAuthState)}function gu(m){const{auth:h,user:f}=m;return oe(f,h,"internal-error"),wr(f,new Hn(m),m.bypassAuthState)}function Bi(m){return gc.apply(this,arguments)}function gc(){return(gc=(0,y.Z)(function*(m){const{auth:h,user:f}=m;return oe(f,h,"internal-error"),zt(f,new Hn(m),m.bypassAuthState)})).apply(this,arguments)}class Tl{constructor(h,f,_,T,R=!1){this.auth=h,this.resolver=_,this.user=T,this.bypassAuthState=R,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var h=this;return new Promise(function(){var f=(0,y.Z)(function*(_,T){h.pendingPromise={resolve:_,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(R){h.reject(R)}});return function(_,T){return f.apply(this,arguments)}}())}onAuthEvent(h){var f=this;return(0,y.Z)(function*(){const{urlResponse:_,sessionId:T,postBody:R,tenantId:H,error:ee,type:ke}=h;if(ee)return void f.reject(ee);const Ye={auth:f.auth,requestUri:_,sessionId:T,tenantId:H||void 0,postBody:R||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(ke)(Ye))}catch(ot){f.reject(ot)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Qd;case"linkViaPopup":case"linkViaRedirect":return Bi;case"reauthViaPopup":case"reauthViaRedirect":return gu;default:Te(this.auth,"internal-error")}}resolve(h){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Vi=new Ji(2e3,1e4);function go(){return(go=(0,y.Z)(function*(m,h,f){const _=(0,F.m9)(m);Le(_.auth,h,Oi);const T=Qr(_.auth,f);return new yc(_.auth,"reauthViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}function Sl(){return(Sl=(0,y.Z)(function*(m,h,f){const _=(0,F.m9)(m);Le(_.auth,h,Oi);const T=Qr(_.auth,f);return new yc(_.auth,"linkViaPopup",h,T,_).executeNotNull()})).apply(this,arguments)}let yc=(()=>{class m extends Tl{constructor(f,_,T,R,H){super(f,_,R,H),this.provider=T,this.authWindow=null,this.pollId=null,m.currentPopupAction&&m.currentPopupAction.cancel(),m.currentPopupAction=this}executeNotNull(){var f=this;return(0,y.Z)(function*(){const _=yield f.execute();return oe(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,y.Z)(function*(){it(1===f.filter.length,"Popup operations only handle one event");const _=Da();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(T=>{f.reject(T)}),f.resolver._isIframeWebStorageSupported(f.auth,T=>{T||f.reject(Se(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(Se(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,m.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,T;this.pollId=null!==(T=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Se(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(f,Vi.get())};f()}}return m.currentPopupAction=null,m})();const qo="pendingRedirect",Ko=new Map;class Jr extends Tl{constructor(h,f,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var h=()=>super.execute,f=this;return(0,y.Z)(function*(){let _=Ko.get(f.auth._key());if(!_){try{const R=(yield function Al(m,h){return xl.apply(this,arguments)}(f.resolver,f.auth))?yield h().call(f):null;_=()=>Promise.resolve(R)}catch(T){_=()=>Promise.reject(T)}Ko.set(f.auth._key(),_)}return f.bypassAuthState||Ko.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(h){var f=()=>super.onAuthEvent,_=this;return(0,y.Z)(function*(){if("signInViaRedirect"===h.type)return f().call(_,h);if("unknown"!==h.type){if(h.eventId){const T=yield _.auth._redirectUserForId(h.eventId);if(T)return _.user=T,f().call(_,h);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function xl(){return(xl=(0,y.Z)(function*(m,h){const f=yu(h),_=_c(m);if(!(yield _._isAvailable()))return!1;const T="true"===(yield _._get(f));return yield _._remove(f),T})).apply(this,arguments)}function Zo(m,h){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,y.Z)(function*(m,h){return _c(m)._set(yu(h),"true")})).apply(this,arguments)}function Jd(m,h){Ko.set(m._key(),h)}function _c(m){return xn(m._redirectPersistence)}function yu(m){return j(qo,m.config.apiKey,m.name)}function _u(m,h,f){return function ls(m,h,f){return wu.apply(this,arguments)}(m,h,f)}function wu(){return(wu=(0,y.Z)(function*(m,h,f){const _=(0,F.m9)(m);Le(_.auth,h,Oi),yield _.auth._initializationPromise;const T=Qr(_.auth,f);yield Zo(T,_.auth);const R=yield nr(_);return T._openRedirect(_.auth,h,"reauthViaRedirect",R)})).apply(this,arguments)}function Xr(m,h,f){return function Ml(m,h,f){return Rl.apply(this,arguments)}(m,h,f)}function Rl(){return(Rl=(0,y.Z)(function*(m,h,f){const _=(0,F.m9)(m);Le(_.auth,h,Oi),yield _.auth._initializationPromise;const T=Qr(_.auth,f);yield $n(!1,_,h.providerId),yield Zo(T,_.auth);const R=yield nr(_);return T._openRedirect(_.auth,h,"linkViaRedirect",R)})).apply(this,arguments)}function Jo(m,h){return gi.apply(this,arguments)}function gi(){return(gi=(0,y.Z)(function*(m,h,f=!1){const _=an(m),T=Qr(_,h),H=yield new Jr(_,T,f).execute();return H&&!f&&(delete H.user._redirectEventId,yield _._persistUserIfCurrent(H.user),yield _._setRedirectUser(null,h)),H})).apply(this,arguments)}function nr(m){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,y.Z)(function*(m){const h=Da(`${m.uid}:::`);return m._redirectEventId=h,yield m.auth._setRedirectUser(m),yield m.auth._persistUserIfCurrent(m),h})).apply(this,arguments)}class Sa{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(f=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function Pr(m){switch(m.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return As(m);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=h,f=!0)),f}sendToConsumer(h,f){var _;if(h.error&&!As(h)){const T=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(Se(this.auth,T))}else f.onAuthEvent(h)}isEventForConsumer(h,f){const _=null===f.eventId||!!h.eventId&&h.eventId===f.eventId;return f.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ds(h))}saveEventToCache(h){this.cachedEventUids.add(ds(h)),this.lastProcessedEventTime=Date.now()}}function ds(m){return[m.type,m.eventId,m.sessionId,m.tenantId].filter(h=>h).join("-")}function As({type:m,error:h}){return"unknown"===m&&"auth/no-auth-event"===h?.code}function ea(m){return jf.apply(this,arguments)}function jf(){return(jf=(0,y.Z)(function*(m,h={}){return Ae(m,"GET","/v1/projects",h)})).apply(this,arguments)}const wc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ec=/^https?/;function Ks(){return(Ks=(0,y.Z)(function*(m){if(m.config.emulator)return;const{authorizedDomains:h}=yield ea(m);for(const f of h)try{if(Nl(f))return}catch{}Te(m,"unauthorized-domain")})).apply(this,arguments)}function Nl(m){const h=Xt(),{protocol:f,hostname:_}=new URL(h);if(m.startsWith("chrome-extension://")){const H=new URL(m);return""===H.hostname&&""===_?"chrome-extension:"===f&&m.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===f&&H.hostname===_}if(!Ec.test(f))return!1;if(wc.test(m))return _===m;const T=m.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(_)}const Dc=new Ji(3e4,6e4);function Mt(){const m=Tn().___jsl;if(m?.H)for(const h of Object.keys(m.H))if(m.H[h].r=m.H[h].r||[],m.H[h].L=m.H[h].L||[],m.H[h].r=[...m.H[h].L],m.CP)for(let f=0;f<m.CP.length;f++)m.CP[f]=null}let bc=null;function ji(m){return bc=bc||function hs(m){return new Promise((h,f)=>{var _,T,R;function H(){Mt(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Mt(),f(Se(m,"network-request-failed"))},timeout:Dc.get()})}if(null!==(T=null===(_=Tn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==T&&T.Iframe)h(gapi.iframes.getContext());else{if(null===(R=Tn().gapi)||void 0===R||!R.load){const ee=function er(m){return`__${m}${Math.floor(1e6*Math.random())}`}("iframefcb");return Tn()[ee]=()=>{gapi.load?H():f(Se(m,"network-request-failed"))},function ir(m){return new Promise((h,f)=>{const _=document.createElement("script");_.setAttribute("src",m),_.onload=h,_.onerror=T=>{const R=Se("internal-error");R.customData=T,f(R)},_.type="text/javascript",_.charset="UTF-8",function nn(){var m,h;return null!==(h=null===(m=document.getElementsByTagName("head"))||void 0===m?void 0:m[0])&&void 0!==h?h:document}().appendChild(_)})}(`https://apis.google.com/js/api.js?onload=${ee}`).catch(ke=>f(ke))}H()}}).catch(h=>{throw bc=null,h})}(m),bc}const $f=new Ji(5e3,15e3),eh="__/auth/iframe",fs="emulator/auth/iframe",th={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nh=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rh(m){const h=m.config;oe(h.authDomain,m,"auth-domain-config-required");const f=h.emulator?he(h,fs):`https://${m.config.authDomain}/${eh}`,_={apiKey:h.apiKey,appName:m.name,v:le.SDK_VERSION},T=nh.get(m.config.apiHost);T&&(_.eid=T);const R=m._getFrameworks();return R.length&&(_.fw=R.join(",")),`${f}?${(0,F.xO)(_).slice(1)}`}function D(){return D=(0,y.Z)(function*(m){const h=yield ji(m),f=Tn().gapi;return oe(f,m,"internal-error"),h.open({where:document.body,url:rh(m),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:th,dontclear:!0},_=>new Promise(function(){var T=(0,y.Z)(function*(R,H){yield _.restyle({setHideOnLeave:!1});const ee=Se(m,"network-request-failed"),ke=Tn().setTimeout(()=>{H(ee)},$f.get());function Ye(){Tn().clearTimeout(ke),R(_)}_.ping(Ye).then(Ye,()=>{H(ee)})});return function(R,H){return T.apply(this,arguments)}}()))}),D.apply(this,arguments)}const A={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},L=500,q=600,X="_blank",ae="http://localhost";class Qe{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ze(m,h,f,_=L,T=q){const R=Math.max((window.screen.availHeight-T)/2,0).toString(),H=Math.max((window.screen.availWidth-_)/2,0).toString();let ee="";const ke=Object.assign(Object.assign({},A),{width:_.toString(),height:T.toString(),top:R,left:H}),Ye=(0,F.z$)().toLowerCase();f&&(ee=function He(m=(0,F.z$)()){return/crios\//i.test(m)}(Ye)?X:f),function Ie(m=(0,F.z$)()){return/firefox\//i.test(m)}(Ye)&&(h=h||ae,ke.scrollbars="yes");const ot=Object.entries(ke).reduce((Un,[wo,ql])=>`${Un}${wo}=${ql},`,"");if(function yr(m=(0,F.z$)()){var h;return pn(m)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(Ye)&&"_self"!==ee)return function vt(m,h){const f=document.createElement("a");f.href=m,f.target=h;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(h||"",ee),new Qe(null);const ut=window.open(h||"",ee,ot);oe(ut,m,"popup-blocked");try{ut.focus()}catch{}return new Qe(ut)}const Ft="__/auth/handler",Ut="emulator/auth/handler",ei=encodeURIComponent("fac");function Sn(m,h,f,_,T,R){return $t.apply(this,arguments)}function $t(){return($t=(0,y.Z)(function*(m,h,f,_,T,R){oe(m.config.authDomain,m,"auth-domain-config-required"),oe(m.config.apiKey,m,"invalid-api-key");const H={apiKey:m.config.apiKey,appName:m.name,authType:f,redirectUrl:_,v:le.SDK_VERSION,eventId:T};if(h instanceof Oi){h.setDefaultLanguage(m.languageCode),H.providerId=h.providerId||"",(0,F.xb)(h.getCustomParameters())||(H.customParameters=JSON.stringify(h.getCustomParameters()));for(const[ot,ut]of Object.entries(R||{}))H[ot]=ut}if(h instanceof ki){const ot=h.getScopes().filter(ut=>""!==ut);ot.length>0&&(H.scopes=ot.join(","))}m.tenantId&&(H.tid=m.tenantId);const ee=H;for(const ot of Object.keys(ee))void 0===ee[ot]&&delete ee[ot];const ke=yield m._getAppCheckToken(),Ye=ke?`#${ei}=${encodeURIComponent(ke)}`:"";return`${function mo({config:m}){return m.emulator?he(m,Ut):`https://${m.authDomain}/${Ft}`}(m)}?${(0,F.xO)(ee).slice(1)}${Ye}`})).apply(this,arguments)}const ta="webStorageSupport",ps=class Nr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=Jo,this._overrideRedirectResult=Jd}_openPopup(h,f,_,T){var R=this;return(0,y.Z)(function*(){var H;it(null===(H=R.eventManagers[h._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const ee=yield Sn(h,f,_,Xt(),T);return Ze(h,ee,Da())})()}_openRedirect(h,f,_,T){var R=this;return(0,y.Z)(function*(){return yield R._originValidation(h),function Zd(m){Tn().location.href=m}(yield Sn(h,f,_,Xt(),T)),new Promise(()=>{})})()}_initialize(h){const f=h._key();if(this.eventManagers[f]){const{manager:T,promise:R}=this.eventManagers[f];return T?Promise.resolve(T):(it(R,"If manager is not set, promise should be"),R)}const _=this.initAndGetManager(h);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(h){var f=this;return(0,y.Z)(function*(){const _=yield function E(m){return D.apply(this,arguments)}(h),T=new Sa(h);return _.register("authEvent",R=>(oe(R?.authEvent,h,"invalid-auth-event"),{status:T.onEvent(R.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[h._key()]={manager:T},f.iframes[h._key()]=_,T})()}_isIframeWebStorageSupported(h,f){this.iframes[h._key()].send(ta,{type:ta},T=>{var R;const H=null===(R=T?.[0])||void 0===R?void 0:R[ta];void 0!==H&&f(!!H),Te(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Ic(m){return Ks.apply(this,arguments)}(h)),this.originValidationPromises[f]}get _shouldInitProactively(){return Di()||ne()||pn()}};function Iu(){return window}const Wy=2e3;function Fl(){return Fl=(0,y.Z)(function*(m,h,f){var _;const{BuildInfo:T}=Iu();it(h.sessionId,"AuthEvent did not contain a session ID");const R=yield function xa(m){return Ul.apply(this,arguments)}(h.sessionId),H={};return pn()?H.ibi=T.packageName:on()?H.apn=T.packageName:Te(m,"operation-not-supported-in-this-environment"),T.displayName&&(H.appDisplayName=T.displayName),H.sessionId=R,Sn(m,f,h.type,void 0,null!==(_=h.eventId)&&void 0!==_?_:void 0,H)}),Fl.apply(this,arguments)}function Aa(){return(Aa=(0,y.Z)(function*(m){const{BuildInfo:h}=Iu(),f={};pn()?f.iosBundleId=h.packageName:on()?f.androidPackageName=h.packageName:Te(m,"operation-not-supported-in-this-environment"),yield ea(m,f)})).apply(this,arguments)}function Tc(){return(Tc=(0,y.Z)(function*(m,h,f){const{cordova:_}=Iu();let T=()=>{};try{yield new Promise((R,H)=>{let ee=null;function ke(){var ut;R();const Un=null===(ut=_.plugins.browsertab)||void 0===ut?void 0:ut.close;"function"==typeof Un&&Un(),"function"==typeof f?.close&&f.close()}function Ye(){ee||(ee=window.setTimeout(()=>{H(Se(m,"redirect-cancelled-by-user"))},Wy))}function ot(){"visible"===document?.visibilityState&&Ye()}h.addPassiveListener(ke),document.addEventListener("resume",Ye,!1),on()&&document.addEventListener("visibilitychange",ot,!1),T=()=>{h.removePassiveListener(ke),document.removeEventListener("resume",Ye,!1),document.removeEventListener("visibilitychange",ot,!1),ee&&window.clearTimeout(ee)}})}finally{T()}})).apply(this,arguments)}function Ul(){return(Ul=(0,y.Z)(function*(m){const h=function Vg(m){if(it(/[0-9a-zA-Z]+/.test(m),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(m);const h=new ArrayBuffer(m.length),f=new Uint8Array(h);for(let _=0;_<m.length;_++)f[_]=m.charCodeAt(_);return f}(m),f=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(f)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Bl=20;class oh extends Sa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(h)),super.onEvent(h)}initialized(){var h=this;return(0,y.Z)(function*(){yield h.initPromise})()}}function ah(m){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,y.Z)(function*(m){const h=yield uh()._get(Cu(m));return h&&(yield uh()._remove(Cu(m))),h})).apply(this,arguments)}function qf(){const m=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<Bl;f++){const _=Math.floor(Math.random()*h.length);m.push(h.charAt(_))}return m.join("")}function uh(){return xn(Vo)}function Cu(m){return j("authEvent",m.config.apiKey,m.name)}function Zs(m){if(!m?.includes("?"))return{};const[h,...f]=m.split("?");return(0,F.zd)(f.join("?"))}const $l=class jl{constructor(){this._redirectPersistence=Ws,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Jo,this._overrideRedirectResult=Jd}_initialize(h){var f=this;return(0,y.Z)(function*(){const _=h._key();let T=f.eventManagers.get(_);return T||(T=new oh(h),f.eventManagers.set(_,T),f.attachCallbackListeners(h,T)),T})()}_openPopup(h){Te(h,"operation-not-supported-in-this-environment")}_openRedirect(h,f,_,T){var R=this;return(0,y.Z)(function*(){!function Ky(m){var h,f,_,T,R,H,ee,ke,Ye,ot;const ut=Iu();oe("function"==typeof(null===(h=ut?.universalLinks)||void 0===h?void 0:h.subscribe),m,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),oe(typeof(null===(f=ut?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),oe("function"==typeof(null===(R=null===(T=null===(_=ut?.cordova)||void 0===_?void 0:_.plugins)||void 0===T?void 0:T.browsertab)||void 0===R?void 0:R.openUrl),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(ke=null===(ee=null===(H=ut?.cordova)||void 0===H?void 0:H.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===ke?void 0:ke.isAvailable),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),oe("function"==typeof(null===(ot=null===(Ye=ut?.cordova)||void 0===Ye?void 0:Ye.InAppBrowser)||void 0===ot?void 0:ot.open),m,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const H=yield R._initialize(h);yield H.initialized(),H.resetRedirect(),function vc(){Ko.clear()}(),yield R._originValidation(h);const ee=function ia(m,h,f=null){return{type:h,eventId:f,urlResponse:null,sessionId:qf(),postBody:null,tenantId:m.tenantId,error:Se(m,"no-auth-event")}}(h,_,T);yield function jg(m,h){return uh()._set(Cu(m),h)}(h,ee);const ke=yield function Bg(m,h,f){return Fl.apply(this,arguments)}(h,ee,f),Ye=yield function qy(m){const{cordova:h}=Iu();return new Promise(f=>{h.plugins.browsertab.isAvailable(_=>{let T=null;_?h.plugins.browsertab.openUrl(m):T=h.InAppBrowser.open(m,function tn(m=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(m)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(m)}()?"_blank":"_system","location=yes"),f(T)})})}(ke);return function Du(m,h,f){return Tc.apply(this,arguments)}(h,H,Ye)})()}_isIframeWebStorageSupported(h,f){throw new Error("Method not implemented.")}_originValidation(h){const f=h._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function sh(m){return Aa.apply(this,arguments)}(h)),this.originValidationPromises[f]}attachCallbackListeners(h,f){const{universalLinks:_,handleOpenURL:T,BuildInfo:R}=Iu(),H=setTimeout((0,y.Z)(function*(){yield ah(h),f.onEvent(Zf())}),500),ee=function(){var ot=(0,y.Z)(function*(ut){clearTimeout(H);const Un=yield ah(h);let wo=null;Un&&ut?.url&&(wo=function bu(m,h){var f,_;const T=function lh(m){const h=Zs(m),f=h.link?decodeURIComponent(h.link):void 0,_=Zs(f).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Zs(T).link||T||_||f||m}(h);if(T.includes("/__/auth/callback")){const R=Zs(T),H=R.firebaseError?function ch(m){try{return JSON.parse(m)}catch{return null}}(decodeURIComponent(R.firebaseError)):null,ee=null===(_=null===(f=H?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],ke=ee?Se(ee):null;return ke?{type:m.type,eventId:m.eventId,tenantId:m.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:m.type,eventId:m.eventId,tenantId:m.tenantId,sessionId:m.sessionId,urlResponse:T,postBody:null}}return null}(Un,ut.url)),f.onEvent(wo||Zf())});return function(Un){return ot.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,ee);const ke=T,Ye=`${R.packageName.toLowerCase()}://`;Iu().handleOpenURL=function(){var ot=(0,y.Z)(function*(ut){if(ut.toLowerCase().startsWith(Ye)&&ee({url:ut}),"function"==typeof ke)try{ke(ut)}catch(Un){console.error(Un)}});return function(ut){return ot.apply(this,arguments)}}()}};function Zf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Se("no-auth-event")}}const Qf=1e3;function xs(){var m;return(null===(m=self?.location)||void 0===m?void 0:m.protocol)||null}function $g(){return function Ma(m=(0,F.z$)()){return!("file:"!==xs()&&"ionic:"!==xs()&&"capacitor:"!==xs()||!m.toLowerCase().match(/iphone|ipad|ipod|android/))}()&&typeof document<"u"}function Ac(){return(Ac=(0,y.Z)(function*(){return!!$g()&&new Promise(m=>{const h=setTimeout(()=>{m(!1)},Qf);document.addEventListener("deviceready",()=>{clearTimeout(h),m(!0)})})})).apply(this,arguments)}const ep="persistence";function tp(m){return np.apply(this,arguments)}function np(){return(np=(0,y.Z)(function*(m){yield m._initializationPromise;const h=function rp(){var m;try{return(null===(m=function Xf(){return typeof window<"u"?window:null}())||void 0===m?void 0:m.sessionStorage)||null}catch{return null}}(),f=j(ep,m.config.apiKey,m.name);h&&h.setItem(f,m._getPersistence())})).apply(this,arguments)}const ip=oe;class ti{constructor(){this.browserResolver=xn(ps),this.cordovaResolver=xn($l),this.underlyingResolver=null,this._redirectPersistence=Ws,this._completeRedirectFn=Jo,this._overrideRedirectResult=Jd}_initialize(h){var f=this;return(0,y.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,f,_,T){var R=this;return(0,y.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openPopup(h,f,_,T)})()}_openRedirect(h,f,_,T){var R=this;return(0,y.Z)(function*(){return yield R.selectUnderlyingResolver(),R.assertedUnderlyingResolver._openRedirect(h,f,_,T)})()}_isIframeWebStorageSupported(h,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,f)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return $g()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ip(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,y.Z)(function*(){if(h.underlyingResolver)return;const f=yield function Hg(){return Ac.apply(this,arguments)}();h.underlyingResolver=f?h.cordovaResolver:h.browserResolver})()}}function Hi(m){return m.unwrap()}function Xy(m){return tv(m)}function tv(m){const{_tokenResponse:h}=m instanceof F.ZR?m.customData:m;if(!h)return null;if(!(m instanceof F.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return yt.credentialFromResult(m);const f=h.providerId;if(!f||f===ye.PASSWORD)return null;let _;switch(f){case ye.GOOGLE:_=$s;break;case ye.FACEBOOK:_=ma;break;case ye.GITHUB:_=Ja;break;case ye.TWITTER:_=ya;break;default:const{oauthIdToken:T,oauthAccessToken:R,oauthTokenSecret:H,pendingToken:ee,nonce:ke}=h;return R||H||T||ee?ee?f.startsWith("saml.")?bs._create(f,ee):ss._fromParams({providerId:f,signInMethod:f,pendingToken:ee,idToken:T,accessToken:R}):new os(f).credential({idToken:T,accessToken:R,rawNonce:ke}):null}return m instanceof F.ZR?_.credentialFromError(m):_.credentialFromResult(m)}function Ur(m,h){return h.catch(f=>{throw f instanceof F.ZR&&function ev(m,h){var f;const _=null===(f=h.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new hh(m,function rc(m,h){var f;const _=(0,F.m9)(m),T=h;return oe(h.customData.operationType,_,"argument-error"),oe(null===(f=T.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),ko._fromError(_,T)}(m,h));else if(_){const T=tv(h),R=h;T&&(R.credential=T,R.tenantId=_.tenantId||void 0,R.email=_.email||void 0,R.phoneNumber=_.phoneNumber||void 0)}}(m,f),f}).then(f=>{const T=f.user;return{operationType:f.operationType,credential:Xy(f),additionalUserInfo:gl(f),user:_o.getOrCreate(T)}})}function sp(m,h){return dh.apply(this,arguments)}function dh(){return(dh=(0,y.Z)(function*(m,h){const f=yield h;return{verificationId:f.verificationId,confirm:_=>Ur(m,f.confirm(_))}})).apply(this,arguments)}class hh{constructor(h,f){this.resolver=f,this.auth=function xc(m){return m.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return Ur(Hi(this.auth),this.resolver.resolveSignIn(h))}}class _o{constructor(h){this._delegate=h,this.multiFactor=function Wd(m){const h=(0,F.m9)(m);return fo.has(h)||fo.set(h,Uo._fromUser(h)),fo.get(h)}(h)}static getOrCreate(h){return _o.USER_MAP.has(h)||_o.USER_MAP.set(h,new _o(h)),_o.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var f=this;return(0,y.Z)(function*(){return Ur(f.auth,Fd(f._delegate,h))})()}linkWithPhoneNumber(h,f){var _=this;return(0,y.Z)(function*(){return sp(_.auth,function hc(m,h,f){return fc.apply(this,arguments)}(_._delegate,h,f))})()}linkWithPopup(h){var f=this;return(0,y.Z)(function*(){return Ur(f.auth,function Tt(m,h,f){return Sl.apply(this,arguments)}(f._delegate,h,ti))})()}linkWithRedirect(h){var f=this;return(0,y.Z)(function*(){return yield tp(an(f.auth)),Xr(f._delegate,h,ti)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var f=this;return(0,y.Z)(function*(){return Ur(f.auth,Ud(f._delegate,h))})()}reauthenticateWithPhoneNumber(h,f){return sp(this.auth,function Bf(m,h,f){return Cl.apply(this,arguments)}(this._delegate,h,f))}reauthenticateWithPopup(h){return Ur(this.auth,function mu(m,h,f){return go.apply(this,arguments)}(this._delegate,h,ti))}reauthenticateWithRedirect(h){var f=this;return(0,y.Z)(function*(){return yield tp(an(f.auth)),_u(f._delegate,h,ti)})()}sendEmailVerification(h){return function Qu(m,h){return su.apply(this,arguments)}(this._delegate,h)}unlink(h){var f=this;return(0,y.Z)(function*(){return yield function rt(m,h){return St.apply(this,arguments)}(f._delegate,h),f})()}updateEmail(h){return function Fr(m,h){return Fn((0,F.m9)(m),h,null)}(this._delegate,h)}updatePassword(h){return function zs(m,h){return Fn((0,F.m9)(m),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function Dn(m,h){return Ui.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Af(m,h){return Xu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,f){return function fl(m,h,f){return ou.apply(this,arguments)}(this._delegate,h,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}_o.USER_MAP=new WeakMap;class Au{constructor(){this.providerId="phone",this._delegate=new yt(Hi(te.Z.auth()))}static credential(h,f){return yt.credential(h,f)}verifyPhoneNumber(h,f){return this._delegate.verifyPhoneNumber(h,f)}unwrap(){return this._delegate}}Au.PHONE_SIGN_IN_METHOD=yt.PHONE_SIGN_IN_METHOD,Au.PROVIDER_ID=yt.PROVIDER_ID},1186:(bt,Ne,U)=>{U.d(Ne,{Jn:()=>Od,qX:()=>hi,Xd:()=>Vs,KN:()=>js});var y=U(5861);const ue=function(N){const M=[];let k=0;for(let K=0;K<N.length;K++){let $=N.charCodeAt(K);$<128?M[k++]=$:$<2048?(M[k++]=$>>6|192,M[k++]=63&$|128):55296==(64512&$)&&K+1<N.length&&56320==(64512&N.charCodeAt(K+1))?($=65536+((1023&$)<<10)+(1023&N.charCodeAt(++K)),M[k++]=$>>18|240,M[k++]=$>>12&63|128,M[k++]=$>>6&63|128,M[k++]=63&$|128):(M[k++]=$>>12|224,M[k++]=$>>6&63|128,M[k++]=63&$|128)}return M},Ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(N,M){if(!Array.isArray(N))throw Error("encodeByteArray takes an array as a parameter");this.init_();const k=M?this.byteToCharMapWebSafe_:this.byteToCharMap_,K=[];for(let $=0;$<N.length;$+=3){const Re=N[$],rt=$+1<N.length,St=rt?N[$+1]:0,zt=$+2<N.length,Yn=zt?N[$+2]:0;let wr=(15&St)<<2|Yn>>6,as=63&Yn;zt||(as=64,rt||(wr=64)),K.push(k[Re>>2],k[(3&Re)<<4|St>>4],k[wr],k[as])}return K.join("")},encodeString(N,M){return this.HAS_NATIVE_SUPPORT&&!M?btoa(N):this.encodeByteArray(ue(N),M)},decodeString(N,M){return this.HAS_NATIVE_SUPPORT&&!M?atob(N):function(N){const M=[];let k=0,K=0;for(;k<N.length;){const $=N[k++];if($<128)M[K++]=String.fromCharCode($);else if($>191&&$<224){const Re=N[k++];M[K++]=String.fromCharCode((31&$)<<6|63&Re)}else if($>239&&$<365){const zt=((7&$)<<18|(63&N[k++])<<12|(63&N[k++])<<6|63&N[k++])-65536;M[K++]=String.fromCharCode(55296+(zt>>10)),M[K++]=String.fromCharCode(56320+(1023&zt))}else{const Re=N[k++],rt=N[k++];M[K++]=String.fromCharCode((15&$)<<12|(63&Re)<<6|63&rt)}}return M.join("")}(this.decodeStringToByteArray(N,M))},decodeStringToByteArray(N,M){this.init_();const k=M?this.charToByteMapWebSafe_:this.charToByteMap_,K=[];for(let $=0;$<N.length;){const Re=k[N.charAt($++)],St=$<N.length?k[N.charAt($)]:0;++$;const Yn=$<N.length?k[N.charAt($)]:64;++$;const fn=$<N.length?k[N.charAt($)]:64;if(++$,null==Re||null==St||null==Yn||null==fn)throw Error();K.push(Re<<2|St>>4),64!==Yn&&(K.push(St<<4&240|Yn>>2),64!==fn&&K.push(Yn<<6&192|fn))}return K},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let N=0;N<this.ENCODED_VALS.length;N++)this.byteToCharMap_[N]=this.ENCODED_VALS.charAt(N),this.charToByteMap_[this.byteToCharMap_[N]]=N,this.byteToCharMapWebSafe_[N]=this.ENCODED_VALS_WEBSAFE.charAt(N),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[N]]=N,N>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(N)]=N,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(N)]=N)}}},ye=function(N){return function(N){const M=ue(N);return Ee.encodeByteArray(M,!0)}(N).replace(/\./g,"")};class xe extends Error{constructor(M,k,K){super(k),this.code=M,this.customData=K,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ae.prototype.create)}}class Ae{constructor(M,k,K){this.service=M,this.serviceName=k,this.errors=K}create(M,...k){const K=k[0]||{},$=`${this.service}/${M}`,Re=this.errors[M],rt=Re?function pt(N,M){return N.replace(gt,(k,K)=>{const $=M[K];return null!=$?String($):`<${K}?>`})}(Re,K):"Error";return new xe($,`${this.serviceName}: ${rt} (${$}).`,K)}}const gt=/\{\$([^}]+)}/g;class j{constructor(M,k,K){this.name=M,this.instanceFactory=k,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(M){return this.instantiationMode=M,this}setMultipleInstances(M){return this.multipleInstances=M,this}setServiceProps(M){return this.serviceProps=M,this}setInstanceCreatedCallback(M){return this.onInstanceCreated=M,this}}var Nt=U(1877);const on=(N,M)=>M.some(k=>N instanceof k);let kn,An;const yr=new WeakMap,Wr=new WeakMap,Di=new WeakMap,Ls=new WeakMap,ge=new WeakMap;let mt={get(N,M,k){if(N instanceof IDBTransaction){if("done"===M)return Wr.get(N);if("objectStoreNames"===M)return N.objectStoreNames||Di.get(N);if("store"===M)return k.objectStoreNames[1]?void 0:k.objectStore(k.objectStoreNames[0])}return Qt(N[M])},set:(N,M,k)=>(N[M]=k,!0),has:(N,M)=>N instanceof IDBTransaction&&("done"===M||"store"===M)||M in N};function Et(N){return"function"==typeof N?function qt(N){return N!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function tn(){return An||(An=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(N)?function(...M){return N.apply(nn(this),M),Qt(yr.get(this))}:function(...M){return Qt(N.apply(nn(this),M))}:function(M,...k){const K=N.call(nn(this),M,...k);return Di.set(K,M.sort?M.sort():[M]),Qt(K)}}(N):(N instanceof IDBTransaction&&function Be(N){if(Wr.has(N))return;const M=new Promise((k,K)=>{const $=()=>{N.removeEventListener("complete",Re),N.removeEventListener("error",rt),N.removeEventListener("abort",rt)},Re=()=>{k(),$()},rt=()=>{K(N.error||new DOMException("AbortError","AbortError")),$()};N.addEventListener("complete",Re),N.addEventListener("error",rt),N.addEventListener("abort",rt)});Wr.set(N,M)}(N),on(N,function pn(){return kn||(kn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(N,mt):N)}function Qt(N){if(N instanceof IDBRequest)return function ie(N){const M=new Promise((k,K)=>{const $=()=>{N.removeEventListener("success",Re),N.removeEventListener("error",rt)},Re=()=>{k(Qt(N.result)),$()},rt=()=>{K(N.error),$()};N.addEventListener("success",Re),N.addEventListener("error",rt)});return M.then(k=>{k instanceof IDBCursor&&yr.set(k,N)}).catch(()=>{}),ge.set(M,N),M}(N);if(Ls.has(N))return Ls.get(N);const M=Et(N);return M!==N&&(Ls.set(N,M),ge.set(M,N)),M}const nn=N=>ge.get(N),pa=["get","getKey","getAll","getAllKeys","count"],al=["put","add","delete","clear"],ts=new Map;function qr(N,M){if(!(N instanceof IDBDatabase)||M in N||"string"!=typeof M)return;if(ts.get(M))return ts.get(M);const k=M.replace(/FromIndex$/,""),K=M!==k,$=al.includes(k);if(!(k in(K?IDBIndex:IDBObjectStore).prototype)||!$&&!pa.includes(k))return;const Re=function(){var rt=(0,y.Z)(function*(St,...zt){const Yn=this.transaction(St,$?"readwrite":"readonly");let $n=Yn.store;return K&&($n=$n.index(zt.shift())),(yield Promise.all([$n[k](...zt),$&&Yn.done]))[0]});return function(zt){return rt.apply(this,arguments)}}();return ts.set(M,Re),Re}!function xt(N){mt=N(mt)}(N=>({...N,get:(M,k,K)=>qr(M,k)||N.get(M,k,K),has:(M,k)=>!!qr(M,k)||N.has(M,k)}));class Xe{constructor(M){this.container=M}getPlatformInfoString(){return this.container.getProviders().map(k=>{if(function jt(N){return"VERSION"===N.getComponent()?.type}(k)){const K=k.getImmediate();return`${K.library}/${K.version}`}return null}).filter(k=>k).join(" ")}}const En="@firebase/app",an=new Nt.Yd("@firebase/app"),Yr={[En]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ci=new Map,is=new Map;function qa(N,M){try{N.container.addComponent(M)}catch(k){an.debug(`Component ${M.name} failed to register with FirebaseApp ${N.name}`,k)}}function Vs(N){const M=N.name;if(is.has(M))return an.debug(`There were multiple attempts to register component ${M}.`),!1;is.set(M,N);for(const k of Ci.values())qa(k,N);return!0}function hi(N,M){const k=N.container.getProvider("heartbeat").getImmediate({optional:!0});return k&&k.triggerHeartbeat(),N.container.getProvider(M)}const Ds=new Ae("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."}),Od="9.16.0";function js(N,M,k){var K;let $=null!==(K=Yr[N])&&void 0!==K?K:N;k&&($+=`-${k}`);const Re=$.match(/\s|\//),rt=M.match(/\s|\//);if(Re||rt){const St=[`Unable to register library "${$}" with version "${M}":`];return Re&&St.push(`library name "${$}" contains illegal characters (whitespace or "/")`),Re&&rt&&St.push("and"),rt&&St.push(`version name "${M}" contains illegal characters (whitespace or "/")`),void an.warn(St.join(" "))}Vs(new j(`${$}-version`,()=>({library:$,version:M}),"VERSION"))}const Hu="firebase-heartbeat-database",lo=1,Ya="firebase-heartbeat-store";let Qa=null;function Oi(){return Qa||(Qa=function ir(N,M,{blocked:k,upgrade:K,blocking:$,terminated:Re}={}){const rt=indexedDB.open(N,M),St=Qt(rt);return K&&rt.addEventListener("upgradeneeded",zt=>{K(Qt(rt.result),zt.oldVersion,zt.newVersion,Qt(rt.transaction))}),k&&rt.addEventListener("blocked",()=>k()),St.then(zt=>{Re&&zt.addEventListener("close",()=>Re()),$&&zt.addEventListener("versionchange",()=>$())}).catch(()=>{}),St}(Hu,lo,{upgrade:(N,M)=>{0===M&&N.createObjectStore(Ya)}}).catch(N=>{throw Ds.create("idb-open",{originalErrorMessage:N.message})})),Qa}function os(){return(os=(0,y.Z)(function*(N){try{return(yield Oi()).transaction(Ya).objectStore(Ya).get(Ja(N))}catch(M){if(M instanceof xe)an.warn(M.message);else{const k=Ds.create("idb-get",{originalErrorMessage:M?.message});an.warn(k.message)}}})).apply(this,arguments)}function ma(N,M){return $s.apply(this,arguments)}function $s(){return($s=(0,y.Z)(function*(N,M){try{const K=(yield Oi()).transaction(Ya,"readwrite");return yield K.objectStore(Ya).put(M,Ja(N)),K.done}catch(k){if(k instanceof xe)an.warn(k.message);else{const K=Ds.create("idb-set",{originalErrorMessage:k?.message});an.warn(K.message)}}})).apply(this,arguments)}function Ja(N){return`${N.name}!${N.options.appId}`}class dl{constructor(M){this.container=M,this._heartbeatsCache=null;const k=this.container.getProvider("app").getImmediate();this._storage=new Cs(k),this._heartbeatsCachePromise=this._storage.read().then(K=>(this._heartbeatsCache=K,K))}triggerHeartbeat(){var M=this;return(0,y.Z)(function*(){const K=M.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),$=ho();if(null===M._heartbeatsCache&&(M._heartbeatsCache=yield M._heartbeatsCachePromise),M._heartbeatsCache.lastSentHeartbeatDate!==$&&!M._heartbeatsCache.heartbeats.some(Re=>Re.date===$))return M._heartbeatsCache.heartbeats.push({date:$,agent:K}),M._heartbeatsCache.heartbeats=M._heartbeatsCache.heartbeats.filter(Re=>{const rt=new Date(Re.date).valueOf();return Date.now()-rt<=2592e6}),M._storage.overwrite(M._heartbeatsCache)})()}getHeartbeatsHeader(){var M=this;return(0,y.Z)(function*(){if(null===M._heartbeatsCache&&(yield M._heartbeatsCachePromise),null===M._heartbeatsCache||0===M._heartbeatsCache.heartbeats.length)return"";const k=ho(),{heartbeatsToSend:K,unsentEntries:$}=function ya(N,M=1024){const k=[];let K=N.slice();for(const $ of N){const Re=k.find(rt=>rt.agent===$.agent);if(Re){if(Re.dates.push($.date),Mr(k)>M){Re.dates.pop();break}}else if(k.push({agent:$.agent,dates:[$.date]}),Mr(k)>M){k.pop();break}K=K.slice(1)}return{heartbeatsToSend:k,unsentEntries:K}}(M._heartbeatsCache.heartbeats),Re=ye(JSON.stringify({version:2,heartbeats:K}));return M._heartbeatsCache.lastSentHeartbeatDate=k,$.length>0?(M._heartbeatsCache.heartbeats=$,yield M._storage.overwrite(M._heartbeatsCache)):(M._heartbeatsCache.heartbeats=[],M._storage.overwrite(M._heartbeatsCache)),Re})()}}function ho(){return(new Date).toISOString().substring(0,10)}class Cs{constructor(M){this.app=M,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!function he(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function me(){return new Promise((N,M)=>{try{let k=!0;const K="validate-browser-context-for-indexeddb-analytics-module",$=self.indexedDB.open(K);$.onsuccess=()=>{$.result.close(),k||self.indexedDB.deleteDatabase(K),N(!0)},$.onupgradeneeded=()=>{k=!1},$.onerror=()=>{var Re;M((null===(Re=$.error)||void 0===Re?void 0:Re.message)||"")}}catch(k){M(k)}})}().then(()=>!0).catch(()=>!1)})()}read(){var M=this;return(0,y.Z)(function*(){return(yield M._canUseIndexedDBPromise)&&(yield function ki(N){return os.apply(this,arguments)}(M.app))||{heartbeats:[]}})()}overwrite(M){var k=this;return(0,y.Z)(function*(){var K;if(yield k._canUseIndexedDBPromise){const Re=yield k.read();return ma(k.app,{lastSentHeartbeatDate:null!==(K=M.lastSentHeartbeatDate)&&void 0!==K?K:Re.lastSentHeartbeatDate,heartbeats:M.heartbeats})}})()}add(M){var k=this;return(0,y.Z)(function*(){var K;if(yield k._canUseIndexedDBPromise){const Re=yield k.read();return ma(k.app,{lastSentHeartbeatDate:null!==(K=M.lastSentHeartbeatDate)&&void 0!==K?K:Re.lastSentHeartbeatDate,heartbeats:[...Re.heartbeats,...M.heartbeats]})}})()}}function Mr(N){return ye(JSON.stringify({version:2,heartbeats:N})).length}!function Rr(N){Vs(new j("platform-logger",M=>new Xe(M),"PRIVATE")),Vs(new j("heartbeat",M=>new dl(M),"PRIVATE")),js(En,"0.9.1",N),js(En,"0.9.1","esm2017"),js("fire-js","")}("")},4859:(bt,Ne,U)=>{U.d(Ne,{H0:()=>Ce,wA:()=>F});var y=U(5861),te=U(2090);class F{constructor(G,W,Q){this.name=G,this.instanceFactory=W,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const le="[DEFAULT]";class ue{constructor(G,W){this.name=G,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const W=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(W)){const Q=new te.BH;if(this.instancesDeferred.set(W,Q),this.isInitialized(W)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:W});We&&Q.resolve(We)}catch{}}return this.instancesDeferred.get(W).promise}getImmediate(G){var W;const Q=this.normalizeInstanceIdentifier(G?.identifier),We=null!==(W=G?.optional)&&void 0!==W&&W;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Me){if(We)return null;throw Me}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function Ee(ye){return"EAGER"===ye.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[W,Q]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(W);try{const Me=this.getOrInitializeService({instanceIdentifier:We});Q.resolve(Me)}catch{}}}}clearInstance(G=le){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,y.Z)(function*(){const W=Array.from(G.instances.values());yield Promise.all([...W.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...W.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=le){return this.instances.has(G)}getOptions(G=le){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:W={}}=G,Q=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:Q,options:W});for(const[Me,Je]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Me)&&Je.resolve(We);return We}onInit(G,W){var Q;const We=this.normalizeInstanceIdentifier(W),Me=null!==(Q=this.onInitCallbacks.get(We))&&void 0!==Q?Q:new Set;Me.add(G),this.onInitCallbacks.set(We,Me);const Je=this.instances.get(We);return Je&&G(Je,We),()=>{Me.delete(G)}}invokeOnInitCallbacks(G,W){const Q=this.onInitCallbacks.get(W);if(Q)for(const We of Q)try{We(G,W)}catch{}}getOrInitializeService({instanceIdentifier:G,options:W={}}){let Q=this.instances.get(G);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(ye=G,ye===le?void 0:ye),options:W}),this.instances.set(G,Q),this.instancesOptions.set(G,W),this.invokeOnInitCallbacks(Q,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,Q)}catch{}var ye;return Q||null}normalizeInstanceIdentifier(G=le){return this.component?this.component.multipleInstances?G:le:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ce{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const W=this.getProvider(G.name);if(W.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);W.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const W=new ue(G,this);return this.providers.set(G,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(bt,Ne,U)=>{U.d(Ne,{Am:()=>ye,Ub:()=>Ce,Yd:()=>Ee,in:()=>te});const y=[];var te=(()=>{return(G=te||(te={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",te;var G})();const F={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},le=te.INFO,ue={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},ce=(G,W,...Q)=>{if(W<G.logLevel)return;const We=(new Date).toISOString(),Me=ue[W];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Me](`[${We}]  ${G.name}:`,...Q)};class Ee{constructor(W){this.name=W,this._logLevel=le,this._logHandler=ce,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in te))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?F[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...W),this._logHandler(this,te.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...W),this._logHandler(this,te.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,te.INFO,...W),this._logHandler(this,te.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,te.WARN,...W),this._logHandler(this,te.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...W),this._logHandler(this,te.ERROR,...W)}}function Ce(G){y.forEach(W=>{W.setLogLevel(G)})}function ye(G,W){for(const Q of y){let We=null;W&&W.level&&(We=F[W.level]),Q.userLogHandler=null===G?null:(Me,Je,...ht)=>{const _e=ht.map(Oe=>{if(null==Oe)return null;if("string"==typeof Oe)return Oe;if("number"==typeof Oe||"boolean"==typeof Oe)return Oe.toString();if(Oe instanceof Error)return Oe.message;try{return JSON.stringify(Oe)}catch{return null}}).filter(Oe=>Oe).join(" ");Je>=(We??Me.logLevel)&&G({level:te[Je].toLowerCase(),message:_e,args:ht,type:Me.name})}}}},5861:(bt,Ne,U)=>{function y(F,le,ue,ce,Ee,Ce,ye){try{var G=F[Ce](ye),W=G.value}catch(Q){return void ue(Q)}G.done?le(W):Promise.resolve(W).then(ce,Ee)}function te(F){return function(){var le=this,ue=arguments;return new Promise(function(ce,Ee){var Ce=F.apply(le,ue);function ye(W){y(Ce,ce,Ee,ye,G,"next",W)}function G(W){y(Ce,ce,Ee,ye,G,"throw",W)}ye(void 0)})}}U.d(Ne,{Z:()=>te})},7582:(bt,Ne,U)=>{function le(he,me){var we={};for(var de in he)Object.prototype.hasOwnProperty.call(he,de)&&me.indexOf(de)<0&&(we[de]=he[de]);if(null!=he&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(de=Object.getOwnPropertySymbols(he);xe<de.length;xe++)me.indexOf(de[xe])<0&&Object.prototype.propertyIsEnumerable.call(he,de[xe])&&(we[de[xe]]=he[de[xe]])}return we}function Q(he,me,we,de){return new(we||(we=Promise))(function(Ae,pt){function gt(Yt){try{It(de.next(Yt))}catch(Pn){pt(Pn)}}function bn(Yt){try{It(de.throw(Yt))}catch(Pn){pt(Pn)}}function It(Yt){Yt.done?Ae(Yt.value):function xe(Ae){return Ae instanceof we?Ae:new we(function(pt){pt(Ae)})}(Yt.value).then(gt,bn)}It((de=de.apply(he,me||[])).next())})}function Ve(he){return this instanceof Ve?(this.v=he,this):new Ve(he)}function Te(he,me,we){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,de=we.apply(he,me||[]),Ae=[];return xe={},pt("next"),pt("throw"),pt("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function pt(Cn){de[Cn]&&(xe[Cn]=function(qn){return new Promise(function(pr,Vn){Ae.push([Cn,qn,pr,Vn])>1||gt(Cn,qn)})})}function gt(Cn,qn){try{!function bn(Cn){Cn.value instanceof Ve?Promise.resolve(Cn.value.v).then(It,Yt):Pn(Ae[0][2],Cn)}(de[Cn](qn))}catch(pr){Pn(Ae[0][3],pr)}}function It(Cn){gt("next",Cn)}function Yt(Cn){gt("throw",Cn)}function Pn(Cn,qn){Cn(qn),Ae.shift(),Ae.length&&gt(Ae[0][0],Ae[0][1])}}function Ke(he){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var we,me=he[Symbol.asyncIterator];return me?me.call(he):(he=function ht(he){var me="function"==typeof Symbol&&Symbol.iterator,we=me&&he[me],de=0;if(we)return we.call(he);if(he&&"number"==typeof he.length)return{next:function(){return he&&de>=he.length&&(he=void 0),{value:he&&he[de++],done:!he}}};throw new TypeError(me?"Object is not iterable.":"Symbol.iterator is not defined.")}(he),we={},de("next"),de("throw"),de("return"),we[Symbol.asyncIterator]=function(){return this},we);function de(Ae){we[Ae]=he[Ae]&&function(pt){return new Promise(function(gt,bn){!function xe(Ae,pt,gt,bn){Promise.resolve(bn).then(function(It){Ae({value:It,done:gt})},pt)}(gt,bn,(pt=he[Ae](pt)).done,pt.value)})}}}U.d(Ne,{FC:()=>Te,KL:()=>Ke,_T:()=>le,mG:()=>Q,qq:()=>Ve}),"function"==typeof SuppressedError&&SuppressedError}},bt=>{bt(bt.s=9601)}]);
